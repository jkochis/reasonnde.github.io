"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};!function t(e,n,o){function i(s,a){if(!n[s]){if(!e[s]){var l="function"==typeof require&&require;if(!a&&l)return l(s,!0);if(r)return r(s,!0);throw new Error("Cannot find module '"+s+"'")}var c=n[s]={exports:{}};e[s][0].call(c.exports,function(t){var n=e[s][1][t];return i(n?n:t)},c,c.exports,t,e,n,o)}return n[s].exports}for(var r="function"==typeof require&&require,s=0;s<o.length;s++)i(o[s]);return i}({1:[function(t,e,n){t("../node_modules/waypoints/lib/noframework.waypoints");var o=document.body.style,i=document.location+"images/bg/",r=".png",s=["Feather_TONE","DuckPrints_Feather_TONE"],a=!1,l=["sm-new-employees-container","sm-current-employees-container","sm-exiting-employees-container","sm-cadillac-tax-container","sm-penalties-container","sm-benefits-requirements-container","sm-voluntary-insurance-container","sm-exchanges-container","sm-whats-next-container","new-employees-container","current-employees-container","exiting-employees-container","cadillac-tax-container","penalties-container","benefits-requirements-container","voluntary-insurance-container","exchanges-container","whats-next-container"];new Waypoint({element:document.getElementById("waypointHeader"),handler:function(t){}}),window.waypoints=[],l.forEach(function(t,e){console.log("."+t),window.waypoints[e]=new Waypoint({element:document.querySelector("."+t),handler:function(t){console.log("loading..."),c(Math.floor(2*Math.random()))}})}),a!==!0&&(s.forEach(function(t){(new Image).src=i+t+r}),a=!0);var c=function(t){setTimeout(function(){o.backgroundImage="url("+i+s[t]+r+")",console.log("loading "+i+s[t]+r)},100)},h=jQuery(".business-type-select");h.each(function(t,e){console.log(e),$(e).on("click",function(){console.log(e),jQuery(".hcr-menu-item").hide(),"business-50"===e.dataset.business?$("a.sm").parent().show():$("a.lg").parent().show(),document.body.classList="",document.body.classList.add(e.dataset.business+"-active");var t=document.querySelector(".business-type-select.active");t&&t.classList.remove("active"),e.classList.add("active");for(var n=document.querySelectorAll(".hcr-menu"),o=0;o<n.length;o++)n[o].style.visibility="visible";u.accordion(0,"top",function(t,e){e.el.classList.add("open"),console.log(t,e)});var i=document.querySelector(".business-container.visible");i&&(i.style.display="none",i.classList.remove("visible"));var r=document.querySelector("."+e.dataset.business+"-container");console.log(r),$(r).fadeIn(),r.classList.add("visible"),jQuery("html, body").animate({scrollTop:jQuery(r).offset().top},1e3,function(){$(r).find("h3").addClass("animated").addClass("pulse")}),c(Math.floor(2*Math.random())+0),window.waypoints=[],l.forEach(function(t,e){console.log("."+t),window.waypoints[e]=new Waypoint({element:document.querySelector("."+t),handler:function(t){console.log("loading..."),c(Math.floor(2*Math.random()))}})})})});var u=new OriDomi(document.querySelector(".hcr-menu"),{hPanels:3,ripple:2,shading:"hard",touchEnabled:!1});u.foldUp("top");var p=jQuery(".hcr-menu-item a");p.on("click",function(t,e){t.preventDefault(),console.log("."+t.target.href.split("#")[1]),jQuery("html, body").animate({scrollTop:jQuery("."+t.target.href.split("#")[1]+"-container").offset().top-100},1e3,function(){})});for(var d=[],f=0;f<p.length;f++){var y=p[f],m=jQuery(y).attr("href");d.push(m)}jQuery(window).scroll(function(){for(var t=jQuery(window).scrollTop(),e=jQuery(window).height(),n=jQuery(document).height(),o=0;o<d.length;o++){var i=d[o].replace("#",""),r=jQuery("."+i+"-container").offset().top-200,s=jQuery("."+i+"-container").height();t>=r&&r+s>t?jQuery("a[href='#"+i+"']").addClass("active"):jQuery("a[href='#"+i+"']").removeClass("active")}if(t+e==n&&!jQuery("nav li:last-child a").hasClass("active")){var a=jQuery(".nav-active").attr("href");jQuery("a[href='"+a+"']").removeClass("active"),jQuery("nav li:last-child a").addClass("active")}})},{"../node_modules/waypoints/lib/noframework.waypoints":2}],2:[function(t,e,n){!function(){function t(o){if(!o)throw new Error("No options passed to Waypoint constructor");if(!o.element)throw new Error("No element option passed to Waypoint constructor");if(!o.handler)throw new Error("No handler option passed to Waypoint constructor");this.key="waypoint-"+e,this.options=t.Adapter.extend({},t.defaults,o),this.element=this.options.element,this.adapter=new t.Adapter(this.element),this.callback=o.handler,this.axis=this.options.horizontal?"horizontal":"vertical",this.enabled=this.options.enabled,this.triggerPoint=null,this.group=t.Group.findOrCreate({name:this.options.group,axis:this.axis}),this.context=t.Context.findOrCreateByElement(this.options.context),t.offsetAliases[this.options.offset]&&(this.options.offset=t.offsetAliases[this.options.offset]),this.group.add(this),this.context.add(this),n[this.key]=this,e+=1}var e=0,n={};t.prototype.queueTrigger=function(t){this.group.queueTrigger(this,t)},t.prototype.trigger=function(t){this.enabled&&this.callback&&this.callback.apply(this,t)},t.prototype.destroy=function(){this.context.remove(this),this.group.remove(this),delete n[this.key]},t.prototype.disable=function(){return this.enabled=!1,this},t.prototype.enable=function(){return this.context.refresh(),this.enabled=!0,this},t.prototype.next=function(){return this.group.next(this)},t.prototype.previous=function(){return this.group.previous(this)},t.invokeAll=function(t){var e=[];for(var o in n)e.push(n[o]);for(var i=0,r=e.length;r>i;i++)e[i][t]()},t.destroyAll=function(){t.invokeAll("destroy")},t.disableAll=function(){t.invokeAll("disable")},t.enableAll=function(){t.invokeAll("enable")},t.refreshAll=function(){t.Context.refreshAll()},t.viewportHeight=function(){return window.innerHeight||document.documentElement.clientHeight},t.viewportWidth=function(){return document.documentElement.clientWidth},t.adapters=[],t.defaults={context:window,continuous:!0,enabled:!0,group:"default",horizontal:!1,offset:0},t.offsetAliases={"bottom-in-view":function(){return this.context.innerHeight()-this.adapter.outerHeight()},"right-in-view":function(){return this.context.innerWidth()-this.adapter.outerWidth()}},window.Waypoint=t}(),function(){function t(t){window.setTimeout(t,1e3/60)}function e(t){this.element=t,this.Adapter=i.Adapter,this.adapter=new this.Adapter(t),this.key="waypoint-context-"+n,this.didScroll=!1,this.didResize=!1,this.oldScroll={x:this.adapter.scrollLeft(),y:this.adapter.scrollTop()},this.waypoints={vertical:{},horizontal:{}},t.waypointContextKey=this.key,o[t.waypointContextKey]=this,n+=1,this.createThrottledScrollHandler(),this.createThrottledResizeHandler()}var n=0,o={},i=window.Waypoint,r=window.onload;e.prototype.add=function(t){var e=t.options.horizontal?"horizontal":"vertical";this.waypoints[e][t.key]=t,this.refresh()},e.prototype.checkEmpty=function(){var t=this.Adapter.isEmptyObject(this.waypoints.horizontal),e=this.Adapter.isEmptyObject(this.waypoints.vertical);t&&e&&(this.adapter.off(".waypoints"),delete o[this.key])},e.prototype.createThrottledResizeHandler=function(){function t(){e.handleResize(),e.didResize=!1}var e=this;this.adapter.on("resize.waypoints",function(){e.didResize||(e.didResize=!0,i.requestAnimationFrame(t))})},e.prototype.createThrottledScrollHandler=function(){function t(){e.handleScroll(),e.didScroll=!1}var e=this;this.adapter.on("scroll.waypoints",function(){e.didScroll&&!i.isTouch||(e.didScroll=!0,i.requestAnimationFrame(t))})},e.prototype.handleResize=function(){i.Context.refreshAll()},e.prototype.handleScroll=function(){var t={},e={horizontal:{newScroll:this.adapter.scrollLeft(),oldScroll:this.oldScroll.x,forward:"right",backward:"left"},vertical:{newScroll:this.adapter.scrollTop(),oldScroll:this.oldScroll.y,forward:"down",backward:"up"}};for(var n in e){var o=e[n],i=o.newScroll>o.oldScroll,r=i?o.forward:o.backward;for(var s in this.waypoints[n]){var a=this.waypoints[n][s],l=o.oldScroll<a.triggerPoint,c=o.newScroll>=a.triggerPoint,h=l&&c,u=!l&&!c;(h||u)&&(a.queueTrigger(r),t[a.group.id]=a.group)}}for(var p in t)t[p].flushTriggers();this.oldScroll={x:e.horizontal.newScroll,y:e.vertical.newScroll}},e.prototype.innerHeight=function(){return this.element==this.element.window?i.viewportHeight():this.adapter.innerHeight()},e.prototype.remove=function(t){delete this.waypoints[t.axis][t.key],this.checkEmpty()},e.prototype.innerWidth=function(){return this.element==this.element.window?i.viewportWidth():this.adapter.innerWidth()},e.prototype.destroy=function(){var t=[];for(var e in this.waypoints)for(var n in this.waypoints[e])t.push(this.waypoints[e][n]);for(var o=0,i=t.length;i>o;o++)t[o].destroy()},e.prototype.refresh=function(){var t,e=this.element==this.element.window,n=e?void 0:this.adapter.offset(),o={};this.handleScroll(),t={horizontal:{contextOffset:e?0:n.left,contextScroll:e?0:this.oldScroll.x,contextDimension:this.innerWidth(),oldScroll:this.oldScroll.x,forward:"right",backward:"left",offsetProp:"left"},vertical:{contextOffset:e?0:n.top,contextScroll:e?0:this.oldScroll.y,contextDimension:this.innerHeight(),oldScroll:this.oldScroll.y,forward:"down",backward:"up",offsetProp:"top"}};for(var r in t){var s=t[r];for(var a in this.waypoints[r]){var l,c,h,u,p,d=this.waypoints[r][a],f=d.options.offset,y=d.triggerPoint,m=0,w=null==y;d.element!==d.element.window&&(m=d.adapter.offset()[s.offsetProp]),"function"==typeof f?f=f.apply(d):"string"==typeof f&&(f=parseFloat(f),d.options.offset.indexOf("%")>-1&&(f=Math.ceil(s.contextDimension*f/100))),l=s.contextScroll-s.contextOffset,d.triggerPoint=m+l-f,c=y<s.oldScroll,h=d.triggerPoint>=s.oldScroll,u=c&&h,p=!c&&!h,!w&&u?(d.queueTrigger(s.backward),o[d.group.id]=d.group):!w&&p?(d.queueTrigger(s.forward),o[d.group.id]=d.group):w&&s.oldScroll>=d.triggerPoint&&(d.queueTrigger(s.forward),o[d.group.id]=d.group)}}return i.requestAnimationFrame(function(){for(var t in o)o[t].flushTriggers()}),this},e.findOrCreateByElement=function(t){return e.findByElement(t)||new e(t)},e.refreshAll=function(){for(var t in o)o[t].refresh()},e.findByElement=function(t){return o[t.waypointContextKey]},window.onload=function(){r&&r(),e.refreshAll()},i.requestAnimationFrame=function(e){var n=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||t;n.call(window,e)},i.Context=e}(),function(){function t(t,e){return t.triggerPoint-e.triggerPoint}function e(t,e){return e.triggerPoint-t.triggerPoint}function n(t){this.name=t.name,this.axis=t.axis,this.id=this.name+"-"+this.axis,this.waypoints=[],this.clearTriggerQueues(),o[this.axis][this.name]=this}var o={vertical:{},horizontal:{}},i=window.Waypoint;n.prototype.add=function(t){this.waypoints.push(t)},n.prototype.clearTriggerQueues=function(){this.triggerQueues={up:[],down:[],left:[],right:[]}},n.prototype.flushTriggers=function(){for(var n in this.triggerQueues){var o=this.triggerQueues[n],i="up"===n||"left"===n;o.sort(i?e:t);for(var r=0,s=o.length;s>r;r+=1){var a=o[r];(a.options.continuous||r===o.length-1)&&a.trigger([n])}}this.clearTriggerQueues()},n.prototype.next=function(e){this.waypoints.sort(t);var n=i.Adapter.inArray(e,this.waypoints),o=n===this.waypoints.length-1;return o?null:this.waypoints[n+1]},n.prototype.previous=function(e){this.waypoints.sort(t);var n=i.Adapter.inArray(e,this.waypoints);return n?this.waypoints[n-1]:null},n.prototype.queueTrigger=function(t,e){this.triggerQueues[e].push(t)},n.prototype.remove=function(t){var e=i.Adapter.inArray(t,this.waypoints);e>-1&&this.waypoints.splice(e,1)},n.prototype.first=function(){return this.waypoints[0]},n.prototype.last=function(){return this.waypoints[this.waypoints.length-1]},n.findOrCreate=function(t){return o[t.axis][t.name]||new n(t)},i.Group=n}(),function(){function t(t){return t===t.window}function e(e){return t(e)?e:e.defaultView}function n(t){this.element=t,this.handlers={}}var o=window.Waypoint;n.prototype.innerHeight=function(){var e=t(this.element);return e?this.element.innerHeight:this.element.clientHeight},n.prototype.innerWidth=function(){var e=t(this.element);return e?this.element.innerWidth:this.element.clientWidth},n.prototype.off=function(t,e){function n(t,e,n){for(var o=0,i=e.length-1;i>o;o++){var r=e[o];n&&n!==r||t.removeEventListener(r)}}var o=t.split("."),i=o[0],r=o[1],s=this.element;if(r&&this.handlers[r]&&i)n(s,this.handlers[r][i],e),this.handlers[r][i]=[];else if(i)for(var a in this.handlers)n(s,this.handlers[a][i]||[],e),this.handlers[a][i]=[];else if(r&&this.handlers[r]){for(var l in this.handlers[r])n(s,this.handlers[r][l],e);this.handlers[r]={}}},n.prototype.offset=function(){if(!this.element.ownerDocument)return null;var t=this.element.ownerDocument.documentElement,n=e(this.element.ownerDocument),o={top:0,left:0};return this.element.getBoundingClientRect&&(o=this.element.getBoundingClientRect()),{top:o.top+n.pageYOffset-t.clientTop,left:o.left+n.pageXOffset-t.clientLeft}},n.prototype.on=function(t,e){var n=t.split("."),o=n[0],i=n[1]||"__default",r=this.handlers[i]=this.handlers[i]||{},s=r[o]=r[o]||[];s.push(e),this.element.addEventListener(o,e)},n.prototype.outerHeight=function(e){var n,o=this.innerHeight();return e&&!t(this.element)&&(n=window.getComputedStyle(this.element),o+=parseInt(n.marginTop,10),o+=parseInt(n.marginBottom,10)),o},n.prototype.outerWidth=function(e){var n,o=this.innerWidth();return e&&!t(this.element)&&(n=window.getComputedStyle(this.element),o+=parseInt(n.marginLeft,10),o+=parseInt(n.marginRight,10)),o},n.prototype.scrollLeft=function(){var t=e(this.element);return t?t.pageXOffset:this.element.scrollLeft},n.prototype.scrollTop=function(){var t=e(this.element);return t?t.pageYOffset:this.element.scrollTop},n.extend=function(){function t(t,e){if("object"===("undefined"==typeof t?"undefined":_typeof(t))&&"object"===("undefined"==typeof e?"undefined":_typeof(e)))for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}for(var e=Array.prototype.slice.call(arguments),n=1,o=e.length;o>n;n++)t(e[0],e[n]);return e[0]},n.inArray=function(t,e,n){return null==e?-1:e.indexOf(t,n)},n.isEmptyObject=function(t){for(var e in t)return!1;return!0},o.adapters.push({name:"noframework",Adapter:n}),o.Adapter=n}()},{}]},{},[1]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5taW4uanMiLCJhcHAuanMiXSwibmFtZXMiOlsiX3R5cGVvZiIsIlN5bWJvbCIsIml0ZXJhdG9yIiwib2JqIiwiY29uc3RydWN0b3IiLCJlIiwidCIsIm4iLCJyIiwicyIsIm8iLCJ1IiwiYSIsInJlcXVpcmUiLCJpIiwiRXJyb3IiLCJmIiwiZXhwb3J0cyIsImNhbGwiLCJsZW5ndGgiLCIxIiwibW9kdWxlIiwiZG9jU3R5bGUiLCJkb2N1bWVudCIsImJvZHkiLCJzdHlsZSIsImJnUGF0aCIsImxvY2F0aW9uIiwiaW1nRXh0IiwiYmdzIiwiYmdJbWFnZXNMb2FkZWQiLCJjYXRlZ29yeVNlY3Rpb25zIiwiV2F5cG9pbnQiLCJlbGVtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJoYW5kbGVyIiwiZGlyZWN0aW9uIiwid2luZG93Iiwid2F5cG9pbnRzIiwiZm9yRWFjaCIsImluZGV4IiwiY29uc29sZSIsImxvZyIsInF1ZXJ5U2VsZWN0b3IiLCJsb2FkQmciLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJiZyIsIkltYWdlIiwic3JjIiwic2V0VGltZW91dCIsImJhY2tncm91bmRJbWFnZSIsImJ1c2luZXNzU2VsZWN0IiwialF1ZXJ5IiwiZWFjaCIsImVsIiwiJCIsIm9uIiwiaGlkZSIsImRhdGFzZXQiLCJidXNpbmVzcyIsInBhcmVudCIsInNob3ciLCJjbGFzc0xpc3QiLCJhZGQiLCJjdXJyZW50QWN0aXZlIiwicmVtb3ZlIiwibWVudXMiLCJxdWVyeVNlbGVjdG9yQWxsIiwidmlzaWJpbGl0eSIsImZvbGRNZW51IiwiYWNjb3JkaW9uIiwiZXYiLCJvcmkiLCJjdXJyZW50VmlzaWJsZSIsImRpc3BsYXkiLCJzZWN0aW9uVG9TaG93IiwiZmFkZUluIiwiYW5pbWF0ZSIsInNjcm9sbFRvcCIsIm9mZnNldCIsInRvcCIsImZpbmQiLCJhZGRDbGFzcyIsIk9yaURvbWkiLCJoUGFuZWxzIiwicmlwcGxlIiwic2hhZGluZyIsInRvdWNoRW5hYmxlZCIsImZvbGRVcCIsImhjck1lbnVJdGVtTGluayIsInByZXZlbnREZWZhdWx0IiwidGFyZ2V0IiwiaHJlZiIsInNwbGl0IiwiYUFycmF5IiwiYUNoaWxkIiwiYWhyZWYiLCJhdHRyIiwicHVzaCIsInNjcm9sbCIsIndpbmRvd1BvcyIsIndpbmRvd0hlaWdodCIsImhlaWdodCIsImRvY0hlaWdodCIsIl9pIiwidGhlSUQiLCJyZXBsYWNlIiwiZGl2UG9zIiwiZGl2SGVpZ2h0IiwicmVtb3ZlQ2xhc3MiLCJoYXNDbGFzcyIsIm5hdkFjdGl2ZUN1cnJlbnQiLCIuLi9ub2RlX21vZHVsZXMvd2F5cG9pbnRzL2xpYi9ub2ZyYW1ld29yay53YXlwb2ludHMiLCIyIiwib3B0aW9ucyIsInRoaXMiLCJrZXkiLCJrZXlDb3VudGVyIiwiQWRhcHRlciIsImV4dGVuZCIsImRlZmF1bHRzIiwiYWRhcHRlciIsImNhbGxiYWNrIiwiYXhpcyIsImhvcml6b250YWwiLCJlbmFibGVkIiwidHJpZ2dlclBvaW50IiwiZ3JvdXAiLCJHcm91cCIsImZpbmRPckNyZWF0ZSIsIm5hbWUiLCJjb250ZXh0IiwiQ29udGV4dCIsImZpbmRPckNyZWF0ZUJ5RWxlbWVudCIsIm9mZnNldEFsaWFzZXMiLCJhbGxXYXlwb2ludHMiLCJwcm90b3R5cGUiLCJxdWV1ZVRyaWdnZXIiLCJ0cmlnZ2VyIiwiYXJncyIsImFwcGx5IiwiZGVzdHJveSIsImRpc2FibGUiLCJlbmFibGUiLCJyZWZyZXNoIiwibmV4dCIsInByZXZpb3VzIiwiaW52b2tlQWxsIiwibWV0aG9kIiwiYWxsV2F5cG9pbnRzQXJyYXkiLCJ3YXlwb2ludEtleSIsImVuZCIsImRlc3Ryb3lBbGwiLCJkaXNhYmxlQWxsIiwiZW5hYmxlQWxsIiwicmVmcmVzaEFsbCIsInZpZXdwb3J0SGVpZ2h0IiwiaW5uZXJIZWlnaHQiLCJkb2N1bWVudEVsZW1lbnQiLCJjbGllbnRIZWlnaHQiLCJ2aWV3cG9ydFdpZHRoIiwiY2xpZW50V2lkdGgiLCJhZGFwdGVycyIsImNvbnRpbnVvdXMiLCJib3R0b20taW4tdmlldyIsIm91dGVySGVpZ2h0IiwicmlnaHQtaW4tdmlldyIsImlubmVyV2lkdGgiLCJvdXRlcldpZHRoIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lU2hpbSIsImRpZFNjcm9sbCIsImRpZFJlc2l6ZSIsIm9sZFNjcm9sbCIsIngiLCJzY3JvbGxMZWZ0IiwieSIsInZlcnRpY2FsIiwid2F5cG9pbnRDb250ZXh0S2V5IiwiY29udGV4dHMiLCJjcmVhdGVUaHJvdHRsZWRTY3JvbGxIYW5kbGVyIiwiY3JlYXRlVGhyb3R0bGVkUmVzaXplSGFuZGxlciIsIm9sZFdpbmRvd0xvYWQiLCJvbmxvYWQiLCJ3YXlwb2ludCIsImNoZWNrRW1wdHkiLCJob3Jpem9udGFsRW1wdHkiLCJpc0VtcHR5T2JqZWN0IiwidmVydGljYWxFbXB0eSIsIm9mZiIsInJlc2l6ZUhhbmRsZXIiLCJzZWxmIiwiaGFuZGxlUmVzaXplIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwic2Nyb2xsSGFuZGxlciIsImhhbmRsZVNjcm9sbCIsImlzVG91Y2giLCJ0cmlnZ2VyZWRHcm91cHMiLCJheGVzIiwibmV3U2Nyb2xsIiwiZm9yd2FyZCIsImJhY2t3YXJkIiwiYXhpc0tleSIsImlzRm9yd2FyZCIsIndhc0JlZm9yZVRyaWdnZXJQb2ludCIsIm5vd0FmdGVyVHJpZ2dlclBvaW50IiwiY3Jvc3NlZEZvcndhcmQiLCJjcm9zc2VkQmFja3dhcmQiLCJpZCIsImdyb3VwS2V5IiwiZmx1c2hUcmlnZ2VycyIsImlzV2luZG93IiwiY29udGV4dE9mZnNldCIsInVuZGVmaW5lZCIsImxlZnQiLCJjb250ZXh0U2Nyb2xsIiwiY29udGV4dERpbWVuc2lvbiIsIm9mZnNldFByb3AiLCJjb250ZXh0TW9kaWZpZXIiLCJ3YXNCZWZvcmVTY3JvbGwiLCJub3dBZnRlclNjcm9sbCIsInRyaWdnZXJlZEJhY2t3YXJkIiwidHJpZ2dlcmVkRm9yd2FyZCIsImFkanVzdG1lbnQiLCJvbGRUcmlnZ2VyUG9pbnQiLCJlbGVtZW50T2Zmc2V0IiwiZnJlc2hXYXlwb2ludCIsInBhcnNlRmxvYXQiLCJpbmRleE9mIiwiY2VpbCIsImZpbmRCeUVsZW1lbnQiLCJjb250ZXh0SWQiLCJyZXF1ZXN0Rm4iLCJtb3pSZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJ3ZWJraXRSZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJieVRyaWdnZXJQb2ludCIsImIiLCJieVJldmVyc2VUcmlnZ2VyUG9pbnQiLCJjbGVhclRyaWdnZXJRdWV1ZXMiLCJncm91cHMiLCJ0cmlnZ2VyUXVldWVzIiwidXAiLCJkb3duIiwicmlnaHQiLCJyZXZlcnNlIiwic29ydCIsImluQXJyYXkiLCJpc0xhc3QiLCJzcGxpY2UiLCJmaXJzdCIsImxhc3QiLCJnZXRXaW5kb3ciLCJkZWZhdWx0VmlldyIsIk5vRnJhbWV3b3JrQWRhcHRlciIsImhhbmRsZXJzIiwiaXNXaW4iLCJldmVudCIsInJlbW92ZUxpc3RlbmVycyIsImxpc3RlbmVycyIsImxpc3RlbmVyIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImV2ZW50UGFydHMiLCJldmVudFR5cGUiLCJuYW1lc3BhY2UiLCJucyIsInR5cGUiLCJvd25lckRvY3VtZW50Iiwid2luIiwicmVjdCIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsInBhZ2VZT2Zmc2V0IiwiY2xpZW50VG9wIiwicGFnZVhPZmZzZXQiLCJjbGllbnRMZWZ0IiwibnNIYW5kbGVycyIsIm5zVHlwZUxpc3QiLCJhZGRFdmVudExpc3RlbmVyIiwiaW5jbHVkZU1hcmdpbiIsImNvbXB1dGVkU3R5bGUiLCJnZXRDb21wdXRlZFN0eWxlIiwicGFyc2VJbnQiLCJtYXJnaW5Ub3AiLCJtYXJnaW5Cb3R0b20iLCJ3aWR0aCIsIm1hcmdpbkxlZnQiLCJtYXJnaW5SaWdodCIsIm1lcmdlIiwiaGFzT3duUHJvcGVydHkiLCJBcnJheSIsInNsaWNlIiwiYXJndW1lbnRzIiwiYXJyYXkiXSwibWFwcGluZ3MiOiJBQUFBLFlBRUEsSUFBSUEsU0FBNEIsa0JBQVhDLFNBQW9ELGdCQUFwQkEsUUFBT0MsU0FBd0IsU0FBVUMsR0FB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LEVBQW1CbEUsY0FBZ0IsU0FBU3pMLEdBRTFDLElBQUssR0FBSWlJLEtBQVFqSSxHQUNmLE9BQU8sQ0FFVCxRQUFPLEdBR1Q2QixFQUFTb0ksU0FBU2hFLE1BQ2hCZ0MsS0FBTSxjQUNOWixRQUFTc0ksSUFFWDlOLEVBQVN3RixRQUFVc0ksZUFHViIsImZpbGUiOiJhcHAubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBfdHlwZW9mID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIgPyBmdW5jdGlvbiAob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9IDogZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9O1xuXG4oZnVuY3Rpb24gZSh0LCBuLCByKSB7XG4gIGZ1bmN0aW9uIHMobywgdSkge1xuICAgIGlmICghbltvXSkge1xuICAgICAgaWYgKCF0W29dKSB7XG4gICAgICAgIHZhciBhID0gdHlwZW9mIHJlcXVpcmUgPT0gXCJmdW5jdGlvblwiICYmIHJlcXVpcmU7aWYgKCF1ICYmIGEpIHJldHVybiBhKG8sICEwKTtpZiAoaSkgcmV0dXJuIGkobywgITApO3Rocm93IG5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIgKyBvICsgXCInXCIpO1xuICAgICAgfXZhciBmID0gbltvXSA9IHsgZXhwb3J0czoge30gfTt0W29dWzBdLmNhbGwoZi5leHBvcnRzLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICB2YXIgbiA9IHRbb11bMV1bZV07cmV0dXJuIHMobiA/IG4gOiBlKTtcbiAgICAgIH0sIGYsIGYuZXhwb3J0cywgZSwgdCwgbiwgcik7XG4gICAgfXJldHVybiBuW29dLmV4cG9ydHM7XG4gIH12YXIgaSA9IHR5cGVvZiByZXF1aXJlID09IFwiZnVuY3Rpb25cIiAmJiByZXF1aXJlO2ZvciAodmFyIG8gPSAwOyBvIDwgci5sZW5ndGg7IG8rKykge1xuICAgIHMocltvXSk7XG4gIH1yZXR1cm4gcztcbn0pKHsgMTogW2Z1bmN0aW9uIChyZXF1aXJlLCBtb2R1bGUsIGV4cG9ydHMpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICByZXF1aXJlKCcuLi9ub2RlX21vZHVsZXMvd2F5cG9pbnRzL2xpYi9ub2ZyYW1ld29yay53YXlwb2ludHMnKTtcblxuICAgIHZhciBkb2NTdHlsZSA9IGRvY3VtZW50LmJvZHkuc3R5bGU7XG4gICAgdmFyIGJnUGF0aCA9IGRvY3VtZW50LmxvY2F0aW9uICsgJ2ltYWdlcy9iZy8nO1xuICAgIHZhciBpbWdFeHQgPSAnLnBuZyc7XG4gICAgdmFyIGJncyA9IFsnRmVhdGhlcl9UT05FJywgJ0R1Y2tQcmludHNfRmVhdGhlcl9UT05FJyAvKiwgJ1dhbGxQYXBlcjIuNScsICdXYWxsUGFwZXIzJywgJ1dhbGxQYXBlcjMuNScsICdXYWxsUGFwZXI0JywgJ1dhbGxQYXBlcjQuNScsICdXYWxsUGFwZXI1LjUnLCAnV2FsbFBhcGVyNS41X3RvbmUnLCdXYWxsUGFwZXI2JywgJ1dhbGxQYXBlcjYuNScsICdXYWxsUGFwZXI3LjUnLCAnV2FsbFBhcGVyNy41X3RvbmUnKi9dO1xuICAgIHZhciBiZ0ltYWdlc0xvYWRlZCA9IGZhbHNlO1xuICAgIHZhciBjYXRlZ29yeVNlY3Rpb25zID0gWydzbS1uZXctZW1wbG95ZWVzLWNvbnRhaW5lcicsICdzbS1jdXJyZW50LWVtcGxveWVlcy1jb250YWluZXInLCAnc20tZXhpdGluZy1lbXBsb3llZXMtY29udGFpbmVyJywgJ3NtLWNhZGlsbGFjLXRheC1jb250YWluZXInLCAnc20tcGVuYWx0aWVzLWNvbnRhaW5lcicsICdzbS1iZW5lZml0cy1yZXF1aXJlbWVudHMtY29udGFpbmVyJywgJ3NtLXZvbHVudGFyeS1pbnN1cmFuY2UtY29udGFpbmVyJywgJ3NtLWV4Y2hhbmdlcy1jb250YWluZXInLCAnc20td2hhdHMtbmV4dC1jb250YWluZXInLCAnbmV3LWVtcGxveWVlcy1jb250YWluZXInLCAnY3VycmVudC1lbXBsb3llZXMtY29udGFpbmVyJywgJ2V4aXRpbmctZW1wbG95ZWVzLWNvbnRhaW5lcicsICdjYWRpbGxhYy10YXgtY29udGFpbmVyJywgJ3BlbmFsdGllcy1jb250YWluZXInLCAnYmVuZWZpdHMtcmVxdWlyZW1lbnRzLWNvbnRhaW5lcicsICd2b2x1bnRhcnktaW5zdXJhbmNlLWNvbnRhaW5lcicsICdleGNoYW5nZXMtY29udGFpbmVyJywgJ3doYXRzLW5leHQtY29udGFpbmVyJ107XG5cbiAgICBuZXcgV2F5cG9pbnQoe1xuICAgICAgZWxlbWVudDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3dheXBvaW50SGVhZGVyJyksXG4gICAgICBoYW5kbGVyOiBmdW5jdGlvbiBoYW5kbGVyKGRpcmVjdGlvbikge1xuICAgICAgICAvL2NvbnNvbGUubG9nKCdTY3JvbGxlZCB0byB3YXlwb2ludCAxJylcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIFV0aWxpdHlcbiAgICAvLyBzZXR1cCB3YXlwb2ludHNcbiAgICB3aW5kb3cud2F5cG9pbnRzID0gW107XG4gICAgY2F0ZWdvcnlTZWN0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50LCBpbmRleCkge1xuICAgICAgY29uc29sZS5sb2coXCIuXCIgKyBlbGVtZW50KTtcbiAgICAgIHdpbmRvdy53YXlwb2ludHNbaW5kZXhdID0gbmV3IFdheXBvaW50KHtcbiAgICAgICAgZWxlbWVudDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5cIiArIGVsZW1lbnQpLFxuICAgICAgICBoYW5kbGVyOiBmdW5jdGlvbiBoYW5kbGVyKGRpcmVjdGlvbikge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdsb2FkaW5nLi4uJyk7XG4gICAgICAgICAgbG9hZEJnKE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDIpKTtcbiAgICAgICAgICAvL2RpcmVjdGlvbiA9PT0gJ2Rvd24nID8gbG9hZEJnKGluZGV4ICsgMSkgOiBsb2FkQmcoaW5kZXgpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIC8vIHByZWxvYWQgaW1hZ2VzXG4gICAgaWYgKGJnSW1hZ2VzTG9hZGVkICE9PSB0cnVlKSB7XG4gICAgICBiZ3MuZm9yRWFjaChmdW5jdGlvbiAoYmcpIHtcbiAgICAgICAgbmV3IEltYWdlKCkuc3JjID0gYmdQYXRoICsgYmcgKyBpbWdFeHQ7XG4gICAgICAgIC8vIGNhY2hlcyBpbWFnZXMsIGF2b2lkaW5nIHdoaXRlIGZsYXNoIGJldHdlZW4gYmFja2dyb3VuZCByZXBsYWNlbWVudHNcbiAgICAgIH0pO1xuICAgICAgYmdJbWFnZXNMb2FkZWQgPSB0cnVlO1xuICAgIH1cbiAgICAvLyBsb2FkIGJnIGltYWdlXG4gICAgdmFyIGxvYWRCZyA9IGZ1bmN0aW9uIGxvYWRCZyhiZykge1xuICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGRvY1N0eWxlLmJhY2tncm91bmRJbWFnZSA9IFwidXJsKFwiICsgYmdQYXRoICsgYmdzW2JnXSArIGltZ0V4dCArIFwiKVwiO1xuICAgICAgICBjb25zb2xlLmxvZyhcImxvYWRpbmcgXCIgKyBiZ1BhdGggKyBiZ3NbYmddICsgaW1nRXh0KTtcbiAgICAgIH0sIDEwMCk7XG4gICAgfTtcbiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICAgIC8vIGJ1c2luZXNzIHNlbGVjdCBidXR0b25zXG4gICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICB2YXIgYnVzaW5lc3NTZWxlY3QgPSBqUXVlcnkoJy5idXNpbmVzcy10eXBlLXNlbGVjdCcpO1xuICAgIGJ1c2luZXNzU2VsZWN0LmVhY2goZnVuY3Rpb24gKGksIGVsKSB7XG4gICAgICBjb25zb2xlLmxvZyhlbCk7XG4gICAgICAkKGVsKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGVsKTtcbiAgICAgICAgalF1ZXJ5KCcuaGNyLW1lbnUtaXRlbScpLmhpZGUoKTtcbiAgICAgICAgaWYgKGVsLmRhdGFzZXQuYnVzaW5lc3MgPT09ICdidXNpbmVzcy01MCcpIHtcbiAgICAgICAgICAkKCdhLnNtJykucGFyZW50KCkuc2hvdygpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICQoJ2EubGcnKS5wYXJlbnQoKS5zaG93KCk7XG4gICAgICAgIH1cbiAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QgPSAnJztcbiAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKGVsLmRhdGFzZXQuYnVzaW5lc3MgKyBcIi1hY3RpdmVcIik7XG4gICAgICAgIC8vIGdldCB0aGUgYWN0aXZlIG1lbnUgaXRlbSBhbmQgdHVybiBpdCBvZmZcbiAgICAgICAgdmFyIGN1cnJlbnRBY3RpdmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnVzaW5lc3MtdHlwZS1zZWxlY3QuYWN0aXZlJyk7XG4gICAgICAgIGlmIChjdXJyZW50QWN0aXZlKSB7XG4gICAgICAgICAgY3VycmVudEFjdGl2ZS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcbiAgICAgICAgfVxuICAgICAgICAvLyB0dXJuIG9uIHRoZSBuZXcgbWVudSBpdGVtXG4gICAgICAgIGVsLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuICAgICAgICAvLyBzaG93IHRoZSBuYXZcbiAgICAgICAgdmFyIG1lbnVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmhjci1tZW51Jyk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWVudXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBtZW51c1tpXS5zdHlsZS52aXNpYmlsaXR5ID0gJ3Zpc2libGUnO1xuICAgICAgICB9XG4gICAgICAgIGZvbGRNZW51LmFjY29yZGlvbigwLCAndG9wJywgZnVuY3Rpb24gKGV2LCBvcmkpIHtcbiAgICAgICAgICBvcmkuZWwuY2xhc3NMaXN0LmFkZCgnb3BlbicpO1xuICAgICAgICAgIGNvbnNvbGUubG9nKGV2LCBvcmkpO1xuICAgICAgICB9KTtcbiAgICAgICAgdmFyIGN1cnJlbnRWaXNpYmxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJ1c2luZXNzLWNvbnRhaW5lci52aXNpYmxlJyk7XG4gICAgICAgIGlmIChjdXJyZW50VmlzaWJsZSkge1xuICAgICAgICAgIGN1cnJlbnRWaXNpYmxlLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgY3VycmVudFZpc2libGUuY2xhc3NMaXN0LnJlbW92ZSgndmlzaWJsZScpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBzZWN0aW9uVG9TaG93ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5cIiArIGVsLmRhdGFzZXQuYnVzaW5lc3MgKyBcIi1jb250YWluZXJcIik7XG4gICAgICAgIGNvbnNvbGUubG9nKHNlY3Rpb25Ub1Nob3cpO1xuICAgICAgICAkKHNlY3Rpb25Ub1Nob3cpLmZhZGVJbigpO1xuICAgICAgICBzZWN0aW9uVG9TaG93LmNsYXNzTGlzdC5hZGQoJ3Zpc2libGUnKTtcbiAgICAgICAgalF1ZXJ5KCdodG1sLCBib2R5JykuYW5pbWF0ZSh7XG4gICAgICAgICAgc2Nyb2xsVG9wOiBqUXVlcnkoc2VjdGlvblRvU2hvdykub2Zmc2V0KCkudG9wXG4gICAgICAgIH0sIDEwMDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAkKHNlY3Rpb25Ub1Nob3cpLmZpbmQoJ2gzJykuYWRkQ2xhc3MoJ2FuaW1hdGVkJykuYWRkQ2xhc3MoJ3B1bHNlJyk7XG4gICAgICAgIH0pO1xuICAgICAgICBsb2FkQmcoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMikgKyAwKTtcblxuICAgICAgICAvLyBVdGlsaXR5XG4gICAgICAgIC8vIHNldHVwIHdheXBvaW50c1xuICAgICAgICB3aW5kb3cud2F5cG9pbnRzID0gW107XG4gICAgICAgIGNhdGVnb3J5U2VjdGlvbnMuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCwgaW5kZXgpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcIi5cIiArIGVsZW1lbnQpO1xuICAgICAgICAgIHdpbmRvdy53YXlwb2ludHNbaW5kZXhdID0gbmV3IFdheXBvaW50KHtcbiAgICAgICAgICAgIGVsZW1lbnQ6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuXCIgKyBlbGVtZW50KSxcbiAgICAgICAgICAgIGhhbmRsZXI6IGZ1bmN0aW9uIGhhbmRsZXIoZGlyZWN0aW9uKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdsb2FkaW5nLi4uJyk7XG4gICAgICAgICAgICAgIGxvYWRCZyhNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAyKSk7XG4gICAgICAgICAgICAgIC8vZGlyZWN0aW9uID09PSAnZG93bicgPyBsb2FkQmcoaW5kZXggKyAxKSA6IGxvYWRCZyhpbmRleCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICAvLy8vLy8vLy8vL1xuICAgIC8vIGhjciBtZW51XG4gICAgLy8vLy8vLy8vLy9cbiAgICB2YXIgZm9sZE1lbnUgPSBuZXcgT3JpRG9taShkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGNyLW1lbnUnKSwge1xuICAgICAgaFBhbmVsczogMyxcbiAgICAgIHJpcHBsZTogMixcbiAgICAgIHNoYWRpbmc6ICdoYXJkJyxcbiAgICAgIHRvdWNoRW5hYmxlZDogZmFsc2VcbiAgICB9KTtcbiAgICAvLyBsb2FkXG4gICAgZm9sZE1lbnUuZm9sZFVwKCd0b3AnKTtcblxuICAgIC8vIGNsaWNrXG4gICAgdmFyIGhjck1lbnVJdGVtTGluayA9IGpRdWVyeSgnLmhjci1tZW51LWl0ZW0gYScpO1xuICAgIGhjck1lbnVJdGVtTGluay5vbignY2xpY2snLCBmdW5jdGlvbiAoZSwgZWwpIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGNvbnNvbGUubG9nKFwiLlwiICsgZS50YXJnZXQuaHJlZi5zcGxpdCgnIycpWzFdKTtcbiAgICAgIGpRdWVyeSgnaHRtbCwgYm9keScpLmFuaW1hdGUoe1xuICAgICAgICBzY3JvbGxUb3A6IGpRdWVyeShcIi5cIiArIGUudGFyZ2V0LmhyZWYuc3BsaXQoJyMnKVsxXSArIFwiLWNvbnRhaW5lclwiKS5vZmZzZXQoKS50b3AgLSAxMDBcbiAgICAgIH0sIDEwMDAsIGZ1bmN0aW9uICgpIHt9KTtcbiAgICB9KTtcblxuICAgIC8vc2Nyb2xsXG4gICAgdmFyIGFBcnJheSA9IFtdOyAvLyBjcmVhdGUgdGhlIGVtcHR5IGFBcnJheVxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaGNyTWVudUl0ZW1MaW5rLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgYUNoaWxkID0gaGNyTWVudUl0ZW1MaW5rW2ldO1xuICAgICAgdmFyIGFocmVmID0galF1ZXJ5KGFDaGlsZCkuYXR0cignaHJlZicpO1xuICAgICAgYUFycmF5LnB1c2goYWhyZWYpO1xuICAgIH1cbiAgICB2YXIgY3VycmVudFNlY3Rpb24gPSAnJztcbiAgICBqUXVlcnkod2luZG93KS5zY3JvbGwoZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIHdpbmRvd1BvcyA9IGpRdWVyeSh3aW5kb3cpLnNjcm9sbFRvcCgpOyAvLyBnZXQgdGhlIG9mZnNldCBvZiB0aGUgd2luZG93IGZyb20gdGhlIHRvcCBvZiBwYWdlXG4gICAgICB2YXIgd2luZG93SGVpZ2h0ID0galF1ZXJ5KHdpbmRvdykuaGVpZ2h0KCk7IC8vIGdldCB0aGUgaGVpZ2h0IG9mIHRoZSB3aW5kb3dcbiAgICAgIHZhciBkb2NIZWlnaHQgPSBqUXVlcnkoZG9jdW1lbnQpLmhlaWdodCgpO1xuXG4gICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYUFycmF5Lmxlbmd0aDsgX2krKykge1xuICAgICAgICB2YXIgdGhlSUQgPSBhQXJyYXlbX2ldLnJlcGxhY2UoJyMnLCAnJyk7XG4gICAgICAgIHZhciBkaXZQb3MgPSBqUXVlcnkoXCIuXCIgKyB0aGVJRCArIFwiLWNvbnRhaW5lclwiKS5vZmZzZXQoKS50b3AgLSAyMDA7IC8vIGdldCB0aGUgb2Zmc2V0IG9mIHRoZSBkaXYgZnJvbSB0aGUgdG9wIG9mIHBhZ2VcbiAgICAgICAgdmFyIGRpdkhlaWdodCA9IGpRdWVyeShcIi5cIiArIHRoZUlEICsgXCItY29udGFpbmVyXCIpLmhlaWdodCgpOyAvLyBnZXQgdGhlIGhlaWdodCBvZiB0aGUgZGl2IGluIHF1ZXN0aW9uXG4gICAgICAgIGlmICh3aW5kb3dQb3MgPj0gZGl2UG9zICYmIHdpbmRvd1BvcyA8IGRpdlBvcyArIGRpdkhlaWdodCkge1xuICAgICAgICAgIGpRdWVyeShcImFbaHJlZj0nI1wiICsgdGhlSUQgKyBcIiddXCIpLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBqUXVlcnkoXCJhW2hyZWY9JyNcIiArIHRoZUlEICsgXCInXVwiKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKHdpbmRvd1BvcyArIHdpbmRvd0hlaWdodCA9PSBkb2NIZWlnaHQpIHtcbiAgICAgICAgaWYgKCFqUXVlcnkoJ25hdiBsaTpsYXN0LWNoaWxkIGEnKS5oYXNDbGFzcygnYWN0aXZlJykpIHtcbiAgICAgICAgICB2YXIgbmF2QWN0aXZlQ3VycmVudCA9IGpRdWVyeSgnLm5hdi1hY3RpdmUnKS5hdHRyKCdocmVmJyk7XG4gICAgICAgICAgalF1ZXJ5KFwiYVtocmVmPSdcIiArIG5hdkFjdGl2ZUN1cnJlbnQgKyBcIiddXCIpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICBqUXVlcnkoJ25hdiBsaTpsYXN0LWNoaWxkIGEnKS5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgfSwgeyBcIi4uL25vZGVfbW9kdWxlcy93YXlwb2ludHMvbGliL25vZnJhbWV3b3JrLndheXBvaW50c1wiOiAyIH1dLCAyOiBbZnVuY3Rpb24gKHJlcXVpcmUsIG1vZHVsZSwgZXhwb3J0cykge1xuICAgIC8qIVxuICAgIFdheXBvaW50cyAtIDQuMC4wXG4gICAgQ29weXJpZ2h0IMKpIDIwMTEtMjAxNSBDYWxlYiBUcm91Z2h0b25cbiAgICBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG4gICAgaHR0cHM6Ly9naXRodWIuY29tL2ltYWtld2VidGhpbmdzL3dheXBvaW50cy9ibG9nL21hc3Rlci9saWNlbnNlcy50eHRcbiAgICAqL1xuICAgIChmdW5jdGlvbiAoKSB7XG4gICAgICAndXNlIHN0cmljdCc7XG5cbiAgICAgIHZhciBrZXlDb3VudGVyID0gMDtcbiAgICAgIHZhciBhbGxXYXlwb2ludHMgPSB7fTtcblxuICAgICAgLyogaHR0cDovL2ltYWtld2VidGhpbmdzLmNvbS93YXlwb2ludHMvYXBpL3dheXBvaW50ICovXG4gICAgICBmdW5jdGlvbiBXYXlwb2ludChvcHRpb25zKSB7XG4gICAgICAgIGlmICghb3B0aW9ucykge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTm8gb3B0aW9ucyBwYXNzZWQgdG8gV2F5cG9pbnQgY29uc3RydWN0b3InKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIW9wdGlvbnMuZWxlbWVudCkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTm8gZWxlbWVudCBvcHRpb24gcGFzc2VkIHRvIFdheXBvaW50IGNvbnN0cnVjdG9yJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFvcHRpb25zLmhhbmRsZXIpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIGhhbmRsZXIgb3B0aW9uIHBhc3NlZCB0byBXYXlwb2ludCBjb25zdHJ1Y3RvcicpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5rZXkgPSAnd2F5cG9pbnQtJyArIGtleUNvdW50ZXI7XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IFdheXBvaW50LkFkYXB0ZXIuZXh0ZW5kKHt9LCBXYXlwb2ludC5kZWZhdWx0cywgb3B0aW9ucyk7XG4gICAgICAgIHRoaXMuZWxlbWVudCA9IHRoaXMub3B0aW9ucy5lbGVtZW50O1xuICAgICAgICB0aGlzLmFkYXB0ZXIgPSBuZXcgV2F5cG9pbnQuQWRhcHRlcih0aGlzLmVsZW1lbnQpO1xuICAgICAgICB0aGlzLmNhbGxiYWNrID0gb3B0aW9ucy5oYW5kbGVyO1xuICAgICAgICB0aGlzLmF4aXMgPSB0aGlzLm9wdGlvbnMuaG9yaXpvbnRhbCA/ICdob3Jpem9udGFsJyA6ICd2ZXJ0aWNhbCc7XG4gICAgICAgIHRoaXMuZW5hYmxlZCA9IHRoaXMub3B0aW9ucy5lbmFibGVkO1xuICAgICAgICB0aGlzLnRyaWdnZXJQb2ludCA9IG51bGw7XG4gICAgICAgIHRoaXMuZ3JvdXAgPSBXYXlwb2ludC5Hcm91cC5maW5kT3JDcmVhdGUoe1xuICAgICAgICAgIG5hbWU6IHRoaXMub3B0aW9ucy5ncm91cCxcbiAgICAgICAgICBheGlzOiB0aGlzLmF4aXNcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuY29udGV4dCA9IFdheXBvaW50LkNvbnRleHQuZmluZE9yQ3JlYXRlQnlFbGVtZW50KHRoaXMub3B0aW9ucy5jb250ZXh0KTtcblxuICAgICAgICBpZiAoV2F5cG9pbnQub2Zmc2V0QWxpYXNlc1t0aGlzLm9wdGlvbnMub2Zmc2V0XSkge1xuICAgICAgICAgIHRoaXMub3B0aW9ucy5vZmZzZXQgPSBXYXlwb2ludC5vZmZzZXRBbGlhc2VzW3RoaXMub3B0aW9ucy5vZmZzZXRdO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZ3JvdXAuYWRkKHRoaXMpO1xuICAgICAgICB0aGlzLmNvbnRleHQuYWRkKHRoaXMpO1xuICAgICAgICBhbGxXYXlwb2ludHNbdGhpcy5rZXldID0gdGhpcztcbiAgICAgICAga2V5Q291bnRlciArPSAxO1xuICAgICAgfVxuXG4gICAgICAvKiBQcml2YXRlICovXG4gICAgICBXYXlwb2ludC5wcm90b3R5cGUucXVldWVUcmlnZ2VyID0gZnVuY3Rpb24gKGRpcmVjdGlvbikge1xuICAgICAgICB0aGlzLmdyb3VwLnF1ZXVlVHJpZ2dlcih0aGlzLCBkaXJlY3Rpb24pO1xuICAgICAgfTtcblxuICAgICAgLyogUHJpdmF0ZSAqL1xuICAgICAgV2F5cG9pbnQucHJvdG90eXBlLnRyaWdnZXIgPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICBpZiAoIXRoaXMuZW5hYmxlZCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5jYWxsYmFjaykge1xuICAgICAgICAgIHRoaXMuY2FsbGJhY2suYXBwbHkodGhpcywgYXJncyk7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIC8qIFB1YmxpYyAqL1xuICAgICAgLyogaHR0cDovL2ltYWtld2VidGhpbmdzLmNvbS93YXlwb2ludHMvYXBpL2Rlc3Ryb3kgKi9cbiAgICAgIFdheXBvaW50LnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmNvbnRleHQucmVtb3ZlKHRoaXMpO1xuICAgICAgICB0aGlzLmdyb3VwLnJlbW92ZSh0aGlzKTtcbiAgICAgICAgZGVsZXRlIGFsbFdheXBvaW50c1t0aGlzLmtleV07XG4gICAgICB9O1xuXG4gICAgICAvKiBQdWJsaWMgKi9cbiAgICAgIC8qIGh0dHA6Ly9pbWFrZXdlYnRoaW5ncy5jb20vd2F5cG9pbnRzL2FwaS9kaXNhYmxlICovXG4gICAgICBXYXlwb2ludC5wcm90b3R5cGUuZGlzYWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5lbmFibGVkID0gZmFsc2U7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfTtcblxuICAgICAgLyogUHVibGljICovXG4gICAgICAvKiBodHRwOi8vaW1ha2V3ZWJ0aGluZ3MuY29tL3dheXBvaW50cy9hcGkvZW5hYmxlICovXG4gICAgICBXYXlwb2ludC5wcm90b3R5cGUuZW5hYmxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmNvbnRleHQucmVmcmVzaCgpO1xuICAgICAgICB0aGlzLmVuYWJsZWQgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH07XG5cbiAgICAgIC8qIFB1YmxpYyAqL1xuICAgICAgLyogaHR0cDovL2ltYWtld2VidGhpbmdzLmNvbS93YXlwb2ludHMvYXBpL25leHQgKi9cbiAgICAgIFdheXBvaW50LnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5ncm91cC5uZXh0KHRoaXMpO1xuICAgICAgfTtcblxuICAgICAgLyogUHVibGljICovXG4gICAgICAvKiBodHRwOi8vaW1ha2V3ZWJ0aGluZ3MuY29tL3dheXBvaW50cy9hcGkvcHJldmlvdXMgKi9cbiAgICAgIFdheXBvaW50LnByb3RvdHlwZS5wcmV2aW91cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ3JvdXAucHJldmlvdXModGhpcyk7XG4gICAgICB9O1xuXG4gICAgICAvKiBQcml2YXRlICovXG4gICAgICBXYXlwb2ludC5pbnZva2VBbGwgPSBmdW5jdGlvbiAobWV0aG9kKSB7XG4gICAgICAgIHZhciBhbGxXYXlwb2ludHNBcnJheSA9IFtdO1xuICAgICAgICBmb3IgKHZhciB3YXlwb2ludEtleSBpbiBhbGxXYXlwb2ludHMpIHtcbiAgICAgICAgICBhbGxXYXlwb2ludHNBcnJheS5wdXNoKGFsbFdheXBvaW50c1t3YXlwb2ludEtleV0pO1xuICAgICAgICB9XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBlbmQgPSBhbGxXYXlwb2ludHNBcnJheS5sZW5ndGg7IGkgPCBlbmQ7IGkrKykge1xuICAgICAgICAgIGFsbFdheXBvaW50c0FycmF5W2ldW21ldGhvZF0oKTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgLyogUHVibGljICovXG4gICAgICAvKiBodHRwOi8vaW1ha2V3ZWJ0aGluZ3MuY29tL3dheXBvaW50cy9hcGkvZGVzdHJveS1hbGwgKi9cbiAgICAgIFdheXBvaW50LmRlc3Ryb3lBbGwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIFdheXBvaW50Lmludm9rZUFsbCgnZGVzdHJveScpO1xuICAgICAgfTtcblxuICAgICAgLyogUHVibGljICovXG4gICAgICAvKiBodHRwOi8vaW1ha2V3ZWJ0aGluZ3MuY29tL3dheXBvaW50cy9hcGkvZGlzYWJsZS1hbGwgKi9cbiAgICAgIFdheXBvaW50LmRpc2FibGVBbGwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIFdheXBvaW50Lmludm9rZUFsbCgnZGlzYWJsZScpO1xuICAgICAgfTtcblxuICAgICAgLyogUHVibGljICovXG4gICAgICAvKiBodHRwOi8vaW1ha2V3ZWJ0aGluZ3MuY29tL3dheXBvaW50cy9hcGkvZW5hYmxlLWFsbCAqL1xuICAgICAgV2F5cG9pbnQuZW5hYmxlQWxsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBXYXlwb2ludC5pbnZva2VBbGwoJ2VuYWJsZScpO1xuICAgICAgfTtcblxuICAgICAgLyogUHVibGljICovXG4gICAgICAvKiBodHRwOi8vaW1ha2V3ZWJ0aGluZ3MuY29tL3dheXBvaW50cy9hcGkvcmVmcmVzaC1hbGwgKi9cbiAgICAgIFdheXBvaW50LnJlZnJlc2hBbGwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIFdheXBvaW50LkNvbnRleHQucmVmcmVzaEFsbCgpO1xuICAgICAgfTtcblxuICAgICAgLyogUHVibGljICovXG4gICAgICAvKiBodHRwOi8vaW1ha2V3ZWJ0aGluZ3MuY29tL3dheXBvaW50cy9hcGkvdmlld3BvcnQtaGVpZ2h0ICovXG4gICAgICBXYXlwb2ludC52aWV3cG9ydEhlaWdodCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHdpbmRvdy5pbm5lckhlaWdodCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0O1xuICAgICAgfTtcblxuICAgICAgLyogUHVibGljICovXG4gICAgICAvKiBodHRwOi8vaW1ha2V3ZWJ0aGluZ3MuY29tL3dheXBvaW50cy9hcGkvdmlld3BvcnQtd2lkdGggKi9cbiAgICAgIFdheXBvaW50LnZpZXdwb3J0V2lkdGggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGg7XG4gICAgICB9O1xuXG4gICAgICBXYXlwb2ludC5hZGFwdGVycyA9IFtdO1xuXG4gICAgICBXYXlwb2ludC5kZWZhdWx0cyA9IHtcbiAgICAgICAgY29udGV4dDogd2luZG93LFxuICAgICAgICBjb250aW51b3VzOiB0cnVlLFxuICAgICAgICBlbmFibGVkOiB0cnVlLFxuICAgICAgICBncm91cDogJ2RlZmF1bHQnLFxuICAgICAgICBob3Jpem9udGFsOiBmYWxzZSxcbiAgICAgICAgb2Zmc2V0OiAwXG4gICAgICB9O1xuXG4gICAgICBXYXlwb2ludC5vZmZzZXRBbGlhc2VzID0ge1xuICAgICAgICAnYm90dG9tLWluLXZpZXcnOiBmdW5jdGlvbiBib3R0b21JblZpZXcoKSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuY29udGV4dC5pbm5lckhlaWdodCgpIC0gdGhpcy5hZGFwdGVyLm91dGVySGVpZ2h0KCk7XG4gICAgICAgIH0sXG4gICAgICAgICdyaWdodC1pbi12aWV3JzogZnVuY3Rpb24gcmlnaHRJblZpZXcoKSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuY29udGV4dC5pbm5lcldpZHRoKCkgLSB0aGlzLmFkYXB0ZXIub3V0ZXJXaWR0aCgpO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICB3aW5kb3cuV2F5cG9pbnQgPSBXYXlwb2ludDtcbiAgICB9KSgpOyhmdW5jdGlvbiAoKSB7XG4gICAgICAndXNlIHN0cmljdCc7XG5cbiAgICAgIGZ1bmN0aW9uIHJlcXVlc3RBbmltYXRpb25GcmFtZVNoaW0oY2FsbGJhY2spIHtcbiAgICAgICAgd2luZG93LnNldFRpbWVvdXQoY2FsbGJhY2ssIDEwMDAgLyA2MCk7XG4gICAgICB9XG5cbiAgICAgIHZhciBrZXlDb3VudGVyID0gMDtcbiAgICAgIHZhciBjb250ZXh0cyA9IHt9O1xuICAgICAgdmFyIFdheXBvaW50ID0gd2luZG93LldheXBvaW50O1xuICAgICAgdmFyIG9sZFdpbmRvd0xvYWQgPSB3aW5kb3cub25sb2FkO1xuXG4gICAgICAvKiBodHRwOi8vaW1ha2V3ZWJ0aGluZ3MuY29tL3dheXBvaW50cy9hcGkvY29udGV4dCAqL1xuICAgICAgZnVuY3Rpb24gQ29udGV4dChlbGVtZW50KSB7XG4gICAgICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgICAgIHRoaXMuQWRhcHRlciA9IFdheXBvaW50LkFkYXB0ZXI7XG4gICAgICAgIHRoaXMuYWRhcHRlciA9IG5ldyB0aGlzLkFkYXB0ZXIoZWxlbWVudCk7XG4gICAgICAgIHRoaXMua2V5ID0gJ3dheXBvaW50LWNvbnRleHQtJyArIGtleUNvdW50ZXI7XG4gICAgICAgIHRoaXMuZGlkU2Nyb2xsID0gZmFsc2U7XG4gICAgICAgIHRoaXMuZGlkUmVzaXplID0gZmFsc2U7XG4gICAgICAgIHRoaXMub2xkU2Nyb2xsID0ge1xuICAgICAgICAgIHg6IHRoaXMuYWRhcHRlci5zY3JvbGxMZWZ0KCksXG4gICAgICAgICAgeTogdGhpcy5hZGFwdGVyLnNjcm9sbFRvcCgpXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMud2F5cG9pbnRzID0ge1xuICAgICAgICAgIHZlcnRpY2FsOiB7fSxcbiAgICAgICAgICBob3Jpem9udGFsOiB7fVxuICAgICAgICB9O1xuXG4gICAgICAgIGVsZW1lbnQud2F5cG9pbnRDb250ZXh0S2V5ID0gdGhpcy5rZXk7XG4gICAgICAgIGNvbnRleHRzW2VsZW1lbnQud2F5cG9pbnRDb250ZXh0S2V5XSA9IHRoaXM7XG4gICAgICAgIGtleUNvdW50ZXIgKz0gMTtcblxuICAgICAgICB0aGlzLmNyZWF0ZVRocm90dGxlZFNjcm9sbEhhbmRsZXIoKTtcbiAgICAgICAgdGhpcy5jcmVhdGVUaHJvdHRsZWRSZXNpemVIYW5kbGVyKCk7XG4gICAgICB9XG5cbiAgICAgIC8qIFByaXZhdGUgKi9cbiAgICAgIENvbnRleHQucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uICh3YXlwb2ludCkge1xuICAgICAgICB2YXIgYXhpcyA9IHdheXBvaW50Lm9wdGlvbnMuaG9yaXpvbnRhbCA/ICdob3Jpem9udGFsJyA6ICd2ZXJ0aWNhbCc7XG4gICAgICAgIHRoaXMud2F5cG9pbnRzW2F4aXNdW3dheXBvaW50LmtleV0gPSB3YXlwb2ludDtcbiAgICAgICAgdGhpcy5yZWZyZXNoKCk7XG4gICAgICB9O1xuXG4gICAgICAvKiBQcml2YXRlICovXG4gICAgICBDb250ZXh0LnByb3RvdHlwZS5jaGVja0VtcHR5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgaG9yaXpvbnRhbEVtcHR5ID0gdGhpcy5BZGFwdGVyLmlzRW1wdHlPYmplY3QodGhpcy53YXlwb2ludHMuaG9yaXpvbnRhbCk7XG4gICAgICAgIHZhciB2ZXJ0aWNhbEVtcHR5ID0gdGhpcy5BZGFwdGVyLmlzRW1wdHlPYmplY3QodGhpcy53YXlwb2ludHMudmVydGljYWwpO1xuICAgICAgICBpZiAoaG9yaXpvbnRhbEVtcHR5ICYmIHZlcnRpY2FsRW1wdHkpIHtcbiAgICAgICAgICB0aGlzLmFkYXB0ZXIub2ZmKCcud2F5cG9pbnRzJyk7XG4gICAgICAgICAgZGVsZXRlIGNvbnRleHRzW3RoaXMua2V5XTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgLyogUHJpdmF0ZSAqL1xuICAgICAgQ29udGV4dC5wcm90b3R5cGUuY3JlYXRlVGhyb3R0bGVkUmVzaXplSGFuZGxlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAgIGZ1bmN0aW9uIHJlc2l6ZUhhbmRsZXIoKSB7XG4gICAgICAgICAgc2VsZi5oYW5kbGVSZXNpemUoKTtcbiAgICAgICAgICBzZWxmLmRpZFJlc2l6ZSA9IGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5hZGFwdGVyLm9uKCdyZXNpemUud2F5cG9pbnRzJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGlmICghc2VsZi5kaWRSZXNpemUpIHtcbiAgICAgICAgICAgIHNlbGYuZGlkUmVzaXplID0gdHJ1ZTtcbiAgICAgICAgICAgIFdheXBvaW50LnJlcXVlc3RBbmltYXRpb25GcmFtZShyZXNpemVIYW5kbGVyKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfTtcblxuICAgICAgLyogUHJpdmF0ZSAqL1xuICAgICAgQ29udGV4dC5wcm90b3R5cGUuY3JlYXRlVGhyb3R0bGVkU2Nyb2xsSGFuZGxlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICBmdW5jdGlvbiBzY3JvbGxIYW5kbGVyKCkge1xuICAgICAgICAgIHNlbGYuaGFuZGxlU2Nyb2xsKCk7XG4gICAgICAgICAgc2VsZi5kaWRTY3JvbGwgPSBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuYWRhcHRlci5vbignc2Nyb2xsLndheXBvaW50cycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBpZiAoIXNlbGYuZGlkU2Nyb2xsIHx8IFdheXBvaW50LmlzVG91Y2gpIHtcbiAgICAgICAgICAgIHNlbGYuZGlkU2Nyb2xsID0gdHJ1ZTtcbiAgICAgICAgICAgIFdheXBvaW50LnJlcXVlc3RBbmltYXRpb25GcmFtZShzY3JvbGxIYW5kbGVyKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfTtcblxuICAgICAgLyogUHJpdmF0ZSAqL1xuICAgICAgQ29udGV4dC5wcm90b3R5cGUuaGFuZGxlUmVzaXplID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBXYXlwb2ludC5Db250ZXh0LnJlZnJlc2hBbGwoKTtcbiAgICAgIH07XG5cbiAgICAgIC8qIFByaXZhdGUgKi9cbiAgICAgIENvbnRleHQucHJvdG90eXBlLmhhbmRsZVNjcm9sbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHRyaWdnZXJlZEdyb3VwcyA9IHt9O1xuICAgICAgICB2YXIgYXhlcyA9IHtcbiAgICAgICAgICBob3Jpem9udGFsOiB7XG4gICAgICAgICAgICBuZXdTY3JvbGw6IHRoaXMuYWRhcHRlci5zY3JvbGxMZWZ0KCksXG4gICAgICAgICAgICBvbGRTY3JvbGw6IHRoaXMub2xkU2Nyb2xsLngsXG4gICAgICAgICAgICBmb3J3YXJkOiAncmlnaHQnLFxuICAgICAgICAgICAgYmFja3dhcmQ6ICdsZWZ0J1xuICAgICAgICAgIH0sXG4gICAgICAgICAgdmVydGljYWw6IHtcbiAgICAgICAgICAgIG5ld1Njcm9sbDogdGhpcy5hZGFwdGVyLnNjcm9sbFRvcCgpLFxuICAgICAgICAgICAgb2xkU2Nyb2xsOiB0aGlzLm9sZFNjcm9sbC55LFxuICAgICAgICAgICAgZm9yd2FyZDogJ2Rvd24nLFxuICAgICAgICAgICAgYmFja3dhcmQ6ICd1cCdcbiAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgZm9yICh2YXIgYXhpc0tleSBpbiBheGVzKSB7XG4gICAgICAgICAgdmFyIGF4aXMgPSBheGVzW2F4aXNLZXldO1xuICAgICAgICAgIHZhciBpc0ZvcndhcmQgPSBheGlzLm5ld1Njcm9sbCA+IGF4aXMub2xkU2Nyb2xsO1xuICAgICAgICAgIHZhciBkaXJlY3Rpb24gPSBpc0ZvcndhcmQgPyBheGlzLmZvcndhcmQgOiBheGlzLmJhY2t3YXJkO1xuXG4gICAgICAgICAgZm9yICh2YXIgd2F5cG9pbnRLZXkgaW4gdGhpcy53YXlwb2ludHNbYXhpc0tleV0pIHtcbiAgICAgICAgICAgIHZhciB3YXlwb2ludCA9IHRoaXMud2F5cG9pbnRzW2F4aXNLZXldW3dheXBvaW50S2V5XTtcbiAgICAgICAgICAgIHZhciB3YXNCZWZvcmVUcmlnZ2VyUG9pbnQgPSBheGlzLm9sZFNjcm9sbCA8IHdheXBvaW50LnRyaWdnZXJQb2ludDtcbiAgICAgICAgICAgIHZhciBub3dBZnRlclRyaWdnZXJQb2ludCA9IGF4aXMubmV3U2Nyb2xsID49IHdheXBvaW50LnRyaWdnZXJQb2ludDtcbiAgICAgICAgICAgIHZhciBjcm9zc2VkRm9yd2FyZCA9IHdhc0JlZm9yZVRyaWdnZXJQb2ludCAmJiBub3dBZnRlclRyaWdnZXJQb2ludDtcbiAgICAgICAgICAgIHZhciBjcm9zc2VkQmFja3dhcmQgPSAhd2FzQmVmb3JlVHJpZ2dlclBvaW50ICYmICFub3dBZnRlclRyaWdnZXJQb2ludDtcbiAgICAgICAgICAgIGlmIChjcm9zc2VkRm9yd2FyZCB8fCBjcm9zc2VkQmFja3dhcmQpIHtcbiAgICAgICAgICAgICAgd2F5cG9pbnQucXVldWVUcmlnZ2VyKGRpcmVjdGlvbik7XG4gICAgICAgICAgICAgIHRyaWdnZXJlZEdyb3Vwc1t3YXlwb2ludC5ncm91cC5pZF0gPSB3YXlwb2ludC5ncm91cDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKHZhciBncm91cEtleSBpbiB0cmlnZ2VyZWRHcm91cHMpIHtcbiAgICAgICAgICB0cmlnZ2VyZWRHcm91cHNbZ3JvdXBLZXldLmZsdXNoVHJpZ2dlcnMoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMub2xkU2Nyb2xsID0ge1xuICAgICAgICAgIHg6IGF4ZXMuaG9yaXpvbnRhbC5uZXdTY3JvbGwsXG4gICAgICAgICAgeTogYXhlcy52ZXJ0aWNhbC5uZXdTY3JvbGxcbiAgICAgICAgfTtcbiAgICAgIH07XG5cbiAgICAgIC8qIFByaXZhdGUgKi9cbiAgICAgIENvbnRleHQucHJvdG90eXBlLmlubmVySGVpZ2h0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAvKmVzbGludC1kaXNhYmxlIGVxZXFlcSAqL1xuICAgICAgICBpZiAodGhpcy5lbGVtZW50ID09IHRoaXMuZWxlbWVudC53aW5kb3cpIHtcbiAgICAgICAgICByZXR1cm4gV2F5cG9pbnQudmlld3BvcnRIZWlnaHQoKTtcbiAgICAgICAgfVxuICAgICAgICAvKmVzbGludC1lbmFibGUgZXFlcWVxICovXG4gICAgICAgIHJldHVybiB0aGlzLmFkYXB0ZXIuaW5uZXJIZWlnaHQoKTtcbiAgICAgIH07XG5cbiAgICAgIC8qIFByaXZhdGUgKi9cbiAgICAgIENvbnRleHQucHJvdG90eXBlLnJlbW92ZSA9IGZ1bmN0aW9uICh3YXlwb2ludCkge1xuICAgICAgICBkZWxldGUgdGhpcy53YXlwb2ludHNbd2F5cG9pbnQuYXhpc11bd2F5cG9pbnQua2V5XTtcbiAgICAgICAgdGhpcy5jaGVja0VtcHR5KCk7XG4gICAgICB9O1xuXG4gICAgICAvKiBQcml2YXRlICovXG4gICAgICBDb250ZXh0LnByb3RvdHlwZS5pbm5lcldpZHRoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAvKmVzbGludC1kaXNhYmxlIGVxZXFlcSAqL1xuICAgICAgICBpZiAodGhpcy5lbGVtZW50ID09IHRoaXMuZWxlbWVudC53aW5kb3cpIHtcbiAgICAgICAgICByZXR1cm4gV2F5cG9pbnQudmlld3BvcnRXaWR0aCgpO1xuICAgICAgICB9XG4gICAgICAgIC8qZXNsaW50LWVuYWJsZSBlcWVxZXEgKi9cbiAgICAgICAgcmV0dXJuIHRoaXMuYWRhcHRlci5pbm5lcldpZHRoKCk7XG4gICAgICB9O1xuXG4gICAgICAvKiBQdWJsaWMgKi9cbiAgICAgIC8qIGh0dHA6Ly9pbWFrZXdlYnRoaW5ncy5jb20vd2F5cG9pbnRzL2FwaS9jb250ZXh0LWRlc3Ryb3kgKi9cbiAgICAgIENvbnRleHQucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBhbGxXYXlwb2ludHMgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgYXhpcyBpbiB0aGlzLndheXBvaW50cykge1xuICAgICAgICAgIGZvciAodmFyIHdheXBvaW50S2V5IGluIHRoaXMud2F5cG9pbnRzW2F4aXNdKSB7XG4gICAgICAgICAgICBhbGxXYXlwb2ludHMucHVzaCh0aGlzLndheXBvaW50c1theGlzXVt3YXlwb2ludEtleV0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmb3IgKHZhciBpID0gMCwgZW5kID0gYWxsV2F5cG9pbnRzLmxlbmd0aDsgaSA8IGVuZDsgaSsrKSB7XG4gICAgICAgICAgYWxsV2F5cG9pbnRzW2ldLmRlc3Ryb3koKTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgLyogUHVibGljICovXG4gICAgICAvKiBodHRwOi8vaW1ha2V3ZWJ0aGluZ3MuY29tL3dheXBvaW50cy9hcGkvY29udGV4dC1yZWZyZXNoICovXG4gICAgICBDb250ZXh0LnByb3RvdHlwZS5yZWZyZXNoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAvKmVzbGludC1kaXNhYmxlIGVxZXFlcSAqL1xuICAgICAgICB2YXIgaXNXaW5kb3cgPSB0aGlzLmVsZW1lbnQgPT0gdGhpcy5lbGVtZW50LndpbmRvdztcbiAgICAgICAgLyplc2xpbnQtZW5hYmxlIGVxZXFlcSAqL1xuICAgICAgICB2YXIgY29udGV4dE9mZnNldCA9IGlzV2luZG93ID8gdW5kZWZpbmVkIDogdGhpcy5hZGFwdGVyLm9mZnNldCgpO1xuICAgICAgICB2YXIgdHJpZ2dlcmVkR3JvdXBzID0ge307XG4gICAgICAgIHZhciBheGVzO1xuXG4gICAgICAgIHRoaXMuaGFuZGxlU2Nyb2xsKCk7XG4gICAgICAgIGF4ZXMgPSB7XG4gICAgICAgICAgaG9yaXpvbnRhbDoge1xuICAgICAgICAgICAgY29udGV4dE9mZnNldDogaXNXaW5kb3cgPyAwIDogY29udGV4dE9mZnNldC5sZWZ0LFxuICAgICAgICAgICAgY29udGV4dFNjcm9sbDogaXNXaW5kb3cgPyAwIDogdGhpcy5vbGRTY3JvbGwueCxcbiAgICAgICAgICAgIGNvbnRleHREaW1lbnNpb246IHRoaXMuaW5uZXJXaWR0aCgpLFxuICAgICAgICAgICAgb2xkU2Nyb2xsOiB0aGlzLm9sZFNjcm9sbC54LFxuICAgICAgICAgICAgZm9yd2FyZDogJ3JpZ2h0JyxcbiAgICAgICAgICAgIGJhY2t3YXJkOiAnbGVmdCcsXG4gICAgICAgICAgICBvZmZzZXRQcm9wOiAnbGVmdCdcbiAgICAgICAgICB9LFxuICAgICAgICAgIHZlcnRpY2FsOiB7XG4gICAgICAgICAgICBjb250ZXh0T2Zmc2V0OiBpc1dpbmRvdyA/IDAgOiBjb250ZXh0T2Zmc2V0LnRvcCxcbiAgICAgICAgICAgIGNvbnRleHRTY3JvbGw6IGlzV2luZG93ID8gMCA6IHRoaXMub2xkU2Nyb2xsLnksXG4gICAgICAgICAgICBjb250ZXh0RGltZW5zaW9uOiB0aGlzLmlubmVySGVpZ2h0KCksXG4gICAgICAgICAgICBvbGRTY3JvbGw6IHRoaXMub2xkU2Nyb2xsLnksXG4gICAgICAgICAgICBmb3J3YXJkOiAnZG93bicsXG4gICAgICAgICAgICBiYWNrd2FyZDogJ3VwJyxcbiAgICAgICAgICAgIG9mZnNldFByb3A6ICd0b3AnXG4gICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIGZvciAodmFyIGF4aXNLZXkgaW4gYXhlcykge1xuICAgICAgICAgIHZhciBheGlzID0gYXhlc1theGlzS2V5XTtcbiAgICAgICAgICBmb3IgKHZhciB3YXlwb2ludEtleSBpbiB0aGlzLndheXBvaW50c1theGlzS2V5XSkge1xuICAgICAgICAgICAgdmFyIHdheXBvaW50ID0gdGhpcy53YXlwb2ludHNbYXhpc0tleV1bd2F5cG9pbnRLZXldO1xuICAgICAgICAgICAgdmFyIGFkanVzdG1lbnQgPSB3YXlwb2ludC5vcHRpb25zLm9mZnNldDtcbiAgICAgICAgICAgIHZhciBvbGRUcmlnZ2VyUG9pbnQgPSB3YXlwb2ludC50cmlnZ2VyUG9pbnQ7XG4gICAgICAgICAgICB2YXIgZWxlbWVudE9mZnNldCA9IDA7XG4gICAgICAgICAgICB2YXIgZnJlc2hXYXlwb2ludCA9IG9sZFRyaWdnZXJQb2ludCA9PSBudWxsO1xuICAgICAgICAgICAgdmFyIGNvbnRleHRNb2RpZmllciwgd2FzQmVmb3JlU2Nyb2xsLCBub3dBZnRlclNjcm9sbDtcbiAgICAgICAgICAgIHZhciB0cmlnZ2VyZWRCYWNrd2FyZCwgdHJpZ2dlcmVkRm9yd2FyZDtcblxuICAgICAgICAgICAgaWYgKHdheXBvaW50LmVsZW1lbnQgIT09IHdheXBvaW50LmVsZW1lbnQud2luZG93KSB7XG4gICAgICAgICAgICAgIGVsZW1lbnRPZmZzZXQgPSB3YXlwb2ludC5hZGFwdGVyLm9mZnNldCgpW2F4aXMub2Zmc2V0UHJvcF07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh0eXBlb2YgYWRqdXN0bWVudCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICBhZGp1c3RtZW50ID0gYWRqdXN0bWVudC5hcHBseSh3YXlwb2ludCk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBhZGp1c3RtZW50ID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICBhZGp1c3RtZW50ID0gcGFyc2VGbG9hdChhZGp1c3RtZW50KTtcbiAgICAgICAgICAgICAgaWYgKHdheXBvaW50Lm9wdGlvbnMub2Zmc2V0LmluZGV4T2YoJyUnKSA+IC0xKSB7XG4gICAgICAgICAgICAgICAgYWRqdXN0bWVudCA9IE1hdGguY2VpbChheGlzLmNvbnRleHREaW1lbnNpb24gKiBhZGp1c3RtZW50IC8gMTAwKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb250ZXh0TW9kaWZpZXIgPSBheGlzLmNvbnRleHRTY3JvbGwgLSBheGlzLmNvbnRleHRPZmZzZXQ7XG4gICAgICAgICAgICB3YXlwb2ludC50cmlnZ2VyUG9pbnQgPSBlbGVtZW50T2Zmc2V0ICsgY29udGV4dE1vZGlmaWVyIC0gYWRqdXN0bWVudDtcbiAgICAgICAgICAgIHdhc0JlZm9yZVNjcm9sbCA9IG9sZFRyaWdnZXJQb2ludCA8IGF4aXMub2xkU2Nyb2xsO1xuICAgICAgICAgICAgbm93QWZ0ZXJTY3JvbGwgPSB3YXlwb2ludC50cmlnZ2VyUG9pbnQgPj0gYXhpcy5vbGRTY3JvbGw7XG4gICAgICAgICAgICB0cmlnZ2VyZWRCYWNrd2FyZCA9IHdhc0JlZm9yZVNjcm9sbCAmJiBub3dBZnRlclNjcm9sbDtcbiAgICAgICAgICAgIHRyaWdnZXJlZEZvcndhcmQgPSAhd2FzQmVmb3JlU2Nyb2xsICYmICFub3dBZnRlclNjcm9sbDtcblxuICAgICAgICAgICAgaWYgKCFmcmVzaFdheXBvaW50ICYmIHRyaWdnZXJlZEJhY2t3YXJkKSB7XG4gICAgICAgICAgICAgIHdheXBvaW50LnF1ZXVlVHJpZ2dlcihheGlzLmJhY2t3YXJkKTtcbiAgICAgICAgICAgICAgdHJpZ2dlcmVkR3JvdXBzW3dheXBvaW50Lmdyb3VwLmlkXSA9IHdheXBvaW50Lmdyb3VwO1xuICAgICAgICAgICAgfSBlbHNlIGlmICghZnJlc2hXYXlwb2ludCAmJiB0cmlnZ2VyZWRGb3J3YXJkKSB7XG4gICAgICAgICAgICAgIHdheXBvaW50LnF1ZXVlVHJpZ2dlcihheGlzLmZvcndhcmQpO1xuICAgICAgICAgICAgICB0cmlnZ2VyZWRHcm91cHNbd2F5cG9pbnQuZ3JvdXAuaWRdID0gd2F5cG9pbnQuZ3JvdXA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGZyZXNoV2F5cG9pbnQgJiYgYXhpcy5vbGRTY3JvbGwgPj0gd2F5cG9pbnQudHJpZ2dlclBvaW50KSB7XG4gICAgICAgICAgICAgIHdheXBvaW50LnF1ZXVlVHJpZ2dlcihheGlzLmZvcndhcmQpO1xuICAgICAgICAgICAgICB0cmlnZ2VyZWRHcm91cHNbd2F5cG9pbnQuZ3JvdXAuaWRdID0gd2F5cG9pbnQuZ3JvdXA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgV2F5cG9pbnQucmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBmb3IgKHZhciBncm91cEtleSBpbiB0cmlnZ2VyZWRHcm91cHMpIHtcbiAgICAgICAgICAgIHRyaWdnZXJlZEdyb3Vwc1tncm91cEtleV0uZmx1c2hUcmlnZ2VycygpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9O1xuXG4gICAgICAvKiBQcml2YXRlICovXG4gICAgICBDb250ZXh0LmZpbmRPckNyZWF0ZUJ5RWxlbWVudCA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgIHJldHVybiBDb250ZXh0LmZpbmRCeUVsZW1lbnQoZWxlbWVudCkgfHwgbmV3IENvbnRleHQoZWxlbWVudCk7XG4gICAgICB9O1xuXG4gICAgICAvKiBQcml2YXRlICovXG4gICAgICBDb250ZXh0LnJlZnJlc2hBbGwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZvciAodmFyIGNvbnRleHRJZCBpbiBjb250ZXh0cykge1xuICAgICAgICAgIGNvbnRleHRzW2NvbnRleHRJZF0ucmVmcmVzaCgpO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICAvKiBQdWJsaWMgKi9cbiAgICAgIC8qIGh0dHA6Ly9pbWFrZXdlYnRoaW5ncy5jb20vd2F5cG9pbnRzL2FwaS9jb250ZXh0LWZpbmQtYnktZWxlbWVudCAqL1xuICAgICAgQ29udGV4dC5maW5kQnlFbGVtZW50ID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgcmV0dXJuIGNvbnRleHRzW2VsZW1lbnQud2F5cG9pbnRDb250ZXh0S2V5XTtcbiAgICAgIH07XG5cbiAgICAgIHdpbmRvdy5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChvbGRXaW5kb3dMb2FkKSB7XG4gICAgICAgICAgb2xkV2luZG93TG9hZCgpO1xuICAgICAgICB9XG4gICAgICAgIENvbnRleHQucmVmcmVzaEFsbCgpO1xuICAgICAgfTtcblxuICAgICAgV2F5cG9pbnQucmVxdWVzdEFuaW1hdGlvbkZyYW1lID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgICAgIHZhciByZXF1ZXN0Rm4gPSB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8IHdpbmRvdy5tb3pSZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHwgd2luZG93LndlYmtpdFJlcXVlc3RBbmltYXRpb25GcmFtZSB8fCByZXF1ZXN0QW5pbWF0aW9uRnJhbWVTaGltO1xuICAgICAgICByZXF1ZXN0Rm4uY2FsbCh3aW5kb3csIGNhbGxiYWNrKTtcbiAgICAgIH07XG4gICAgICBXYXlwb2ludC5Db250ZXh0ID0gQ29udGV4dDtcbiAgICB9KSgpOyhmdW5jdGlvbiAoKSB7XG4gICAgICAndXNlIHN0cmljdCc7XG5cbiAgICAgIGZ1bmN0aW9uIGJ5VHJpZ2dlclBvaW50KGEsIGIpIHtcbiAgICAgICAgcmV0dXJuIGEudHJpZ2dlclBvaW50IC0gYi50cmlnZ2VyUG9pbnQ7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGJ5UmV2ZXJzZVRyaWdnZXJQb2ludChhLCBiKSB7XG4gICAgICAgIHJldHVybiBiLnRyaWdnZXJQb2ludCAtIGEudHJpZ2dlclBvaW50O1xuICAgICAgfVxuXG4gICAgICB2YXIgZ3JvdXBzID0ge1xuICAgICAgICB2ZXJ0aWNhbDoge30sXG4gICAgICAgIGhvcml6b250YWw6IHt9XG4gICAgICB9O1xuICAgICAgdmFyIFdheXBvaW50ID0gd2luZG93LldheXBvaW50O1xuXG4gICAgICAvKiBodHRwOi8vaW1ha2V3ZWJ0aGluZ3MuY29tL3dheXBvaW50cy9hcGkvZ3JvdXAgKi9cbiAgICAgIGZ1bmN0aW9uIEdyb3VwKG9wdGlvbnMpIHtcbiAgICAgICAgdGhpcy5uYW1lID0gb3B0aW9ucy5uYW1lO1xuICAgICAgICB0aGlzLmF4aXMgPSBvcHRpb25zLmF4aXM7XG4gICAgICAgIHRoaXMuaWQgPSB0aGlzLm5hbWUgKyAnLScgKyB0aGlzLmF4aXM7XG4gICAgICAgIHRoaXMud2F5cG9pbnRzID0gW107XG4gICAgICAgIHRoaXMuY2xlYXJUcmlnZ2VyUXVldWVzKCk7XG4gICAgICAgIGdyb3Vwc1t0aGlzLmF4aXNdW3RoaXMubmFtZV0gPSB0aGlzO1xuICAgICAgfVxuXG4gICAgICAvKiBQcml2YXRlICovXG4gICAgICBHcm91cC5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24gKHdheXBvaW50KSB7XG4gICAgICAgIHRoaXMud2F5cG9pbnRzLnB1c2god2F5cG9pbnQpO1xuICAgICAgfTtcblxuICAgICAgLyogUHJpdmF0ZSAqL1xuICAgICAgR3JvdXAucHJvdG90eXBlLmNsZWFyVHJpZ2dlclF1ZXVlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy50cmlnZ2VyUXVldWVzID0ge1xuICAgICAgICAgIHVwOiBbXSxcbiAgICAgICAgICBkb3duOiBbXSxcbiAgICAgICAgICBsZWZ0OiBbXSxcbiAgICAgICAgICByaWdodDogW11cbiAgICAgICAgfTtcbiAgICAgIH07XG5cbiAgICAgIC8qIFByaXZhdGUgKi9cbiAgICAgIEdyb3VwLnByb3RvdHlwZS5mbHVzaFRyaWdnZXJzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBmb3IgKHZhciBkaXJlY3Rpb24gaW4gdGhpcy50cmlnZ2VyUXVldWVzKSB7XG4gICAgICAgICAgdmFyIHdheXBvaW50cyA9IHRoaXMudHJpZ2dlclF1ZXVlc1tkaXJlY3Rpb25dO1xuICAgICAgICAgIHZhciByZXZlcnNlID0gZGlyZWN0aW9uID09PSAndXAnIHx8IGRpcmVjdGlvbiA9PT0gJ2xlZnQnO1xuICAgICAgICAgIHdheXBvaW50cy5zb3J0KHJldmVyc2UgPyBieVJldmVyc2VUcmlnZ2VyUG9pbnQgOiBieVRyaWdnZXJQb2ludCk7XG4gICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGVuZCA9IHdheXBvaW50cy5sZW5ndGg7IGkgPCBlbmQ7IGkgKz0gMSkge1xuICAgICAgICAgICAgdmFyIHdheXBvaW50ID0gd2F5cG9pbnRzW2ldO1xuICAgICAgICAgICAgaWYgKHdheXBvaW50Lm9wdGlvbnMuY29udGludW91cyB8fCBpID09PSB3YXlwb2ludHMubGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgICB3YXlwb2ludC50cmlnZ2VyKFtkaXJlY3Rpb25dKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jbGVhclRyaWdnZXJRdWV1ZXMoKTtcbiAgICAgIH07XG5cbiAgICAgIC8qIFByaXZhdGUgKi9cbiAgICAgIEdyb3VwLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHdheXBvaW50KSB7XG4gICAgICAgIHRoaXMud2F5cG9pbnRzLnNvcnQoYnlUcmlnZ2VyUG9pbnQpO1xuICAgICAgICB2YXIgaW5kZXggPSBXYXlwb2ludC5BZGFwdGVyLmluQXJyYXkod2F5cG9pbnQsIHRoaXMud2F5cG9pbnRzKTtcbiAgICAgICAgdmFyIGlzTGFzdCA9IGluZGV4ID09PSB0aGlzLndheXBvaW50cy5sZW5ndGggLSAxO1xuICAgICAgICByZXR1cm4gaXNMYXN0ID8gbnVsbCA6IHRoaXMud2F5cG9pbnRzW2luZGV4ICsgMV07XG4gICAgICB9O1xuXG4gICAgICAvKiBQcml2YXRlICovXG4gICAgICBHcm91cC5wcm90b3R5cGUucHJldmlvdXMgPSBmdW5jdGlvbiAod2F5cG9pbnQpIHtcbiAgICAgICAgdGhpcy53YXlwb2ludHMuc29ydChieVRyaWdnZXJQb2ludCk7XG4gICAgICAgIHZhciBpbmRleCA9IFdheXBvaW50LkFkYXB0ZXIuaW5BcnJheSh3YXlwb2ludCwgdGhpcy53YXlwb2ludHMpO1xuICAgICAgICByZXR1cm4gaW5kZXggPyB0aGlzLndheXBvaW50c1tpbmRleCAtIDFdIDogbnVsbDtcbiAgICAgIH07XG5cbiAgICAgIC8qIFByaXZhdGUgKi9cbiAgICAgIEdyb3VwLnByb3RvdHlwZS5xdWV1ZVRyaWdnZXIgPSBmdW5jdGlvbiAod2F5cG9pbnQsIGRpcmVjdGlvbikge1xuICAgICAgICB0aGlzLnRyaWdnZXJRdWV1ZXNbZGlyZWN0aW9uXS5wdXNoKHdheXBvaW50KTtcbiAgICAgIH07XG5cbiAgICAgIC8qIFByaXZhdGUgKi9cbiAgICAgIEdyb3VwLnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbiAod2F5cG9pbnQpIHtcbiAgICAgICAgdmFyIGluZGV4ID0gV2F5cG9pbnQuQWRhcHRlci5pbkFycmF5KHdheXBvaW50LCB0aGlzLndheXBvaW50cyk7XG4gICAgICAgIGlmIChpbmRleCA+IC0xKSB7XG4gICAgICAgICAgdGhpcy53YXlwb2ludHMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgLyogUHVibGljICovXG4gICAgICAvKiBodHRwOi8vaW1ha2V3ZWJ0aGluZ3MuY29tL3dheXBvaW50cy9hcGkvZmlyc3QgKi9cbiAgICAgIEdyb3VwLnByb3RvdHlwZS5maXJzdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud2F5cG9pbnRzWzBdO1xuICAgICAgfTtcblxuICAgICAgLyogUHVibGljICovXG4gICAgICAvKiBodHRwOi8vaW1ha2V3ZWJ0aGluZ3MuY29tL3dheXBvaW50cy9hcGkvbGFzdCAqL1xuICAgICAgR3JvdXAucHJvdG90eXBlLmxhc3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLndheXBvaW50c1t0aGlzLndheXBvaW50cy5sZW5ndGggLSAxXTtcbiAgICAgIH07XG5cbiAgICAgIC8qIFByaXZhdGUgKi9cbiAgICAgIEdyb3VwLmZpbmRPckNyZWF0ZSA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBncm91cHNbb3B0aW9ucy5heGlzXVtvcHRpb25zLm5hbWVdIHx8IG5ldyBHcm91cChvcHRpb25zKTtcbiAgICAgIH07XG5cbiAgICAgIFdheXBvaW50Lkdyb3VwID0gR3JvdXA7XG4gICAgfSkoKTsoZnVuY3Rpb24gKCkge1xuICAgICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgICB2YXIgV2F5cG9pbnQgPSB3aW5kb3cuV2F5cG9pbnQ7XG5cbiAgICAgIGZ1bmN0aW9uIGlzV2luZG93KGVsZW1lbnQpIHtcbiAgICAgICAgcmV0dXJuIGVsZW1lbnQgPT09IGVsZW1lbnQud2luZG93O1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBnZXRXaW5kb3coZWxlbWVudCkge1xuICAgICAgICBpZiAoaXNXaW5kb3coZWxlbWVudCkpIHtcbiAgICAgICAgICByZXR1cm4gZWxlbWVudDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZWxlbWVudC5kZWZhdWx0VmlldztcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gTm9GcmFtZXdvcmtBZGFwdGVyKGVsZW1lbnQpIHtcbiAgICAgICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudDtcbiAgICAgICAgdGhpcy5oYW5kbGVycyA9IHt9O1xuICAgICAgfVxuXG4gICAgICBOb0ZyYW1ld29ya0FkYXB0ZXIucHJvdG90eXBlLmlubmVySGVpZ2h0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgaXNXaW4gPSBpc1dpbmRvdyh0aGlzLmVsZW1lbnQpO1xuICAgICAgICByZXR1cm4gaXNXaW4gPyB0aGlzLmVsZW1lbnQuaW5uZXJIZWlnaHQgOiB0aGlzLmVsZW1lbnQuY2xpZW50SGVpZ2h0O1xuICAgICAgfTtcblxuICAgICAgTm9GcmFtZXdvcmtBZGFwdGVyLnByb3RvdHlwZS5pbm5lcldpZHRoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgaXNXaW4gPSBpc1dpbmRvdyh0aGlzLmVsZW1lbnQpO1xuICAgICAgICByZXR1cm4gaXNXaW4gPyB0aGlzLmVsZW1lbnQuaW5uZXJXaWR0aCA6IHRoaXMuZWxlbWVudC5jbGllbnRXaWR0aDtcbiAgICAgIH07XG5cbiAgICAgIE5vRnJhbWV3b3JrQWRhcHRlci5wcm90b3R5cGUub2ZmID0gZnVuY3Rpb24gKGV2ZW50LCBoYW5kbGVyKSB7XG4gICAgICAgIGZ1bmN0aW9uIHJlbW92ZUxpc3RlbmVycyhlbGVtZW50LCBsaXN0ZW5lcnMsIGhhbmRsZXIpIHtcbiAgICAgICAgICBmb3IgKHZhciBpID0gMCwgZW5kID0gbGlzdGVuZXJzLmxlbmd0aCAtIDE7IGkgPCBlbmQ7IGkrKykge1xuICAgICAgICAgICAgdmFyIGxpc3RlbmVyID0gbGlzdGVuZXJzW2ldO1xuICAgICAgICAgICAgaWYgKCFoYW5kbGVyIHx8IGhhbmRsZXIgPT09IGxpc3RlbmVyKSB7XG4gICAgICAgICAgICAgIGVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihsaXN0ZW5lcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGV2ZW50UGFydHMgPSBldmVudC5zcGxpdCgnLicpO1xuICAgICAgICB2YXIgZXZlbnRUeXBlID0gZXZlbnRQYXJ0c1swXTtcbiAgICAgICAgdmFyIG5hbWVzcGFjZSA9IGV2ZW50UGFydHNbMV07XG4gICAgICAgIHZhciBlbGVtZW50ID0gdGhpcy5lbGVtZW50O1xuXG4gICAgICAgIGlmIChuYW1lc3BhY2UgJiYgdGhpcy5oYW5kbGVyc1tuYW1lc3BhY2VdICYmIGV2ZW50VHlwZSkge1xuICAgICAgICAgIHJlbW92ZUxpc3RlbmVycyhlbGVtZW50LCB0aGlzLmhhbmRsZXJzW25hbWVzcGFjZV1bZXZlbnRUeXBlXSwgaGFuZGxlcik7XG4gICAgICAgICAgdGhpcy5oYW5kbGVyc1tuYW1lc3BhY2VdW2V2ZW50VHlwZV0gPSBbXTtcbiAgICAgICAgfSBlbHNlIGlmIChldmVudFR5cGUpIHtcbiAgICAgICAgICBmb3IgKHZhciBucyBpbiB0aGlzLmhhbmRsZXJzKSB7XG4gICAgICAgICAgICByZW1vdmVMaXN0ZW5lcnMoZWxlbWVudCwgdGhpcy5oYW5kbGVyc1tuc11bZXZlbnRUeXBlXSB8fCBbXSwgaGFuZGxlcik7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZXJzW25zXVtldmVudFR5cGVdID0gW107XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKG5hbWVzcGFjZSAmJiB0aGlzLmhhbmRsZXJzW25hbWVzcGFjZV0pIHtcbiAgICAgICAgICBmb3IgKHZhciB0eXBlIGluIHRoaXMuaGFuZGxlcnNbbmFtZXNwYWNlXSkge1xuICAgICAgICAgICAgcmVtb3ZlTGlzdGVuZXJzKGVsZW1lbnQsIHRoaXMuaGFuZGxlcnNbbmFtZXNwYWNlXVt0eXBlXSwgaGFuZGxlcik7XG4gICAgICAgICAgfVxuICAgICAgICAgIHRoaXMuaGFuZGxlcnNbbmFtZXNwYWNlXSA9IHt9O1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICAvKiBBZGFwdGVkIGZyb20galF1ZXJ5IDEueCBvZmZzZXQoKSAqL1xuICAgICAgTm9GcmFtZXdvcmtBZGFwdGVyLnByb3RvdHlwZS5vZmZzZXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghdGhpcy5lbGVtZW50Lm93bmVyRG9jdW1lbnQpIHtcbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBkb2N1bWVudEVsZW1lbnQgPSB0aGlzLmVsZW1lbnQub3duZXJEb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XG4gICAgICAgIHZhciB3aW4gPSBnZXRXaW5kb3codGhpcy5lbGVtZW50Lm93bmVyRG9jdW1lbnQpO1xuICAgICAgICB2YXIgcmVjdCA9IHtcbiAgICAgICAgICB0b3A6IDAsXG4gICAgICAgICAgbGVmdDogMFxuICAgICAgICB9O1xuXG4gICAgICAgIGlmICh0aGlzLmVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KSB7XG4gICAgICAgICAgcmVjdCA9IHRoaXMuZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgdG9wOiByZWN0LnRvcCArIHdpbi5wYWdlWU9mZnNldCAtIGRvY3VtZW50RWxlbWVudC5jbGllbnRUb3AsXG4gICAgICAgICAgbGVmdDogcmVjdC5sZWZ0ICsgd2luLnBhZ2VYT2Zmc2V0IC0gZG9jdW1lbnRFbGVtZW50LmNsaWVudExlZnRcbiAgICAgICAgfTtcbiAgICAgIH07XG5cbiAgICAgIE5vRnJhbWV3b3JrQWRhcHRlci5wcm90b3R5cGUub24gPSBmdW5jdGlvbiAoZXZlbnQsIGhhbmRsZXIpIHtcbiAgICAgICAgdmFyIGV2ZW50UGFydHMgPSBldmVudC5zcGxpdCgnLicpO1xuICAgICAgICB2YXIgZXZlbnRUeXBlID0gZXZlbnRQYXJ0c1swXTtcbiAgICAgICAgdmFyIG5hbWVzcGFjZSA9IGV2ZW50UGFydHNbMV0gfHwgJ19fZGVmYXVsdCc7XG4gICAgICAgIHZhciBuc0hhbmRsZXJzID0gdGhpcy5oYW5kbGVyc1tuYW1lc3BhY2VdID0gdGhpcy5oYW5kbGVyc1tuYW1lc3BhY2VdIHx8IHt9O1xuICAgICAgICB2YXIgbnNUeXBlTGlzdCA9IG5zSGFuZGxlcnNbZXZlbnRUeXBlXSA9IG5zSGFuZGxlcnNbZXZlbnRUeXBlXSB8fCBbXTtcblxuICAgICAgICBuc1R5cGVMaXN0LnB1c2goaGFuZGxlcik7XG4gICAgICAgIHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKGV2ZW50VHlwZSwgaGFuZGxlcik7XG4gICAgICB9O1xuXG4gICAgICBOb0ZyYW1ld29ya0FkYXB0ZXIucHJvdG90eXBlLm91dGVySGVpZ2h0ID0gZnVuY3Rpb24gKGluY2x1ZGVNYXJnaW4pIHtcbiAgICAgICAgdmFyIGhlaWdodCA9IHRoaXMuaW5uZXJIZWlnaHQoKTtcbiAgICAgICAgdmFyIGNvbXB1dGVkU3R5bGU7XG5cbiAgICAgICAgaWYgKGluY2x1ZGVNYXJnaW4gJiYgIWlzV2luZG93KHRoaXMuZWxlbWVudCkpIHtcbiAgICAgICAgICBjb21wdXRlZFN0eWxlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUodGhpcy5lbGVtZW50KTtcbiAgICAgICAgICBoZWlnaHQgKz0gcGFyc2VJbnQoY29tcHV0ZWRTdHlsZS5tYXJnaW5Ub3AsIDEwKTtcbiAgICAgICAgICBoZWlnaHQgKz0gcGFyc2VJbnQoY29tcHV0ZWRTdHlsZS5tYXJnaW5Cb3R0b20sIDEwKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBoZWlnaHQ7XG4gICAgICB9O1xuXG4gICAgICBOb0ZyYW1ld29ya0FkYXB0ZXIucHJvdG90eXBlLm91dGVyV2lkdGggPSBmdW5jdGlvbiAoaW5jbHVkZU1hcmdpbikge1xuICAgICAgICB2YXIgd2lkdGggPSB0aGlzLmlubmVyV2lkdGgoKTtcbiAgICAgICAgdmFyIGNvbXB1dGVkU3R5bGU7XG5cbiAgICAgICAgaWYgKGluY2x1ZGVNYXJnaW4gJiYgIWlzV2luZG93KHRoaXMuZWxlbWVudCkpIHtcbiAgICAgICAgICBjb21wdXRlZFN0eWxlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUodGhpcy5lbGVtZW50KTtcbiAgICAgICAgICB3aWR0aCArPSBwYXJzZUludChjb21wdXRlZFN0eWxlLm1hcmdpbkxlZnQsIDEwKTtcbiAgICAgICAgICB3aWR0aCArPSBwYXJzZUludChjb21wdXRlZFN0eWxlLm1hcmdpblJpZ2h0LCAxMCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gd2lkdGg7XG4gICAgICB9O1xuXG4gICAgICBOb0ZyYW1ld29ya0FkYXB0ZXIucHJvdG90eXBlLnNjcm9sbExlZnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB3aW4gPSBnZXRXaW5kb3codGhpcy5lbGVtZW50KTtcbiAgICAgICAgcmV0dXJuIHdpbiA/IHdpbi5wYWdlWE9mZnNldCA6IHRoaXMuZWxlbWVudC5zY3JvbGxMZWZ0O1xuICAgICAgfTtcblxuICAgICAgTm9GcmFtZXdvcmtBZGFwdGVyLnByb3RvdHlwZS5zY3JvbGxUb3AgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB3aW4gPSBnZXRXaW5kb3codGhpcy5lbGVtZW50KTtcbiAgICAgICAgcmV0dXJuIHdpbiA/IHdpbi5wYWdlWU9mZnNldCA6IHRoaXMuZWxlbWVudC5zY3JvbGxUb3A7XG4gICAgICB9O1xuXG4gICAgICBOb0ZyYW1ld29ya0FkYXB0ZXIuZXh0ZW5kID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7XG5cbiAgICAgICAgZnVuY3Rpb24gbWVyZ2UodGFyZ2V0LCBvYmopIHtcbiAgICAgICAgICBpZiAoKHR5cGVvZiB0YXJnZXQgPT09IFwidW5kZWZpbmVkXCIgPyBcInVuZGVmaW5lZFwiIDogX3R5cGVvZih0YXJnZXQpKSA9PT0gJ29iamVjdCcgJiYgKHR5cGVvZiBvYmogPT09IFwidW5kZWZpbmVkXCIgPyBcInVuZGVmaW5lZFwiIDogX3R5cGVvZihvYmopKSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiBvYmopIHtcbiAgICAgICAgICAgICAgaWYgKG9iai5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgICAgICAgICAgdGFyZ2V0W2tleV0gPSBvYmpba2V5XTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybiB0YXJnZXQ7XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKHZhciBpID0gMSwgZW5kID0gYXJncy5sZW5ndGg7IGkgPCBlbmQ7IGkrKykge1xuICAgICAgICAgIG1lcmdlKGFyZ3NbMF0sIGFyZ3NbaV0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhcmdzWzBdO1xuICAgICAgfTtcblxuICAgICAgTm9GcmFtZXdvcmtBZGFwdGVyLmluQXJyYXkgPSBmdW5jdGlvbiAoZWxlbWVudCwgYXJyYXksIGkpIHtcbiAgICAgICAgcmV0dXJuIGFycmF5ID09IG51bGwgPyAtMSA6IGFycmF5LmluZGV4T2YoZWxlbWVudCwgaSk7XG4gICAgICB9O1xuXG4gICAgICBOb0ZyYW1ld29ya0FkYXB0ZXIuaXNFbXB0eU9iamVjdCA9IGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgLyogZXNsaW50IG5vLXVudXNlZC12YXJzOiAwICovXG4gICAgICAgIGZvciAodmFyIG5hbWUgaW4gb2JqKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfTtcblxuICAgICAgV2F5cG9pbnQuYWRhcHRlcnMucHVzaCh7XG4gICAgICAgIG5hbWU6ICdub2ZyYW1ld29yaycsXG4gICAgICAgIEFkYXB0ZXI6IE5vRnJhbWV3b3JrQWRhcHRlclxuICAgICAgfSk7XG4gICAgICBXYXlwb2ludC5BZGFwdGVyID0gTm9GcmFtZXdvcmtBZGFwdGVyO1xuICAgIH0pKCk7XG4gIH0sIHt9XSB9LCB7fSwgWzFdKTsiLCIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3Rocm93IG5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIil9dmFyIGY9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGYuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sZixmLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSh7MTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4ndXNlIHN0cmljdCdcblxucmVxdWlyZSgnLi4vbm9kZV9tb2R1bGVzL3dheXBvaW50cy9saWIvbm9mcmFtZXdvcmsud2F5cG9pbnRzJyk7XG5cbmxldCBkb2NTdHlsZSA9IGRvY3VtZW50LmJvZHkuc3R5bGU7XG5sZXQgYmdQYXRoID0gZG9jdW1lbnQubG9jYXRpb24gKyAnaW1hZ2VzL2JnLyc7XG5sZXQgaW1nRXh0ID0gJy5wbmcnO1xubGV0IGJncyA9IFsnRmVhdGhlcl9UT05FJywgJ0R1Y2tQcmludHNfRmVhdGhlcl9UT05FJy8qLCAnV2FsbFBhcGVyMi41JywgJ1dhbGxQYXBlcjMnLCAnV2FsbFBhcGVyMy41JywgJ1dhbGxQYXBlcjQnLCAnV2FsbFBhcGVyNC41JywgJ1dhbGxQYXBlcjUuNScsICdXYWxsUGFwZXI1LjVfdG9uZScsJ1dhbGxQYXBlcjYnLCAnV2FsbFBhcGVyNi41JywgJ1dhbGxQYXBlcjcuNScsICdXYWxsUGFwZXI3LjVfdG9uZScqL107XG5sZXQgYmdJbWFnZXNMb2FkZWQgPSBmYWxzZTtcbmxldCBjYXRlZ29yeVNlY3Rpb25zID0gWydzbS1uZXctZW1wbG95ZWVzLWNvbnRhaW5lcicsICdzbS1jdXJyZW50LWVtcGxveWVlcy1jb250YWluZXInLCAnc20tZXhpdGluZy1lbXBsb3llZXMtY29udGFpbmVyJywgJ3NtLWNhZGlsbGFjLXRheC1jb250YWluZXInLCAnc20tcGVuYWx0aWVzLWNvbnRhaW5lcicsICdzbS1iZW5lZml0cy1yZXF1aXJlbWVudHMtY29udGFpbmVyJywgJ3NtLXZvbHVudGFyeS1pbnN1cmFuY2UtY29udGFpbmVyJywgJ3NtLWV4Y2hhbmdlcy1jb250YWluZXInLCAnc20td2hhdHMtbmV4dC1jb250YWluZXInLCAnbmV3LWVtcGxveWVlcy1jb250YWluZXInLCAnY3VycmVudC1lbXBsb3llZXMtY29udGFpbmVyJywgJ2V4aXRpbmctZW1wbG95ZWVzLWNvbnRhaW5lcicsICdjYWRpbGxhYy10YXgtY29udGFpbmVyJywgJ3BlbmFsdGllcy1jb250YWluZXInLCAnYmVuZWZpdHMtcmVxdWlyZW1lbnRzLWNvbnRhaW5lcicsICd2b2x1bnRhcnktaW5zdXJhbmNlLWNvbnRhaW5lcicsICdleGNoYW5nZXMtY29udGFpbmVyJywgJ3doYXRzLW5leHQtY29udGFpbmVyJ107XG5cbm5ldyBXYXlwb2ludCh7XG4gICAgZWxlbWVudDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3dheXBvaW50SGVhZGVyJyksXG4gICAgaGFuZGxlcjogZnVuY3Rpb24gKGRpcmVjdGlvbikge1xuICAgICAgICAvL2NvbnNvbGUubG9nKCdTY3JvbGxlZCB0byB3YXlwb2ludCAxJylcbiAgICB9XG59KTtcblxuLy8gVXRpbGl0eVxuLy8gc2V0dXAgd2F5cG9pbnRzXG53aW5kb3cud2F5cG9pbnRzID0gW107XG5jYXRlZ29yeVNlY3Rpb25zLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQsIGluZGV4KSB7XG4gICAgY29uc29sZS5sb2coYC4ke2VsZW1lbnR9YCk7XG4gICAgd2luZG93LndheXBvaW50c1tpbmRleF0gPSBuZXcgV2F5cG9pbnQoe1xuICAgICAgICBlbGVtZW50OiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuJHtlbGVtZW50fWApLFxuICAgICAgICBoYW5kbGVyOiBmdW5jdGlvbiAoZGlyZWN0aW9uKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnbG9hZGluZy4uLicpXG4gICAgICAgICAgICBsb2FkQmcoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMikpO1xuICAgICAgICAgICAgLy9kaXJlY3Rpb24gPT09ICdkb3duJyA/IGxvYWRCZyhpbmRleCArIDEpIDogbG9hZEJnKGluZGV4KTtcbiAgICAgICAgfSxcbiAgICB9KVxufSk7XG5cbi8vIHByZWxvYWQgaW1hZ2VzXG5pZiAoYmdJbWFnZXNMb2FkZWQgIT09IHRydWUpIHtcbiAgICBiZ3MuZm9yRWFjaChmdW5jdGlvbiAoYmcpIHtcbiAgICAgICAgbmV3IEltYWdlKCkuc3JjID0gYmdQYXRoICsgYmcgKyBpbWdFeHQ7XG4gICAgICAgIC8vIGNhY2hlcyBpbWFnZXMsIGF2b2lkaW5nIHdoaXRlIGZsYXNoIGJldHdlZW4gYmFja2dyb3VuZCByZXBsYWNlbWVudHNcbiAgICB9KTtcbiAgICBiZ0ltYWdlc0xvYWRlZCA9IHRydWU7XG59XG4vLyBsb2FkIGJnIGltYWdlXG5jb25zdCBsb2FkQmcgPSBmdW5jdGlvbiAoYmcpIHtcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICAgIGRvY1N0eWxlLmJhY2tncm91bmRJbWFnZSA9IGB1cmwoJHtiZ1BhdGh9JHtiZ3NbYmddfSR7aW1nRXh0fSlgO1xuICAgICAgICBjb25zb2xlLmxvZyhgbG9hZGluZyAke2JnUGF0aH0ke2Jnc1tiZ119JHtpbWdFeHR9YClcbiAgICB9LCAxMDApXG59XG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gYnVzaW5lc3Mgc2VsZWN0IGJ1dHRvbnNcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG52YXIgYnVzaW5lc3NTZWxlY3QgPSBqUXVlcnkoJy5idXNpbmVzcy10eXBlLXNlbGVjdCcpO1xuYnVzaW5lc3NTZWxlY3QuZWFjaChmdW5jdGlvbihpLCBlbCl7XG4gICAgY29uc29sZS5sb2coZWwpO1xuICAgICQoZWwpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAgICAgICBjb25zb2xlLmxvZyhlbCk7XG4gICAgICAgIGpRdWVyeSgnLmhjci1tZW51LWl0ZW0nKS5oaWRlKCk7XG4gICAgICAgIGlmKGVsLmRhdGFzZXQuYnVzaW5lc3MgPT09ICdidXNpbmVzcy01MCcpe1xuICAgICAgICAgICAgJCgnYS5zbScpLnBhcmVudCgpLnNob3coKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICQoJ2EubGcnKS5wYXJlbnQoKS5zaG93KCk7XG4gICAgICAgIH1cbiAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QgPSAnJztcbiAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKGAke2VsLmRhdGFzZXQuYnVzaW5lc3N9LWFjdGl2ZWApXG4gICAgICAgIC8vIGdldCB0aGUgYWN0aXZlIG1lbnUgaXRlbSBhbmQgdHVybiBpdCBvZmZcbiAgICAgICAgbGV0IGN1cnJlbnRBY3RpdmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnVzaW5lc3MtdHlwZS1zZWxlY3QuYWN0aXZlJyk7XG4gICAgICAgIGlmIChjdXJyZW50QWN0aXZlKSB7XG4gICAgICAgICAgICBjdXJyZW50QWN0aXZlLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuICAgICAgICB9XG4gICAgICAgIC8vIHR1cm4gb24gdGhlIG5ldyBtZW51IGl0ZW1cbiAgICAgICAgZWwuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJylcbiAgICAgICAgLy8gc2hvdyB0aGUgbmF2XG4gICAgICAgIGxldCBtZW51cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5oY3ItbWVudScpO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1lbnVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBtZW51c1tpXS5zdHlsZS52aXNpYmlsaXR5ID0gJ3Zpc2libGUnO1xuICAgICAgICB9XG4gICAgICAgIGZvbGRNZW51LmFjY29yZGlvbigwLCAndG9wJywgZnVuY3Rpb24oZXYsIG9yaSkge1xuICAgICAgICAgICAgb3JpLmVsLmNsYXNzTGlzdC5hZGQoJ29wZW4nKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGV2LCBvcmkpO1xuICAgICAgICB9KTtcbiAgICAgICAgbGV0IGN1cnJlbnRWaXNpYmxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJ1c2luZXNzLWNvbnRhaW5lci52aXNpYmxlJyk7XG4gICAgICAgIGlmKGN1cnJlbnRWaXNpYmxlKSB7XG4gICAgICAgICAgICBjdXJyZW50VmlzaWJsZS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgY3VycmVudFZpc2libGUuY2xhc3NMaXN0LnJlbW92ZSgndmlzaWJsZScpO1xuICAgICAgICB9XG4gICAgICAgIGxldCBzZWN0aW9uVG9TaG93ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLiR7ZWwuZGF0YXNldC5idXNpbmVzc30tY29udGFpbmVyYCk7XG4gICAgICAgIGNvbnNvbGUubG9nKHNlY3Rpb25Ub1Nob3cpO1xuICAgICAgICAkKHNlY3Rpb25Ub1Nob3cpLmZhZGVJbigpO1xuICAgICAgICBzZWN0aW9uVG9TaG93LmNsYXNzTGlzdC5hZGQoJ3Zpc2libGUnKTtcbiAgICAgICAgalF1ZXJ5KCdodG1sLCBib2R5JykuYW5pbWF0ZSh7XG4gICAgICAgICAgICBzY3JvbGxUb3A6IGpRdWVyeShzZWN0aW9uVG9TaG93KS5vZmZzZXQoKS50b3BcbiAgICAgICAgfSwgMTAwMCwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkKHNlY3Rpb25Ub1Nob3cpLmZpbmQoJ2gzJykuYWRkQ2xhc3MoJ2FuaW1hdGVkJykuYWRkQ2xhc3MoJ3B1bHNlJyk7XG4gICAgICAgIH0pO1xuICAgICAgICBsb2FkQmcoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMikgKyAwICk7XG5cbi8vIFV0aWxpdHlcbi8vIHNldHVwIHdheXBvaW50c1xuICAgICAgICB3aW5kb3cud2F5cG9pbnRzID0gW107XG4gICAgICAgIGNhdGVnb3J5U2VjdGlvbnMuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCwgaW5kZXgpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGAuJHtlbGVtZW50fWApO1xuICAgICAgICAgICAgd2luZG93LndheXBvaW50c1tpbmRleF0gPSBuZXcgV2F5cG9pbnQoe1xuICAgICAgICAgICAgICAgIGVsZW1lbnQ6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke2VsZW1lbnR9YCksXG4gICAgICAgICAgICAgICAgaGFuZGxlcjogZnVuY3Rpb24gKGRpcmVjdGlvbikge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnbG9hZGluZy4uLicpXG4gICAgICAgICAgICAgICAgICAgIGxvYWRCZyhNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAyKSk7XG4gICAgICAgICAgICAgICAgICAgIC8vZGlyZWN0aW9uID09PSAnZG93bicgPyBsb2FkQmcoaW5kZXggKyAxKSA6IGxvYWRCZyhpbmRleCk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pO1xuICAgIH0pO1xufSk7XG5cbi8vLy8vLy8vLy8vXG4vLyBoY3IgbWVudVxuLy8vLy8vLy8vLy9cbmxldCBmb2xkTWVudSA9IG5ldyBPcmlEb21pKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oY3ItbWVudScpLCB7XG4gICAgaFBhbmVsczogMyxcbiAgICByaXBwbGU6IDIsXG4gICAgc2hhZGluZzogJ2hhcmQnLFxuICAgIHRvdWNoRW5hYmxlZDogZmFsc2Vcbn0pO1xuLy8gbG9hZFxuZm9sZE1lbnUuZm9sZFVwKCd0b3AnKTtcblxuLy8gY2xpY2tcbmxldCBoY3JNZW51SXRlbUxpbmsgPSBqUXVlcnkoJy5oY3ItbWVudS1pdGVtIGEnKTtcbmhjck1lbnVJdGVtTGluay5vbignY2xpY2snLCBmdW5jdGlvbihlLCBlbCkge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBjb25zb2xlLmxvZyhgLiR7ZS50YXJnZXQuaHJlZi5zcGxpdCgnIycpWzFdfWApO1xuICAgIGpRdWVyeSgnaHRtbCwgYm9keScpLmFuaW1hdGUoe1xuICAgICAgICBzY3JvbGxUb3A6IGpRdWVyeShgLiR7ZS50YXJnZXQuaHJlZi5zcGxpdCgnIycpWzFdfS1jb250YWluZXJgKS5vZmZzZXQoKS50b3AgLSAxMDBcbiAgICB9LCAxMDAwLCBmdW5jdGlvbigpIHtcblxuICAgIH0pO1xufSlcblxuLy9zY3JvbGxcbmxldCBhQXJyYXkgPSBbXTsgLy8gY3JlYXRlIHRoZSBlbXB0eSBhQXJyYXlcbmZvciAobGV0IGk9MDsgaSA8IGhjck1lbnVJdGVtTGluay5sZW5ndGg7IGkrKykge1xuICAgIGxldCBhQ2hpbGQgPSBoY3JNZW51SXRlbUxpbmtbaV07XG4gICAgbGV0IGFocmVmID0galF1ZXJ5KGFDaGlsZCkuYXR0cignaHJlZicpO1xuICAgIGFBcnJheS5wdXNoKGFocmVmKTtcbn1cbmxldCBjdXJyZW50U2VjdGlvbiA9ICcnO1xualF1ZXJ5KHdpbmRvdykuc2Nyb2xsKGZ1bmN0aW9uKCl7XG4gICAgbGV0IHdpbmRvd1BvcyA9IGpRdWVyeSh3aW5kb3cpLnNjcm9sbFRvcCgpOyAvLyBnZXQgdGhlIG9mZnNldCBvZiB0aGUgd2luZG93IGZyb20gdGhlIHRvcCBvZiBwYWdlXG4gICAgbGV0IHdpbmRvd0hlaWdodCA9IGpRdWVyeSh3aW5kb3cpLmhlaWdodCgpOyAvLyBnZXQgdGhlIGhlaWdodCBvZiB0aGUgd2luZG93XG4gICAgbGV0IGRvY0hlaWdodCA9IGpRdWVyeShkb2N1bWVudCkuaGVpZ2h0KCk7XG5cbiAgICBmb3IgKGxldCBpPTA7IGkgPCBhQXJyYXkubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgbGV0IHRoZUlEID0gYUFycmF5W2ldLnJlcGxhY2UoJyMnLCAnJyk7XG4gICAgICAgIGxldCBkaXZQb3MgPSBqUXVlcnkoYC4ke3RoZUlEfS1jb250YWluZXJgKS5vZmZzZXQoKS50b3AtMjAwOyAvLyBnZXQgdGhlIG9mZnNldCBvZiB0aGUgZGl2IGZyb20gdGhlIHRvcCBvZiBwYWdlXG4gICAgICAgIGxldCBkaXZIZWlnaHQgPSBqUXVlcnkoYC4ke3RoZUlEfS1jb250YWluZXJgKS5oZWlnaHQoKTsgLy8gZ2V0IHRoZSBoZWlnaHQgb2YgdGhlIGRpdiBpbiBxdWVzdGlvblxuICAgICAgICBpZiAod2luZG93UG9zID49IGRpdlBvcyAmJiB3aW5kb3dQb3MgPCAoZGl2UG9zICsgZGl2SGVpZ2h0KSkge1xuICAgICAgICAgICAgalF1ZXJ5KGBhW2hyZWY9JyMke3RoZUlEfSddYCkuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgalF1ZXJ5KGBhW2hyZWY9JyMke3RoZUlEfSddYCkucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgaWYod2luZG93UG9zICsgd2luZG93SGVpZ2h0ID09IGRvY0hlaWdodCkge1xuICAgICAgICBpZiAoIWpRdWVyeSgnbmF2IGxpOmxhc3QtY2hpbGQgYScpLmhhc0NsYXNzKCdhY3RpdmUnKSkge1xuICAgICAgICAgICAgbGV0IG5hdkFjdGl2ZUN1cnJlbnQgPSBqUXVlcnkoJy5uYXYtYWN0aXZlJykuYXR0cignaHJlZicpO1xuICAgICAgICAgICAgalF1ZXJ5KGBhW2hyZWY9JyR7bmF2QWN0aXZlQ3VycmVudH0nXWApLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgIGpRdWVyeSgnbmF2IGxpOmxhc3QtY2hpbGQgYScpLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgfVxuICAgIH1cblxufSk7XG59LHtcIi4uL25vZGVfbW9kdWxlcy93YXlwb2ludHMvbGliL25vZnJhbWV3b3JrLndheXBvaW50c1wiOjJ9XSwyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbi8qIVxuV2F5cG9pbnRzIC0gNC4wLjBcbkNvcHlyaWdodCDCqSAyMDExLTIwMTUgQ2FsZWIgVHJvdWdodG9uXG5MaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5odHRwczovL2dpdGh1Yi5jb20vaW1ha2V3ZWJ0aGluZ3Mvd2F5cG9pbnRzL2Jsb2cvbWFzdGVyL2xpY2Vuc2VzLnR4dFxuKi9cbihmdW5jdGlvbigpIHtcbiAgJ3VzZSBzdHJpY3QnXG5cbiAgdmFyIGtleUNvdW50ZXIgPSAwXG4gIHZhciBhbGxXYXlwb2ludHMgPSB7fVxuXG4gIC8qIGh0dHA6Ly9pbWFrZXdlYnRoaW5ncy5jb20vd2F5cG9pbnRzL2FwaS93YXlwb2ludCAqL1xuICBmdW5jdGlvbiBXYXlwb2ludChvcHRpb25zKSB7XG4gICAgaWYgKCFvcHRpb25zKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIG9wdGlvbnMgcGFzc2VkIHRvIFdheXBvaW50IGNvbnN0cnVjdG9yJylcbiAgICB9XG4gICAgaWYgKCFvcHRpb25zLmVsZW1lbnQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTm8gZWxlbWVudCBvcHRpb24gcGFzc2VkIHRvIFdheXBvaW50IGNvbnN0cnVjdG9yJylcbiAgICB9XG4gICAgaWYgKCFvcHRpb25zLmhhbmRsZXIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTm8gaGFuZGxlciBvcHRpb24gcGFzc2VkIHRvIFdheXBvaW50IGNvbnN0cnVjdG9yJylcbiAgICB9XG5cbiAgICB0aGlzLmtleSA9ICd3YXlwb2ludC0nICsga2V5Q291bnRlclxuICAgIHRoaXMub3B0aW9ucyA9IFdheXBvaW50LkFkYXB0ZXIuZXh0ZW5kKHt9LCBXYXlwb2ludC5kZWZhdWx0cywgb3B0aW9ucylcbiAgICB0aGlzLmVsZW1lbnQgPSB0aGlzLm9wdGlvbnMuZWxlbWVudFxuICAgIHRoaXMuYWRhcHRlciA9IG5ldyBXYXlwb2ludC5BZGFwdGVyKHRoaXMuZWxlbWVudClcbiAgICB0aGlzLmNhbGxiYWNrID0gb3B0aW9ucy5oYW5kbGVyXG4gICAgdGhpcy5heGlzID0gdGhpcy5vcHRpb25zLmhvcml6b250YWwgPyAnaG9yaXpvbnRhbCcgOiAndmVydGljYWwnXG4gICAgdGhpcy5lbmFibGVkID0gdGhpcy5vcHRpb25zLmVuYWJsZWRcbiAgICB0aGlzLnRyaWdnZXJQb2ludCA9IG51bGxcbiAgICB0aGlzLmdyb3VwID0gV2F5cG9pbnQuR3JvdXAuZmluZE9yQ3JlYXRlKHtcbiAgICAgIG5hbWU6IHRoaXMub3B0aW9ucy5ncm91cCxcbiAgICAgIGF4aXM6IHRoaXMuYXhpc1xuICAgIH0pXG4gICAgdGhpcy5jb250ZXh0ID0gV2F5cG9pbnQuQ29udGV4dC5maW5kT3JDcmVhdGVCeUVsZW1lbnQodGhpcy5vcHRpb25zLmNvbnRleHQpXG5cbiAgICBpZiAoV2F5cG9pbnQub2Zmc2V0QWxpYXNlc1t0aGlzLm9wdGlvbnMub2Zmc2V0XSkge1xuICAgICAgdGhpcy5vcHRpb25zLm9mZnNldCA9IFdheXBvaW50Lm9mZnNldEFsaWFzZXNbdGhpcy5vcHRpb25zLm9mZnNldF1cbiAgICB9XG4gICAgdGhpcy5ncm91cC5hZGQodGhpcylcbiAgICB0aGlzLmNvbnRleHQuYWRkKHRoaXMpXG4gICAgYWxsV2F5cG9pbnRzW3RoaXMua2V5XSA9IHRoaXNcbiAgICBrZXlDb3VudGVyICs9IDFcbiAgfVxuXG4gIC8qIFByaXZhdGUgKi9cbiAgV2F5cG9pbnQucHJvdG90eXBlLnF1ZXVlVHJpZ2dlciA9IGZ1bmN0aW9uKGRpcmVjdGlvbikge1xuICAgIHRoaXMuZ3JvdXAucXVldWVUcmlnZ2VyKHRoaXMsIGRpcmVjdGlvbilcbiAgfVxuXG4gIC8qIFByaXZhdGUgKi9cbiAgV2F5cG9pbnQucHJvdG90eXBlLnRyaWdnZXIgPSBmdW5jdGlvbihhcmdzKSB7XG4gICAgaWYgKCF0aGlzLmVuYWJsZWQpIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBpZiAodGhpcy5jYWxsYmFjaykge1xuICAgICAgdGhpcy5jYWxsYmFjay5hcHBseSh0aGlzLCBhcmdzKVxuICAgIH1cbiAgfVxuXG4gIC8qIFB1YmxpYyAqL1xuICAvKiBodHRwOi8vaW1ha2V3ZWJ0aGluZ3MuY29tL3dheXBvaW50cy9hcGkvZGVzdHJveSAqL1xuICBXYXlwb2ludC5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuY29udGV4dC5yZW1vdmUodGhpcylcbiAgICB0aGlzLmdyb3VwLnJlbW92ZSh0aGlzKVxuICAgIGRlbGV0ZSBhbGxXYXlwb2ludHNbdGhpcy5rZXldXG4gIH1cblxuICAvKiBQdWJsaWMgKi9cbiAgLyogaHR0cDovL2ltYWtld2VidGhpbmdzLmNvbS93YXlwb2ludHMvYXBpL2Rpc2FibGUgKi9cbiAgV2F5cG9pbnQucHJvdG90eXBlLmRpc2FibGUgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLmVuYWJsZWQgPSBmYWxzZVxuICAgIHJldHVybiB0aGlzXG4gIH1cblxuICAvKiBQdWJsaWMgKi9cbiAgLyogaHR0cDovL2ltYWtld2VidGhpbmdzLmNvbS93YXlwb2ludHMvYXBpL2VuYWJsZSAqL1xuICBXYXlwb2ludC5wcm90b3R5cGUuZW5hYmxlID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5jb250ZXh0LnJlZnJlc2goKVxuICAgIHRoaXMuZW5hYmxlZCA9IHRydWVcbiAgICByZXR1cm4gdGhpc1xuICB9XG5cbiAgLyogUHVibGljICovXG4gIC8qIGh0dHA6Ly9pbWFrZXdlYnRoaW5ncy5jb20vd2F5cG9pbnRzL2FwaS9uZXh0ICovXG4gIFdheXBvaW50LnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuZ3JvdXAubmV4dCh0aGlzKVxuICB9XG5cbiAgLyogUHVibGljICovXG4gIC8qIGh0dHA6Ly9pbWFrZXdlYnRoaW5ncy5jb20vd2F5cG9pbnRzL2FwaS9wcmV2aW91cyAqL1xuICBXYXlwb2ludC5wcm90b3R5cGUucHJldmlvdXMgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5ncm91cC5wcmV2aW91cyh0aGlzKVxuICB9XG5cbiAgLyogUHJpdmF0ZSAqL1xuICBXYXlwb2ludC5pbnZva2VBbGwgPSBmdW5jdGlvbihtZXRob2QpIHtcbiAgICB2YXIgYWxsV2F5cG9pbnRzQXJyYXkgPSBbXVxuICAgIGZvciAodmFyIHdheXBvaW50S2V5IGluIGFsbFdheXBvaW50cykge1xuICAgICAgYWxsV2F5cG9pbnRzQXJyYXkucHVzaChhbGxXYXlwb2ludHNbd2F5cG9pbnRLZXldKVxuICAgIH1cbiAgICBmb3IgKHZhciBpID0gMCwgZW5kID0gYWxsV2F5cG9pbnRzQXJyYXkubGVuZ3RoOyBpIDwgZW5kOyBpKyspIHtcbiAgICAgIGFsbFdheXBvaW50c0FycmF5W2ldW21ldGhvZF0oKVxuICAgIH1cbiAgfVxuXG4gIC8qIFB1YmxpYyAqL1xuICAvKiBodHRwOi8vaW1ha2V3ZWJ0aGluZ3MuY29tL3dheXBvaW50cy9hcGkvZGVzdHJveS1hbGwgKi9cbiAgV2F5cG9pbnQuZGVzdHJveUFsbCA9IGZ1bmN0aW9uKCkge1xuICAgIFdheXBvaW50Lmludm9rZUFsbCgnZGVzdHJveScpXG4gIH1cblxuICAvKiBQdWJsaWMgKi9cbiAgLyogaHR0cDovL2ltYWtld2VidGhpbmdzLmNvbS93YXlwb2ludHMvYXBpL2Rpc2FibGUtYWxsICovXG4gIFdheXBvaW50LmRpc2FibGVBbGwgPSBmdW5jdGlvbigpIHtcbiAgICBXYXlwb2ludC5pbnZva2VBbGwoJ2Rpc2FibGUnKVxuICB9XG5cbiAgLyogUHVibGljICovXG4gIC8qIGh0dHA6Ly9pbWFrZXdlYnRoaW5ncy5jb20vd2F5cG9pbnRzL2FwaS9lbmFibGUtYWxsICovXG4gIFdheXBvaW50LmVuYWJsZUFsbCA9IGZ1bmN0aW9uKCkge1xuICAgIFdheXBvaW50Lmludm9rZUFsbCgnZW5hYmxlJylcbiAgfVxuXG4gIC8qIFB1YmxpYyAqL1xuICAvKiBodHRwOi8vaW1ha2V3ZWJ0aGluZ3MuY29tL3dheXBvaW50cy9hcGkvcmVmcmVzaC1hbGwgKi9cbiAgV2F5cG9pbnQucmVmcmVzaEFsbCA9IGZ1bmN0aW9uKCkge1xuICAgIFdheXBvaW50LkNvbnRleHQucmVmcmVzaEFsbCgpXG4gIH1cblxuICAvKiBQdWJsaWMgKi9cbiAgLyogaHR0cDovL2ltYWtld2VidGhpbmdzLmNvbS93YXlwb2ludHMvYXBpL3ZpZXdwb3J0LWhlaWdodCAqL1xuICBXYXlwb2ludC52aWV3cG9ydEhlaWdodCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB3aW5kb3cuaW5uZXJIZWlnaHQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodFxuICB9XG5cbiAgLyogUHVibGljICovXG4gIC8qIGh0dHA6Ly9pbWFrZXdlYnRoaW5ncy5jb20vd2F5cG9pbnRzL2FwaS92aWV3cG9ydC13aWR0aCAqL1xuICBXYXlwb2ludC52aWV3cG9ydFdpZHRoID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aFxuICB9XG5cbiAgV2F5cG9pbnQuYWRhcHRlcnMgPSBbXVxuXG4gIFdheXBvaW50LmRlZmF1bHRzID0ge1xuICAgIGNvbnRleHQ6IHdpbmRvdyxcbiAgICBjb250aW51b3VzOiB0cnVlLFxuICAgIGVuYWJsZWQ6IHRydWUsXG4gICAgZ3JvdXA6ICdkZWZhdWx0JyxcbiAgICBob3Jpem9udGFsOiBmYWxzZSxcbiAgICBvZmZzZXQ6IDBcbiAgfVxuXG4gIFdheXBvaW50Lm9mZnNldEFsaWFzZXMgPSB7XG4gICAgJ2JvdHRvbS1pbi12aWV3JzogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy5jb250ZXh0LmlubmVySGVpZ2h0KCkgLSB0aGlzLmFkYXB0ZXIub3V0ZXJIZWlnaHQoKVxuICAgIH0sXG4gICAgJ3JpZ2h0LWluLXZpZXcnOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLmNvbnRleHQuaW5uZXJXaWR0aCgpIC0gdGhpcy5hZGFwdGVyLm91dGVyV2lkdGgoKVxuICAgIH1cbiAgfVxuXG4gIHdpbmRvdy5XYXlwb2ludCA9IFdheXBvaW50XG59KCkpXG47KGZ1bmN0aW9uKCkge1xuICAndXNlIHN0cmljdCdcblxuICBmdW5jdGlvbiByZXF1ZXN0QW5pbWF0aW9uRnJhbWVTaGltKGNhbGxiYWNrKSB7XG4gICAgd2luZG93LnNldFRpbWVvdXQoY2FsbGJhY2ssIDEwMDAgLyA2MClcbiAgfVxuXG4gIHZhciBrZXlDb3VudGVyID0gMFxuICB2YXIgY29udGV4dHMgPSB7fVxuICB2YXIgV2F5cG9pbnQgPSB3aW5kb3cuV2F5cG9pbnRcbiAgdmFyIG9sZFdpbmRvd0xvYWQgPSB3aW5kb3cub25sb2FkXG5cbiAgLyogaHR0cDovL2ltYWtld2VidGhpbmdzLmNvbS93YXlwb2ludHMvYXBpL2NvbnRleHQgKi9cbiAgZnVuY3Rpb24gQ29udGV4dChlbGVtZW50KSB7XG4gICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudFxuICAgIHRoaXMuQWRhcHRlciA9IFdheXBvaW50LkFkYXB0ZXJcbiAgICB0aGlzLmFkYXB0ZXIgPSBuZXcgdGhpcy5BZGFwdGVyKGVsZW1lbnQpXG4gICAgdGhpcy5rZXkgPSAnd2F5cG9pbnQtY29udGV4dC0nICsga2V5Q291bnRlclxuICAgIHRoaXMuZGlkU2Nyb2xsID0gZmFsc2VcbiAgICB0aGlzLmRpZFJlc2l6ZSA9IGZhbHNlXG4gICAgdGhpcy5vbGRTY3JvbGwgPSB7XG4gICAgICB4OiB0aGlzLmFkYXB0ZXIuc2Nyb2xsTGVmdCgpLFxuICAgICAgeTogdGhpcy5hZGFwdGVyLnNjcm9sbFRvcCgpXG4gICAgfVxuICAgIHRoaXMud2F5cG9pbnRzID0ge1xuICAgICAgdmVydGljYWw6IHt9LFxuICAgICAgaG9yaXpvbnRhbDoge31cbiAgICB9XG5cbiAgICBlbGVtZW50LndheXBvaW50Q29udGV4dEtleSA9IHRoaXMua2V5XG4gICAgY29udGV4dHNbZWxlbWVudC53YXlwb2ludENvbnRleHRLZXldID0gdGhpc1xuICAgIGtleUNvdW50ZXIgKz0gMVxuXG4gICAgdGhpcy5jcmVhdGVUaHJvdHRsZWRTY3JvbGxIYW5kbGVyKClcbiAgICB0aGlzLmNyZWF0ZVRocm90dGxlZFJlc2l6ZUhhbmRsZXIoKVxuICB9XG5cbiAgLyogUHJpdmF0ZSAqL1xuICBDb250ZXh0LnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbih3YXlwb2ludCkge1xuICAgIHZhciBheGlzID0gd2F5cG9pbnQub3B0aW9ucy5ob3Jpem9udGFsID8gJ2hvcml6b250YWwnIDogJ3ZlcnRpY2FsJ1xuICAgIHRoaXMud2F5cG9pbnRzW2F4aXNdW3dheXBvaW50LmtleV0gPSB3YXlwb2ludFxuICAgIHRoaXMucmVmcmVzaCgpXG4gIH1cblxuICAvKiBQcml2YXRlICovXG4gIENvbnRleHQucHJvdG90eXBlLmNoZWNrRW1wdHkgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgaG9yaXpvbnRhbEVtcHR5ID0gdGhpcy5BZGFwdGVyLmlzRW1wdHlPYmplY3QodGhpcy53YXlwb2ludHMuaG9yaXpvbnRhbClcbiAgICB2YXIgdmVydGljYWxFbXB0eSA9IHRoaXMuQWRhcHRlci5pc0VtcHR5T2JqZWN0KHRoaXMud2F5cG9pbnRzLnZlcnRpY2FsKVxuICAgIGlmIChob3Jpem9udGFsRW1wdHkgJiYgdmVydGljYWxFbXB0eSkge1xuICAgICAgdGhpcy5hZGFwdGVyLm9mZignLndheXBvaW50cycpXG4gICAgICBkZWxldGUgY29udGV4dHNbdGhpcy5rZXldXG4gICAgfVxuICB9XG5cbiAgLyogUHJpdmF0ZSAqL1xuICBDb250ZXh0LnByb3RvdHlwZS5jcmVhdGVUaHJvdHRsZWRSZXNpemVIYW5kbGVyID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzXG5cbiAgICBmdW5jdGlvbiByZXNpemVIYW5kbGVyKCkge1xuICAgICAgc2VsZi5oYW5kbGVSZXNpemUoKVxuICAgICAgc2VsZi5kaWRSZXNpemUgPSBmYWxzZVxuICAgIH1cblxuICAgIHRoaXMuYWRhcHRlci5vbigncmVzaXplLndheXBvaW50cycsIGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKCFzZWxmLmRpZFJlc2l6ZSkge1xuICAgICAgICBzZWxmLmRpZFJlc2l6ZSA9IHRydWVcbiAgICAgICAgV2F5cG9pbnQucmVxdWVzdEFuaW1hdGlvbkZyYW1lKHJlc2l6ZUhhbmRsZXIpXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIC8qIFByaXZhdGUgKi9cbiAgQ29udGV4dC5wcm90b3R5cGUuY3JlYXRlVGhyb3R0bGVkU2Nyb2xsSGFuZGxlciA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBzZWxmID0gdGhpc1xuICAgIGZ1bmN0aW9uIHNjcm9sbEhhbmRsZXIoKSB7XG4gICAgICBzZWxmLmhhbmRsZVNjcm9sbCgpXG4gICAgICBzZWxmLmRpZFNjcm9sbCA9IGZhbHNlXG4gICAgfVxuXG4gICAgdGhpcy5hZGFwdGVyLm9uKCdzY3JvbGwud2F5cG9pbnRzJywgZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoIXNlbGYuZGlkU2Nyb2xsIHx8IFdheXBvaW50LmlzVG91Y2gpIHtcbiAgICAgICAgc2VsZi5kaWRTY3JvbGwgPSB0cnVlXG4gICAgICAgIFdheXBvaW50LnJlcXVlc3RBbmltYXRpb25GcmFtZShzY3JvbGxIYW5kbGVyKVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICAvKiBQcml2YXRlICovXG4gIENvbnRleHQucHJvdG90eXBlLmhhbmRsZVJlc2l6ZSA9IGZ1bmN0aW9uKCkge1xuICAgIFdheXBvaW50LkNvbnRleHQucmVmcmVzaEFsbCgpXG4gIH1cblxuICAvKiBQcml2YXRlICovXG4gIENvbnRleHQucHJvdG90eXBlLmhhbmRsZVNjcm9sbCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciB0cmlnZ2VyZWRHcm91cHMgPSB7fVxuICAgIHZhciBheGVzID0ge1xuICAgICAgaG9yaXpvbnRhbDoge1xuICAgICAgICBuZXdTY3JvbGw6IHRoaXMuYWRhcHRlci5zY3JvbGxMZWZ0KCksXG4gICAgICAgIG9sZFNjcm9sbDogdGhpcy5vbGRTY3JvbGwueCxcbiAgICAgICAgZm9yd2FyZDogJ3JpZ2h0JyxcbiAgICAgICAgYmFja3dhcmQ6ICdsZWZ0J1xuICAgICAgfSxcbiAgICAgIHZlcnRpY2FsOiB7XG4gICAgICAgIG5ld1Njcm9sbDogdGhpcy5hZGFwdGVyLnNjcm9sbFRvcCgpLFxuICAgICAgICBvbGRTY3JvbGw6IHRoaXMub2xkU2Nyb2xsLnksXG4gICAgICAgIGZvcndhcmQ6ICdkb3duJyxcbiAgICAgICAgYmFja3dhcmQ6ICd1cCdcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmb3IgKHZhciBheGlzS2V5IGluIGF4ZXMpIHtcbiAgICAgIHZhciBheGlzID0gYXhlc1theGlzS2V5XVxuICAgICAgdmFyIGlzRm9yd2FyZCA9IGF4aXMubmV3U2Nyb2xsID4gYXhpcy5vbGRTY3JvbGxcbiAgICAgIHZhciBkaXJlY3Rpb24gPSBpc0ZvcndhcmQgPyBheGlzLmZvcndhcmQgOiBheGlzLmJhY2t3YXJkXG5cbiAgICAgIGZvciAodmFyIHdheXBvaW50S2V5IGluIHRoaXMud2F5cG9pbnRzW2F4aXNLZXldKSB7XG4gICAgICAgIHZhciB3YXlwb2ludCA9IHRoaXMud2F5cG9pbnRzW2F4aXNLZXldW3dheXBvaW50S2V5XVxuICAgICAgICB2YXIgd2FzQmVmb3JlVHJpZ2dlclBvaW50ID0gYXhpcy5vbGRTY3JvbGwgPCB3YXlwb2ludC50cmlnZ2VyUG9pbnRcbiAgICAgICAgdmFyIG5vd0FmdGVyVHJpZ2dlclBvaW50ID0gYXhpcy5uZXdTY3JvbGwgPj0gd2F5cG9pbnQudHJpZ2dlclBvaW50XG4gICAgICAgIHZhciBjcm9zc2VkRm9yd2FyZCA9IHdhc0JlZm9yZVRyaWdnZXJQb2ludCAmJiBub3dBZnRlclRyaWdnZXJQb2ludFxuICAgICAgICB2YXIgY3Jvc3NlZEJhY2t3YXJkID0gIXdhc0JlZm9yZVRyaWdnZXJQb2ludCAmJiAhbm93QWZ0ZXJUcmlnZ2VyUG9pbnRcbiAgICAgICAgaWYgKGNyb3NzZWRGb3J3YXJkIHx8IGNyb3NzZWRCYWNrd2FyZCkge1xuICAgICAgICAgIHdheXBvaW50LnF1ZXVlVHJpZ2dlcihkaXJlY3Rpb24pXG4gICAgICAgICAgdHJpZ2dlcmVkR3JvdXBzW3dheXBvaW50Lmdyb3VwLmlkXSA9IHdheXBvaW50Lmdyb3VwXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBmb3IgKHZhciBncm91cEtleSBpbiB0cmlnZ2VyZWRHcm91cHMpIHtcbiAgICAgIHRyaWdnZXJlZEdyb3Vwc1tncm91cEtleV0uZmx1c2hUcmlnZ2VycygpXG4gICAgfVxuXG4gICAgdGhpcy5vbGRTY3JvbGwgPSB7XG4gICAgICB4OiBheGVzLmhvcml6b250YWwubmV3U2Nyb2xsLFxuICAgICAgeTogYXhlcy52ZXJ0aWNhbC5uZXdTY3JvbGxcbiAgICB9XG4gIH1cblxuICAvKiBQcml2YXRlICovXG4gIENvbnRleHQucHJvdG90eXBlLmlubmVySGVpZ2h0ID0gZnVuY3Rpb24oKSB7XG4gICAgLyplc2xpbnQtZGlzYWJsZSBlcWVxZXEgKi9cbiAgICBpZiAodGhpcy5lbGVtZW50ID09IHRoaXMuZWxlbWVudC53aW5kb3cpIHtcbiAgICAgIHJldHVybiBXYXlwb2ludC52aWV3cG9ydEhlaWdodCgpXG4gICAgfVxuICAgIC8qZXNsaW50LWVuYWJsZSBlcWVxZXEgKi9cbiAgICByZXR1cm4gdGhpcy5hZGFwdGVyLmlubmVySGVpZ2h0KClcbiAgfVxuXG4gIC8qIFByaXZhdGUgKi9cbiAgQ29udGV4dC5wcm90b3R5cGUucmVtb3ZlID0gZnVuY3Rpb24od2F5cG9pbnQpIHtcbiAgICBkZWxldGUgdGhpcy53YXlwb2ludHNbd2F5cG9pbnQuYXhpc11bd2F5cG9pbnQua2V5XVxuICAgIHRoaXMuY2hlY2tFbXB0eSgpXG4gIH1cblxuICAvKiBQcml2YXRlICovXG4gIENvbnRleHQucHJvdG90eXBlLmlubmVyV2lkdGggPSBmdW5jdGlvbigpIHtcbiAgICAvKmVzbGludC1kaXNhYmxlIGVxZXFlcSAqL1xuICAgIGlmICh0aGlzLmVsZW1lbnQgPT0gdGhpcy5lbGVtZW50LndpbmRvdykge1xuICAgICAgcmV0dXJuIFdheXBvaW50LnZpZXdwb3J0V2lkdGgoKVxuICAgIH1cbiAgICAvKmVzbGludC1lbmFibGUgZXFlcWVxICovXG4gICAgcmV0dXJuIHRoaXMuYWRhcHRlci5pbm5lcldpZHRoKClcbiAgfVxuXG4gIC8qIFB1YmxpYyAqL1xuICAvKiBodHRwOi8vaW1ha2V3ZWJ0aGluZ3MuY29tL3dheXBvaW50cy9hcGkvY29udGV4dC1kZXN0cm95ICovXG4gIENvbnRleHQucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgYWxsV2F5cG9pbnRzID0gW11cbiAgICBmb3IgKHZhciBheGlzIGluIHRoaXMud2F5cG9pbnRzKSB7XG4gICAgICBmb3IgKHZhciB3YXlwb2ludEtleSBpbiB0aGlzLndheXBvaW50c1theGlzXSkge1xuICAgICAgICBhbGxXYXlwb2ludHMucHVzaCh0aGlzLndheXBvaW50c1theGlzXVt3YXlwb2ludEtleV0pXG4gICAgICB9XG4gICAgfVxuICAgIGZvciAodmFyIGkgPSAwLCBlbmQgPSBhbGxXYXlwb2ludHMubGVuZ3RoOyBpIDwgZW5kOyBpKyspIHtcbiAgICAgIGFsbFdheXBvaW50c1tpXS5kZXN0cm95KClcbiAgICB9XG4gIH1cblxuICAvKiBQdWJsaWMgKi9cbiAgLyogaHR0cDovL2ltYWtld2VidGhpbmdzLmNvbS93YXlwb2ludHMvYXBpL2NvbnRleHQtcmVmcmVzaCAqL1xuICBDb250ZXh0LnByb3RvdHlwZS5yZWZyZXNoID0gZnVuY3Rpb24oKSB7XG4gICAgLyplc2xpbnQtZGlzYWJsZSBlcWVxZXEgKi9cbiAgICB2YXIgaXNXaW5kb3cgPSB0aGlzLmVsZW1lbnQgPT0gdGhpcy5lbGVtZW50LndpbmRvd1xuICAgIC8qZXNsaW50LWVuYWJsZSBlcWVxZXEgKi9cbiAgICB2YXIgY29udGV4dE9mZnNldCA9IGlzV2luZG93ID8gdW5kZWZpbmVkIDogdGhpcy5hZGFwdGVyLm9mZnNldCgpXG4gICAgdmFyIHRyaWdnZXJlZEdyb3VwcyA9IHt9XG4gICAgdmFyIGF4ZXNcblxuICAgIHRoaXMuaGFuZGxlU2Nyb2xsKClcbiAgICBheGVzID0ge1xuICAgICAgaG9yaXpvbnRhbDoge1xuICAgICAgICBjb250ZXh0T2Zmc2V0OiBpc1dpbmRvdyA/IDAgOiBjb250ZXh0T2Zmc2V0LmxlZnQsXG4gICAgICAgIGNvbnRleHRTY3JvbGw6IGlzV2luZG93ID8gMCA6IHRoaXMub2xkU2Nyb2xsLngsXG4gICAgICAgIGNvbnRleHREaW1lbnNpb246IHRoaXMuaW5uZXJXaWR0aCgpLFxuICAgICAgICBvbGRTY3JvbGw6IHRoaXMub2xkU2Nyb2xsLngsXG4gICAgICAgIGZvcndhcmQ6ICdyaWdodCcsXG4gICAgICAgIGJhY2t3YXJkOiAnbGVmdCcsXG4gICAgICAgIG9mZnNldFByb3A6ICdsZWZ0J1xuICAgICAgfSxcbiAgICAgIHZlcnRpY2FsOiB7XG4gICAgICAgIGNvbnRleHRPZmZzZXQ6IGlzV2luZG93ID8gMCA6IGNvbnRleHRPZmZzZXQudG9wLFxuICAgICAgICBjb250ZXh0U2Nyb2xsOiBpc1dpbmRvdyA/IDAgOiB0aGlzLm9sZFNjcm9sbC55LFxuICAgICAgICBjb250ZXh0RGltZW5zaW9uOiB0aGlzLmlubmVySGVpZ2h0KCksXG4gICAgICAgIG9sZFNjcm9sbDogdGhpcy5vbGRTY3JvbGwueSxcbiAgICAgICAgZm9yd2FyZDogJ2Rvd24nLFxuICAgICAgICBiYWNrd2FyZDogJ3VwJyxcbiAgICAgICAgb2Zmc2V0UHJvcDogJ3RvcCdcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmb3IgKHZhciBheGlzS2V5IGluIGF4ZXMpIHtcbiAgICAgIHZhciBheGlzID0gYXhlc1theGlzS2V5XVxuICAgICAgZm9yICh2YXIgd2F5cG9pbnRLZXkgaW4gdGhpcy53YXlwb2ludHNbYXhpc0tleV0pIHtcbiAgICAgICAgdmFyIHdheXBvaW50ID0gdGhpcy53YXlwb2ludHNbYXhpc0tleV1bd2F5cG9pbnRLZXldXG4gICAgICAgIHZhciBhZGp1c3RtZW50ID0gd2F5cG9pbnQub3B0aW9ucy5vZmZzZXRcbiAgICAgICAgdmFyIG9sZFRyaWdnZXJQb2ludCA9IHdheXBvaW50LnRyaWdnZXJQb2ludFxuICAgICAgICB2YXIgZWxlbWVudE9mZnNldCA9IDBcbiAgICAgICAgdmFyIGZyZXNoV2F5cG9pbnQgPSBvbGRUcmlnZ2VyUG9pbnQgPT0gbnVsbFxuICAgICAgICB2YXIgY29udGV4dE1vZGlmaWVyLCB3YXNCZWZvcmVTY3JvbGwsIG5vd0FmdGVyU2Nyb2xsXG4gICAgICAgIHZhciB0cmlnZ2VyZWRCYWNrd2FyZCwgdHJpZ2dlcmVkRm9yd2FyZFxuXG4gICAgICAgIGlmICh3YXlwb2ludC5lbGVtZW50ICE9PSB3YXlwb2ludC5lbGVtZW50LndpbmRvdykge1xuICAgICAgICAgIGVsZW1lbnRPZmZzZXQgPSB3YXlwb2ludC5hZGFwdGVyLm9mZnNldCgpW2F4aXMub2Zmc2V0UHJvcF1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0eXBlb2YgYWRqdXN0bWVudCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIGFkanVzdG1lbnQgPSBhZGp1c3RtZW50LmFwcGx5KHdheXBvaW50KVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHR5cGVvZiBhZGp1c3RtZW50ID09PSAnc3RyaW5nJykge1xuICAgICAgICAgIGFkanVzdG1lbnQgPSBwYXJzZUZsb2F0KGFkanVzdG1lbnQpXG4gICAgICAgICAgaWYgKHdheXBvaW50Lm9wdGlvbnMub2Zmc2V0LmluZGV4T2YoJyUnKSA+IC0gMSkge1xuICAgICAgICAgICAgYWRqdXN0bWVudCA9IE1hdGguY2VpbChheGlzLmNvbnRleHREaW1lbnNpb24gKiBhZGp1c3RtZW50IC8gMTAwKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnRleHRNb2RpZmllciA9IGF4aXMuY29udGV4dFNjcm9sbCAtIGF4aXMuY29udGV4dE9mZnNldFxuICAgICAgICB3YXlwb2ludC50cmlnZ2VyUG9pbnQgPSBlbGVtZW50T2Zmc2V0ICsgY29udGV4dE1vZGlmaWVyIC0gYWRqdXN0bWVudFxuICAgICAgICB3YXNCZWZvcmVTY3JvbGwgPSBvbGRUcmlnZ2VyUG9pbnQgPCBheGlzLm9sZFNjcm9sbFxuICAgICAgICBub3dBZnRlclNjcm9sbCA9IHdheXBvaW50LnRyaWdnZXJQb2ludCA+PSBheGlzLm9sZFNjcm9sbFxuICAgICAgICB0cmlnZ2VyZWRCYWNrd2FyZCA9IHdhc0JlZm9yZVNjcm9sbCAmJiBub3dBZnRlclNjcm9sbFxuICAgICAgICB0cmlnZ2VyZWRGb3J3YXJkID0gIXdhc0JlZm9yZVNjcm9sbCAmJiAhbm93QWZ0ZXJTY3JvbGxcblxuICAgICAgICBpZiAoIWZyZXNoV2F5cG9pbnQgJiYgdHJpZ2dlcmVkQmFja3dhcmQpIHtcbiAgICAgICAgICB3YXlwb2ludC5xdWV1ZVRyaWdnZXIoYXhpcy5iYWNrd2FyZClcbiAgICAgICAgICB0cmlnZ2VyZWRHcm91cHNbd2F5cG9pbnQuZ3JvdXAuaWRdID0gd2F5cG9pbnQuZ3JvdXBcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICghZnJlc2hXYXlwb2ludCAmJiB0cmlnZ2VyZWRGb3J3YXJkKSB7XG4gICAgICAgICAgd2F5cG9pbnQucXVldWVUcmlnZ2VyKGF4aXMuZm9yd2FyZClcbiAgICAgICAgICB0cmlnZ2VyZWRHcm91cHNbd2F5cG9pbnQuZ3JvdXAuaWRdID0gd2F5cG9pbnQuZ3JvdXBcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChmcmVzaFdheXBvaW50ICYmIGF4aXMub2xkU2Nyb2xsID49IHdheXBvaW50LnRyaWdnZXJQb2ludCkge1xuICAgICAgICAgIHdheXBvaW50LnF1ZXVlVHJpZ2dlcihheGlzLmZvcndhcmQpXG4gICAgICAgICAgdHJpZ2dlcmVkR3JvdXBzW3dheXBvaW50Lmdyb3VwLmlkXSA9IHdheXBvaW50Lmdyb3VwXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBXYXlwb2ludC5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZnVuY3Rpb24oKSB7XG4gICAgICBmb3IgKHZhciBncm91cEtleSBpbiB0cmlnZ2VyZWRHcm91cHMpIHtcbiAgICAgICAgdHJpZ2dlcmVkR3JvdXBzW2dyb3VwS2V5XS5mbHVzaFRyaWdnZXJzKClcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgcmV0dXJuIHRoaXNcbiAgfVxuXG4gIC8qIFByaXZhdGUgKi9cbiAgQ29udGV4dC5maW5kT3JDcmVhdGVCeUVsZW1lbnQgPSBmdW5jdGlvbihlbGVtZW50KSB7XG4gICAgcmV0dXJuIENvbnRleHQuZmluZEJ5RWxlbWVudChlbGVtZW50KSB8fCBuZXcgQ29udGV4dChlbGVtZW50KVxuICB9XG5cbiAgLyogUHJpdmF0ZSAqL1xuICBDb250ZXh0LnJlZnJlc2hBbGwgPSBmdW5jdGlvbigpIHtcbiAgICBmb3IgKHZhciBjb250ZXh0SWQgaW4gY29udGV4dHMpIHtcbiAgICAgIGNvbnRleHRzW2NvbnRleHRJZF0ucmVmcmVzaCgpXG4gICAgfVxuICB9XG5cbiAgLyogUHVibGljICovXG4gIC8qIGh0dHA6Ly9pbWFrZXdlYnRoaW5ncy5jb20vd2F5cG9pbnRzL2FwaS9jb250ZXh0LWZpbmQtYnktZWxlbWVudCAqL1xuICBDb250ZXh0LmZpbmRCeUVsZW1lbnQgPSBmdW5jdGlvbihlbGVtZW50KSB7XG4gICAgcmV0dXJuIGNvbnRleHRzW2VsZW1lbnQud2F5cG9pbnRDb250ZXh0S2V5XVxuICB9XG5cbiAgd2luZG93Lm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuICAgIGlmIChvbGRXaW5kb3dMb2FkKSB7XG4gICAgICBvbGRXaW5kb3dMb2FkKClcbiAgICB9XG4gICAgQ29udGV4dC5yZWZyZXNoQWxsKClcbiAgfVxuXG4gIFdheXBvaW50LnJlcXVlc3RBbmltYXRpb25GcmFtZSA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gICAgdmFyIHJlcXVlc3RGbiA9IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHxcbiAgICAgIHdpbmRvdy5tb3pSZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHxcbiAgICAgIHdpbmRvdy53ZWJraXRSZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHxcbiAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZVNoaW1cbiAgICByZXF1ZXN0Rm4uY2FsbCh3aW5kb3csIGNhbGxiYWNrKVxuICB9XG4gIFdheXBvaW50LkNvbnRleHQgPSBDb250ZXh0XG59KCkpXG47KGZ1bmN0aW9uKCkge1xuICAndXNlIHN0cmljdCdcblxuICBmdW5jdGlvbiBieVRyaWdnZXJQb2ludChhLCBiKSB7XG4gICAgcmV0dXJuIGEudHJpZ2dlclBvaW50IC0gYi50cmlnZ2VyUG9pbnRcbiAgfVxuXG4gIGZ1bmN0aW9uIGJ5UmV2ZXJzZVRyaWdnZXJQb2ludChhLCBiKSB7XG4gICAgcmV0dXJuIGIudHJpZ2dlclBvaW50IC0gYS50cmlnZ2VyUG9pbnRcbiAgfVxuXG4gIHZhciBncm91cHMgPSB7XG4gICAgdmVydGljYWw6IHt9LFxuICAgIGhvcml6b250YWw6IHt9XG4gIH1cbiAgdmFyIFdheXBvaW50ID0gd2luZG93LldheXBvaW50XG5cbiAgLyogaHR0cDovL2ltYWtld2VidGhpbmdzLmNvbS93YXlwb2ludHMvYXBpL2dyb3VwICovXG4gIGZ1bmN0aW9uIEdyb3VwKG9wdGlvbnMpIHtcbiAgICB0aGlzLm5hbWUgPSBvcHRpb25zLm5hbWVcbiAgICB0aGlzLmF4aXMgPSBvcHRpb25zLmF4aXNcbiAgICB0aGlzLmlkID0gdGhpcy5uYW1lICsgJy0nICsgdGhpcy5heGlzXG4gICAgdGhpcy53YXlwb2ludHMgPSBbXVxuICAgIHRoaXMuY2xlYXJUcmlnZ2VyUXVldWVzKClcbiAgICBncm91cHNbdGhpcy5heGlzXVt0aGlzLm5hbWVdID0gdGhpc1xuICB9XG5cbiAgLyogUHJpdmF0ZSAqL1xuICBHcm91cC5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24od2F5cG9pbnQpIHtcbiAgICB0aGlzLndheXBvaW50cy5wdXNoKHdheXBvaW50KVxuICB9XG5cbiAgLyogUHJpdmF0ZSAqL1xuICBHcm91cC5wcm90b3R5cGUuY2xlYXJUcmlnZ2VyUXVldWVzID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy50cmlnZ2VyUXVldWVzID0ge1xuICAgICAgdXA6IFtdLFxuICAgICAgZG93bjogW10sXG4gICAgICBsZWZ0OiBbXSxcbiAgICAgIHJpZ2h0OiBbXVxuICAgIH1cbiAgfVxuXG4gIC8qIFByaXZhdGUgKi9cbiAgR3JvdXAucHJvdG90eXBlLmZsdXNoVHJpZ2dlcnMgPSBmdW5jdGlvbigpIHtcbiAgICBmb3IgKHZhciBkaXJlY3Rpb24gaW4gdGhpcy50cmlnZ2VyUXVldWVzKSB7XG4gICAgICB2YXIgd2F5cG9pbnRzID0gdGhpcy50cmlnZ2VyUXVldWVzW2RpcmVjdGlvbl1cbiAgICAgIHZhciByZXZlcnNlID0gZGlyZWN0aW9uID09PSAndXAnIHx8IGRpcmVjdGlvbiA9PT0gJ2xlZnQnXG4gICAgICB3YXlwb2ludHMuc29ydChyZXZlcnNlID8gYnlSZXZlcnNlVHJpZ2dlclBvaW50IDogYnlUcmlnZ2VyUG9pbnQpXG4gICAgICBmb3IgKHZhciBpID0gMCwgZW5kID0gd2F5cG9pbnRzLmxlbmd0aDsgaSA8IGVuZDsgaSArPSAxKSB7XG4gICAgICAgIHZhciB3YXlwb2ludCA9IHdheXBvaW50c1tpXVxuICAgICAgICBpZiAod2F5cG9pbnQub3B0aW9ucy5jb250aW51b3VzIHx8IGkgPT09IHdheXBvaW50cy5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgd2F5cG9pbnQudHJpZ2dlcihbZGlyZWN0aW9uXSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLmNsZWFyVHJpZ2dlclF1ZXVlcygpXG4gIH1cblxuICAvKiBQcml2YXRlICovXG4gIEdyb3VwLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24od2F5cG9pbnQpIHtcbiAgICB0aGlzLndheXBvaW50cy5zb3J0KGJ5VHJpZ2dlclBvaW50KVxuICAgIHZhciBpbmRleCA9IFdheXBvaW50LkFkYXB0ZXIuaW5BcnJheSh3YXlwb2ludCwgdGhpcy53YXlwb2ludHMpXG4gICAgdmFyIGlzTGFzdCA9IGluZGV4ID09PSB0aGlzLndheXBvaW50cy5sZW5ndGggLSAxXG4gICAgcmV0dXJuIGlzTGFzdCA/IG51bGwgOiB0aGlzLndheXBvaW50c1tpbmRleCArIDFdXG4gIH1cblxuICAvKiBQcml2YXRlICovXG4gIEdyb3VwLnByb3RvdHlwZS5wcmV2aW91cyA9IGZ1bmN0aW9uKHdheXBvaW50KSB7XG4gICAgdGhpcy53YXlwb2ludHMuc29ydChieVRyaWdnZXJQb2ludClcbiAgICB2YXIgaW5kZXggPSBXYXlwb2ludC5BZGFwdGVyLmluQXJyYXkod2F5cG9pbnQsIHRoaXMud2F5cG9pbnRzKVxuICAgIHJldHVybiBpbmRleCA/IHRoaXMud2F5cG9pbnRzW2luZGV4IC0gMV0gOiBudWxsXG4gIH1cblxuICAvKiBQcml2YXRlICovXG4gIEdyb3VwLnByb3RvdHlwZS5xdWV1ZVRyaWdnZXIgPSBmdW5jdGlvbih3YXlwb2ludCwgZGlyZWN0aW9uKSB7XG4gICAgdGhpcy50cmlnZ2VyUXVldWVzW2RpcmVjdGlvbl0ucHVzaCh3YXlwb2ludClcbiAgfVxuXG4gIC8qIFByaXZhdGUgKi9cbiAgR3JvdXAucHJvdG90eXBlLnJlbW92ZSA9IGZ1bmN0aW9uKHdheXBvaW50KSB7XG4gICAgdmFyIGluZGV4ID0gV2F5cG9pbnQuQWRhcHRlci5pbkFycmF5KHdheXBvaW50LCB0aGlzLndheXBvaW50cylcbiAgICBpZiAoaW5kZXggPiAtMSkge1xuICAgICAgdGhpcy53YXlwb2ludHMuc3BsaWNlKGluZGV4LCAxKVxuICAgIH1cbiAgfVxuXG4gIC8qIFB1YmxpYyAqL1xuICAvKiBodHRwOi8vaW1ha2V3ZWJ0aGluZ3MuY29tL3dheXBvaW50cy9hcGkvZmlyc3QgKi9cbiAgR3JvdXAucHJvdG90eXBlLmZpcnN0ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMud2F5cG9pbnRzWzBdXG4gIH1cblxuICAvKiBQdWJsaWMgKi9cbiAgLyogaHR0cDovL2ltYWtld2VidGhpbmdzLmNvbS93YXlwb2ludHMvYXBpL2xhc3QgKi9cbiAgR3JvdXAucHJvdG90eXBlLmxhc3QgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy53YXlwb2ludHNbdGhpcy53YXlwb2ludHMubGVuZ3RoIC0gMV1cbiAgfVxuXG4gIC8qIFByaXZhdGUgKi9cbiAgR3JvdXAuZmluZE9yQ3JlYXRlID0gZnVuY3Rpb24ob3B0aW9ucykge1xuICAgIHJldHVybiBncm91cHNbb3B0aW9ucy5heGlzXVtvcHRpb25zLm5hbWVdIHx8IG5ldyBHcm91cChvcHRpb25zKVxuICB9XG5cbiAgV2F5cG9pbnQuR3JvdXAgPSBHcm91cFxufSgpKVxuOyhmdW5jdGlvbigpIHtcbiAgJ3VzZSBzdHJpY3QnXG5cbiAgdmFyIFdheXBvaW50ID0gd2luZG93LldheXBvaW50XG5cbiAgZnVuY3Rpb24gaXNXaW5kb3coZWxlbWVudCkge1xuICAgIHJldHVybiBlbGVtZW50ID09PSBlbGVtZW50LndpbmRvd1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0V2luZG93KGVsZW1lbnQpIHtcbiAgICBpZiAoaXNXaW5kb3coZWxlbWVudCkpIHtcbiAgICAgIHJldHVybiBlbGVtZW50XG4gICAgfVxuICAgIHJldHVybiBlbGVtZW50LmRlZmF1bHRWaWV3XG4gIH1cblxuICBmdW5jdGlvbiBOb0ZyYW1ld29ya0FkYXB0ZXIoZWxlbWVudCkge1xuICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnRcbiAgICB0aGlzLmhhbmRsZXJzID0ge31cbiAgfVxuXG4gIE5vRnJhbWV3b3JrQWRhcHRlci5wcm90b3R5cGUuaW5uZXJIZWlnaHQgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgaXNXaW4gPSBpc1dpbmRvdyh0aGlzLmVsZW1lbnQpXG4gICAgcmV0dXJuIGlzV2luID8gdGhpcy5lbGVtZW50LmlubmVySGVpZ2h0IDogdGhpcy5lbGVtZW50LmNsaWVudEhlaWdodFxuICB9XG5cbiAgTm9GcmFtZXdvcmtBZGFwdGVyLnByb3RvdHlwZS5pbm5lcldpZHRoID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGlzV2luID0gaXNXaW5kb3codGhpcy5lbGVtZW50KVxuICAgIHJldHVybiBpc1dpbiA/IHRoaXMuZWxlbWVudC5pbm5lcldpZHRoIDogdGhpcy5lbGVtZW50LmNsaWVudFdpZHRoXG4gIH1cblxuICBOb0ZyYW1ld29ya0FkYXB0ZXIucHJvdG90eXBlLm9mZiA9IGZ1bmN0aW9uKGV2ZW50LCBoYW5kbGVyKSB7XG4gICAgZnVuY3Rpb24gcmVtb3ZlTGlzdGVuZXJzKGVsZW1lbnQsIGxpc3RlbmVycywgaGFuZGxlcikge1xuICAgICAgZm9yICh2YXIgaSA9IDAsIGVuZCA9IGxpc3RlbmVycy5sZW5ndGggLSAxOyBpIDwgZW5kOyBpKyspIHtcbiAgICAgICAgdmFyIGxpc3RlbmVyID0gbGlzdGVuZXJzW2ldXG4gICAgICAgIGlmICghaGFuZGxlciB8fCBoYW5kbGVyID09PSBsaXN0ZW5lcikge1xuICAgICAgICAgIGVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihsaXN0ZW5lcilcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHZhciBldmVudFBhcnRzID0gZXZlbnQuc3BsaXQoJy4nKVxuICAgIHZhciBldmVudFR5cGUgPSBldmVudFBhcnRzWzBdXG4gICAgdmFyIG5hbWVzcGFjZSA9IGV2ZW50UGFydHNbMV1cbiAgICB2YXIgZWxlbWVudCA9IHRoaXMuZWxlbWVudFxuXG4gICAgaWYgKG5hbWVzcGFjZSAmJiB0aGlzLmhhbmRsZXJzW25hbWVzcGFjZV0gJiYgZXZlbnRUeXBlKSB7XG4gICAgICByZW1vdmVMaXN0ZW5lcnMoZWxlbWVudCwgdGhpcy5oYW5kbGVyc1tuYW1lc3BhY2VdW2V2ZW50VHlwZV0sIGhhbmRsZXIpXG4gICAgICB0aGlzLmhhbmRsZXJzW25hbWVzcGFjZV1bZXZlbnRUeXBlXSA9IFtdXG4gICAgfVxuICAgIGVsc2UgaWYgKGV2ZW50VHlwZSkge1xuICAgICAgZm9yICh2YXIgbnMgaW4gdGhpcy5oYW5kbGVycykge1xuICAgICAgICByZW1vdmVMaXN0ZW5lcnMoZWxlbWVudCwgdGhpcy5oYW5kbGVyc1tuc11bZXZlbnRUeXBlXSB8fCBbXSwgaGFuZGxlcilcbiAgICAgICAgdGhpcy5oYW5kbGVyc1tuc11bZXZlbnRUeXBlXSA9IFtdXG4gICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKG5hbWVzcGFjZSAmJiB0aGlzLmhhbmRsZXJzW25hbWVzcGFjZV0pIHtcbiAgICAgIGZvciAodmFyIHR5cGUgaW4gdGhpcy5oYW5kbGVyc1tuYW1lc3BhY2VdKSB7XG4gICAgICAgIHJlbW92ZUxpc3RlbmVycyhlbGVtZW50LCB0aGlzLmhhbmRsZXJzW25hbWVzcGFjZV1bdHlwZV0sIGhhbmRsZXIpXG4gICAgICB9XG4gICAgICB0aGlzLmhhbmRsZXJzW25hbWVzcGFjZV0gPSB7fVxuICAgIH1cbiAgfVxuXG4gIC8qIEFkYXB0ZWQgZnJvbSBqUXVlcnkgMS54IG9mZnNldCgpICovXG4gIE5vRnJhbWV3b3JrQWRhcHRlci5wcm90b3R5cGUub2Zmc2V0ID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKCF0aGlzLmVsZW1lbnQub3duZXJEb2N1bWVudCkge1xuICAgICAgcmV0dXJuIG51bGxcbiAgICB9XG5cbiAgICB2YXIgZG9jdW1lbnRFbGVtZW50ID0gdGhpcy5lbGVtZW50Lm93bmVyRG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50XG4gICAgdmFyIHdpbiA9IGdldFdpbmRvdyh0aGlzLmVsZW1lbnQub3duZXJEb2N1bWVudClcbiAgICB2YXIgcmVjdCA9IHtcbiAgICAgIHRvcDogMCxcbiAgICAgIGxlZnQ6IDBcbiAgICB9XG5cbiAgICBpZiAodGhpcy5lbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCkge1xuICAgICAgcmVjdCA9IHRoaXMuZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVxuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICB0b3A6IHJlY3QudG9wICsgd2luLnBhZ2VZT2Zmc2V0IC0gZG9jdW1lbnRFbGVtZW50LmNsaWVudFRvcCxcbiAgICAgIGxlZnQ6IHJlY3QubGVmdCArIHdpbi5wYWdlWE9mZnNldCAtIGRvY3VtZW50RWxlbWVudC5jbGllbnRMZWZ0XG4gICAgfVxuICB9XG5cbiAgTm9GcmFtZXdvcmtBZGFwdGVyLnByb3RvdHlwZS5vbiA9IGZ1bmN0aW9uKGV2ZW50LCBoYW5kbGVyKSB7XG4gICAgdmFyIGV2ZW50UGFydHMgPSBldmVudC5zcGxpdCgnLicpXG4gICAgdmFyIGV2ZW50VHlwZSA9IGV2ZW50UGFydHNbMF1cbiAgICB2YXIgbmFtZXNwYWNlID0gZXZlbnRQYXJ0c1sxXSB8fCAnX19kZWZhdWx0J1xuICAgIHZhciBuc0hhbmRsZXJzID0gdGhpcy5oYW5kbGVyc1tuYW1lc3BhY2VdID0gdGhpcy5oYW5kbGVyc1tuYW1lc3BhY2VdIHx8IHt9XG4gICAgdmFyIG5zVHlwZUxpc3QgPSBuc0hhbmRsZXJzW2V2ZW50VHlwZV0gPSBuc0hhbmRsZXJzW2V2ZW50VHlwZV0gfHwgW11cblxuICAgIG5zVHlwZUxpc3QucHVzaChoYW5kbGVyKVxuICAgIHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKGV2ZW50VHlwZSwgaGFuZGxlcilcbiAgfVxuXG4gIE5vRnJhbWV3b3JrQWRhcHRlci5wcm90b3R5cGUub3V0ZXJIZWlnaHQgPSBmdW5jdGlvbihpbmNsdWRlTWFyZ2luKSB7XG4gICAgdmFyIGhlaWdodCA9IHRoaXMuaW5uZXJIZWlnaHQoKVxuICAgIHZhciBjb21wdXRlZFN0eWxlXG5cbiAgICBpZiAoaW5jbHVkZU1hcmdpbiAmJiAhaXNXaW5kb3codGhpcy5lbGVtZW50KSkge1xuICAgICAgY29tcHV0ZWRTdHlsZSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHRoaXMuZWxlbWVudClcbiAgICAgIGhlaWdodCArPSBwYXJzZUludChjb21wdXRlZFN0eWxlLm1hcmdpblRvcCwgMTApXG4gICAgICBoZWlnaHQgKz0gcGFyc2VJbnQoY29tcHV0ZWRTdHlsZS5tYXJnaW5Cb3R0b20sIDEwKVxuICAgIH1cblxuICAgIHJldHVybiBoZWlnaHRcbiAgfVxuXG4gIE5vRnJhbWV3b3JrQWRhcHRlci5wcm90b3R5cGUub3V0ZXJXaWR0aCA9IGZ1bmN0aW9uKGluY2x1ZGVNYXJnaW4pIHtcbiAgICB2YXIgd2lkdGggPSB0aGlzLmlubmVyV2lkdGgoKVxuICAgIHZhciBjb21wdXRlZFN0eWxlXG5cbiAgICBpZiAoaW5jbHVkZU1hcmdpbiAmJiAhaXNXaW5kb3codGhpcy5lbGVtZW50KSkge1xuICAgICAgY29tcHV0ZWRTdHlsZSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHRoaXMuZWxlbWVudClcbiAgICAgIHdpZHRoICs9IHBhcnNlSW50KGNvbXB1dGVkU3R5bGUubWFyZ2luTGVmdCwgMTApXG4gICAgICB3aWR0aCArPSBwYXJzZUludChjb21wdXRlZFN0eWxlLm1hcmdpblJpZ2h0LCAxMClcbiAgICB9XG5cbiAgICByZXR1cm4gd2lkdGhcbiAgfVxuXG4gIE5vRnJhbWV3b3JrQWRhcHRlci5wcm90b3R5cGUuc2Nyb2xsTGVmdCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciB3aW4gPSBnZXRXaW5kb3codGhpcy5lbGVtZW50KVxuICAgIHJldHVybiB3aW4gPyB3aW4ucGFnZVhPZmZzZXQgOiB0aGlzLmVsZW1lbnQuc2Nyb2xsTGVmdFxuICB9XG5cbiAgTm9GcmFtZXdvcmtBZGFwdGVyLnByb3RvdHlwZS5zY3JvbGxUb3AgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgd2luID0gZ2V0V2luZG93KHRoaXMuZWxlbWVudClcbiAgICByZXR1cm4gd2luID8gd2luLnBhZ2VZT2Zmc2V0IDogdGhpcy5lbGVtZW50LnNjcm9sbFRvcFxuICB9XG5cbiAgTm9GcmFtZXdvcmtBZGFwdGVyLmV4dGVuZCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKVxuXG4gICAgZnVuY3Rpb24gbWVyZ2UodGFyZ2V0LCBvYmopIHtcbiAgICAgIGlmICh0eXBlb2YgdGFyZ2V0ID09PSAnb2JqZWN0JyAmJiB0eXBlb2Ygb2JqID09PSAnb2JqZWN0Jykge1xuICAgICAgICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7XG4gICAgICAgICAgaWYgKG9iai5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgICAgICB0YXJnZXRba2V5XSA9IG9ialtrZXldXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0YXJnZXRcbiAgICB9XG5cbiAgICBmb3IgKHZhciBpID0gMSwgZW5kID0gYXJncy5sZW5ndGg7IGkgPCBlbmQ7IGkrKykge1xuICAgICAgbWVyZ2UoYXJnc1swXSwgYXJnc1tpXSlcbiAgICB9XG4gICAgcmV0dXJuIGFyZ3NbMF1cbiAgfVxuXG4gIE5vRnJhbWV3b3JrQWRhcHRlci5pbkFycmF5ID0gZnVuY3Rpb24oZWxlbWVudCwgYXJyYXksIGkpIHtcbiAgICByZXR1cm4gYXJyYXkgPT0gbnVsbCA/IC0xIDogYXJyYXkuaW5kZXhPZihlbGVtZW50LCBpKVxuICB9XG5cbiAgTm9GcmFtZXdvcmtBZGFwdGVyLmlzRW1wdHlPYmplY3QgPSBmdW5jdGlvbihvYmopIHtcbiAgICAvKiBlc2xpbnQgbm8tdW51c2VkLXZhcnM6IDAgKi9cbiAgICBmb3IgKHZhciBuYW1lIGluIG9iaikge1xuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICAgIHJldHVybiB0cnVlXG4gIH1cblxuICBXYXlwb2ludC5hZGFwdGVycy5wdXNoKHtcbiAgICBuYW1lOiAnbm9mcmFtZXdvcmsnLFxuICAgIEFkYXB0ZXI6IE5vRnJhbWV3b3JrQWRhcHRlclxuICB9KVxuICBXYXlwb2ludC5BZGFwdGVyID0gTm9GcmFtZXdvcmtBZGFwdGVyXG59KCkpXG47XG59LHt9XX0se30sWzFdKSJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
