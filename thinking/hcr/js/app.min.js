"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};!function e(n,t,i){function o(a,s){if(!t[a]){if(!n[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(r)return r(a,!0);throw new Error("Cannot find module '"+a+"'")}var u=t[a]={exports:{}};n[a][0].call(u.exports,function(e){var t=n[a][1][e];return o(t?t:e)},u,u.exports,e,n,t,i)}return t[a].exports}for(var r="function"==typeof require&&require,a=0;a<i.length;a++)o(i[a]);return o}({1:[function(e,n,t){e("../node_modules/waypoints/lib/noframework.waypoints");var i=document.body.style,o=document.location+"images/bg/",r=".png",a=["Feather_TONE","DuckPrints_Feather_TONE","WallPaper2.5","WallPaper3","WallPaper3.5","WallPaper4","WallPaper4.5","WallPaper5.5","WallPaper5.5_tone","WallPaper6","WallPaper6.5","WallPaper7.5","WallPaper7.5_tone"],s=!1,l=["sm-new-employees-container","sm-current-employees-container","sm-exiting-employees-container","sm-cadillac-tax-container","sm-penalties-container","sm-benefits-requirements-container","sm-voluntary-insurance-container","sm-exchanges-container","sm-whats-next-container","new-employees-container","current-employees-container","exiting-employees-container","cadillac-tax-container","penalties-container","benefits-requirements-container","voluntary-insurance-container","exchanges-container","whats-next-container"],u=function(){new Waypoint({element:document.getElementById("sm-benefits-requirements"),handler:function(e){console.log(this.element.clientHeight),jQuery("#sm-benefits-requirements:not(.shown)").addClass("animated bounceInDown shown"),jQuery("#sm-benefits-requirements").one("webkitAnimationEnd oanimationend msAnimationEnd animationend",function(){jQuery("#sm-benefits-requirements").removeClass("animated bounceInDown")})},offset:function(){return window.innerHeight-2*this.element.clientHeight}}),new Waypoint({element:document.getElementById("sm-new-employees"),handler:function(e){console.log(this.element.clientHeight),jQuery("#sm-new-employees:not(.shown)").addClass("animated zoomInUp shown"),jQuery("#sm-new-employees").one("webkitAnimationEnd oanimationend msAnimationEnd animationend",function(){jQuery("#sm-new-employees").removeClass("animated zoomInUp  ")})},offset:function(){return window.innerHeight-2*this.element.clientHeight}}),new Waypoint({element:document.getElementById("sm-current-employees"),handler:function(e){console.log(this.element.clientHeight),jQuery("#sm-current-employees:not(.shown)").addClass("animated jello shown"),jQuery("#sm-current-employees").one("webkitAnimationEnd oanimationend msAnimationEnd animationend",function(){jQuery("#sm-current-employees").removeClass("animated jello  ")})},offset:function(){return window.innerHeight-2*this.element.clientHeight}}),new Waypoint({element:document.getElementById("sm-exiting-employees"),handler:function(e){console.log(this.element.clientHeight),jQuery("#sm-exiting-employees:not(.shown)").addClass("animated flip shown"),jQuery("#sm-exiting-employees").one("webkitAnimationEnd oanimationend msAnimationEnd animationend",function(){jQuery("#sm-exiting-employees").removeClass("animated flip")})},offset:function(){return window.innerHeight-2*this.element.clientHeight}}),new Waypoint({element:document.getElementById("sm-penalties"),handler:function(e){console.log(this.element.clientHeight),jQuery("#sm-penalties:not(.shown)").addClass("animated zoomInUp shown"),jQuery("#sm-penalties").one("webkitAnimationEnd oanimationend msAnimationEnd animationend",function(){jQuery("#sm-penalties").removeClass("animated zoomInUp  ")})},offset:function(){return window.innerHeight-2*this.element.clientHeight}}),new Waypoint({element:document.getElementById("sm-cadillac-tax"),handler:function(e){console.log(this.element.clientHeight),jQuery("#sm-cadillac-tax:not(.shown)").addClass("animated zoomIn shown"),jQuery("#sm-cadillac-tax").one("webkitAnimationEnd oanimationend msAnimationEnd animationend",function(){jQuery("#sm-cadillac-tax").removeClass("animated zoomIn  ")})},offset:function(){return window.innerHeight-2*this.element.clientHeight}}),new Waypoint({element:document.getElementById("sm-exchanges"),handler:function(e){console.log("here"),jQuery("#sm-exchanges:not(.shown)").addClass("animated rotateIn shown"),jQuery("#sm-exchanges").one("webkitAnimationEnd oanimationend msAnimationEnd animationend",function(){jQuery("#sm-exchanges").removeClass("animated rotateIn")})},offset:function(){return window.innerHeight-2*this.element.clientHeight}}),new Waypoint({element:document.getElementById("sm-voluntary-insurance"),handler:function(e){console.log("here"),jQuery("#sm-voluntary-insurance:not(.shown)").addClass("animated slideInUp shown"),jQuery("#sm-voluntary-insurance").one("webkitAnimationEnd oanimationend msAnimationEnd animationend",function(){jQuery("#sm-voluntary-insurance").removeClass("animated slideInUp")})},offset:function(){return window.innerHeight-2*this.element.clientHeight}}),new Waypoint({element:document.getElementById("sm-whats-next"),handler:function(e){console.log("here"),jQuery("#sm-whats-next:not(.shown)").addClass("animated bounceInUp shown"),jQuery("#sm-whats-next").one("webkitAnimationEnd oanimationend msAnimationEnd animationend",function(){jQuery("#sm-whats-next").removeClass("animated bounceInUp")})},offset:function(){return window.innerHeight-2*this.element.clientHeight}}),new Waypoint({element:document.getElementById("benefits-requirements"),handler:function(e){console.log(this.element.clientHeight),jQuery("#benefits-requirements:not(.shown)").addClass("animated bounceInDown shown"),jQuery("#benefits-requirements").one("webkitAnimationEnd oanimationend msAnimationEnd animationend",function(){jQuery("#benefits-requirements").removeClass("animated bounceInDown")})},offset:function(){return window.innerHeight-2*this.element.clientHeight}}),new Waypoint({element:document.getElementById("new-employees"),handler:function(e){console.log(this.element.clientHeight),jQuery("#new-employees:not(.shown)").addClass("animated zoomInUp shown"),jQuery("#new-employees").one("webkitAnimationEnd oanimationend msAnimationEnd animationend",function(){jQuery("#new-employees").removeClass("animated zoomInUp  ")})},offset:function(){return window.innerHeight-2*this.element.clientHeight}}),new Waypoint({element:document.getElementById("current-employees"),handler:function(e){console.log(this.element.clientHeight),jQuery("#current-employees:not(.shown)").addClass("animated jello shown"),jQuery("#current-employees").one("webkitAnimationEnd oanimationend msAnimationEnd animationend",function(){jQuery("#current-employees").removeClass("animated jello  ")})},offset:function(){return window.innerHeight-2*this.element.clientHeight}}),new Waypoint({element:document.getElementById("exiting-employees"),handler:function(e){console.log(this.element.clientHeight),jQuery("#exiting-employees:not(.shown)").addClass("animated flip shown"),jQuery("#exiting-employees").one("webkitAnimationEnd oanimationend msAnimationEnd animationend",function(){jQuery("#exiting-employees").removeClass("animated flip")})},offset:function(){return window.innerHeight-2*this.element.clientHeight}}),new Waypoint({element:document.getElementById("penalties"),handler:function(e){console.log(this.element.clientHeight),jQuery("#penalties:not(.shown)").addClass("animated zoomInUp shown"),jQuery("#penalties").one("webkitAnimationEnd oanimationend msAnimationEnd animationend",function(){jQuery("#penalties").removeClass("animated zoomInUp  ")})},offset:function(){return window.innerHeight-2*this.element.clientHeight}}),new Waypoint({element:document.getElementById("cadillac-tax"),handler:function(e){console.log(this.element.clientHeight),jQuery("#cadillac-tax:not(.shown)").addClass("animated zoomIn shown"),jQuery("#cadillac-tax").one("webkitAnimationEnd oanimationend msAnimationEnd animationend",function(){jQuery("#cadillac-tax").removeClass("animated zoomIn  ")})},offset:function(){return window.innerHeight-2*this.element.clientHeight}}),new Waypoint({element:document.getElementById("exchanges"),handler:function(e){console.log("here"),jQuery("#exchanges:not(.shown)").addClass("animated rotateIn shown"),jQuery("#exchanges").one("webkitAnimationEnd oanimationend msAnimationEnd animationend",function(){jQuery("#exchanges").removeClass("animated rotateIn")})},offset:function(){return window.innerHeight-2*this.element.clientHeight}}),new Waypoint({element:document.getElementById("voluntary-insurance"),handler:function(e){console.log("here"),jQuery("#voluntary-insurance:not(.shown)").addClass("animated slideInUp shown"),jQuery("#voluntary-insurance").one("webkitAnimationEnd oanimationend msAnimationEnd animationend",function(){jQuery("#voluntary-insurance").removeClass("animated slideInUp")})},offset:function(){return window.innerHeight-2*this.element.clientHeight}}),new Waypoint({element:document.getElementById("whats-next"),handler:function(e){console.log("here"),jQuery("#whats-next:not(.shown)").addClass("animated bounceInUp shown"),jQuery("#whats-next").one("webkitAnimationEnd oanimationend msAnimationEnd animationend",function(){jQuery("#whats-next").removeClass("animated bounceInUp")})},offset:function(){return window.innerHeight-2*this.element.clientHeight}})};window.waypoints=[],l.forEach(function(e,n){console.log("."+e),window.waypoints[n]=new Waypoint({element:document.querySelector("."+e),handler:function(e){console.log("loading..."),c(Math.floor(Math.random()*a.length))}})}),s!==!0&&(a.forEach(function(e){(new Image).src=o+e+r}),s=!0);var d=!0,c=function(e){d===!0&&(console.log("can load!!!!!"),d=!1,setTimeout(function(){i.backgroundImage="url("+o+a[e]+r+")",console.log("loading "+o+a[e]+r,e),d=!0},100))},h=jQuery(".business-type-select");h.each(function(e,n){console.log(n),jQuery(n).on("click",function(){console.log(n),jQuery(".hcr-menu-item").hide(),"business-50"===n.dataset.business?jQuery("a.sm").parent().show():jQuery("a.lg").parent().show(),document.body.classList="",document.body.classList.add(n.dataset.business+"-active");var e=document.querySelector(".business-type-select.active");e&&e.classList.remove("active"),n.classList.add("active");for(var t=document.querySelectorAll(".hcr-menu"),i=0;i<t.length;i++)t[i].style.visibility="visible";m.accordion(0,"top",function(e,n){n.el.classList.add("open"),console.log(e,n)});var o=document.querySelector(".business-container.visible");o&&(o.style.display="none",o.classList.remove("visible"));var r=document.querySelector("."+n.dataset.business+"-container");console.log(r),jQuery(r).fadeIn(),r.classList.add("visible"),jQuery("html, body").animate({scrollTop:jQuery(r).offset().top},1e3,function(){jQuery(r).find("h3").addClass("animated").addClass("pulse")}),c(Math.floor(Math.random()*a.length)),u(),window.waypoints=[],l.forEach(function(e,n){console.log("."+e),window.waypoints[n]=new Waypoint({element:document.querySelector("."+e),handler:function(e){console.log("loading..."),"down"===e?Math.floor(Math.random()*a.length):Math.floor(Math.random()*a.length)}})})})});var m=new OriDomi(document.querySelector(".hcr-menu"),{hPanels:3,ripple:2,shading:"hard",touchEnabled:!1});m.foldUp("top");var f=jQuery(".hcr-menu-item a");f.on("click",function(e,n){e.preventDefault(),console.log("."+e.target.href.split("#")[1]),jQuery("html, body").animate({scrollTop:jQuery("."+e.target.href.split("#")[1]+"-container").offset().top-100},1e3,function(){})});for(var p=[],y=0;y<f.length;y++){var w=f[y],g=jQuery(w).attr("href");p.push(g)}jQuery(window).scroll(function(){for(var e=jQuery(window).scrollTop(),n=jQuery(window).height(),t=jQuery(document).height(),i=0;i<p.length;i++){var o=p[i].replace("#",""),r=jQuery("."+o+"-container").offset().top-200,a=jQuery("."+o+"-container").height();e>=r&&r+a>e?jQuery("a[href='#"+o+"']").addClass("active"):jQuery("a[href='#"+o+"']").removeClass("active")}if(e+n==t&&!jQuery("nav li:last-child a").hasClass("active")){var s=jQuery(".nav-active").attr("href");jQuery("a[href='"+s+"']").removeClass("active"),jQuery("nav li:last-child a").addClass("active")}})},{"../node_modules/waypoints/lib/noframework.waypoints":2}],2:[function(e,n,t){!function(){function e(i){if(!i)throw new Error("No options passed to Waypoint constructor");if(!i.element)throw new Error("No element option passed to Waypoint constructor");if(!i.handler)throw new Error("No handler option passed to Waypoint constructor");this.key="waypoint-"+n,this.options=e.Adapter.extend({},e.defaults,i),this.element=this.options.element,this.adapter=new e.Adapter(this.element),this.callback=i.handler,this.axis=this.options.horizontal?"horizontal":"vertical",this.enabled=this.options.enabled,this.triggerPoint=null,this.group=e.Group.findOrCreate({name:this.options.group,axis:this.axis}),this.context=e.Context.findOrCreateByElement(this.options.context),e.offsetAliases[this.options.offset]&&(this.options.offset=e.offsetAliases[this.options.offset]),this.group.add(this),this.context.add(this),t[this.key]=this,n+=1}var n=0,t={};e.prototype.queueTrigger=function(e){this.group.queueTrigger(this,e)},e.prototype.trigger=function(e){this.enabled&&this.callback&&this.callback.apply(this,e)},e.prototype.destroy=function(){this.context.remove(this),this.group.remove(this),delete t[this.key]},e.prototype.disable=function(){return this.enabled=!1,this},e.prototype.enable=function(){return this.context.refresh(),this.enabled=!0,this},e.prototype.next=function(){return this.group.next(this)},e.prototype.previous=function(){return this.group.previous(this)},e.invokeAll=function(e){var n=[];for(var i in t)n.push(t[i]);for(var o=0,r=n.length;r>o;o++)n[o][e]()},e.destroyAll=function(){e.invokeAll("destroy")},e.disableAll=function(){e.invokeAll("disable")},e.enableAll=function(){e.invokeAll("enable")},e.refreshAll=function(){e.Context.refreshAll()},e.viewportHeight=function(){return window.innerHeight||document.documentElement.clientHeight},e.viewportWidth=function(){return document.documentElement.clientWidth},e.adapters=[],e.defaults={context:window,continuous:!0,enabled:!0,group:"default",horizontal:!1,offset:0},e.offsetAliases={"bottom-in-view":function(){return this.context.innerHeight()-this.adapter.outerHeight()},"right-in-view":function(){return this.context.innerWidth()-this.adapter.outerWidth()}},window.Waypoint=e}(),function(){function e(e){window.setTimeout(e,1e3/60)}function n(e){this.element=e,this.Adapter=o.Adapter,this.adapter=new this.Adapter(e),this.key="waypoint-context-"+t,this.didScroll=!1,this.didResize=!1,this.oldScroll={x:this.adapter.scrollLeft(),y:this.adapter.scrollTop()},this.waypoints={vertical:{},horizontal:{}},e.waypointContextKey=this.key,i[e.waypointContextKey]=this,t+=1,this.createThrottledScrollHandler(),this.createThrottledResizeHandler()}var t=0,i={},o=window.Waypoint,r=window.onload;n.prototype.add=function(e){var n=e.options.horizontal?"horizontal":"vertical";this.waypoints[n][e.key]=e,this.refresh()},n.prototype.checkEmpty=function(){var e=this.Adapter.isEmptyObject(this.waypoints.horizontal),n=this.Adapter.isEmptyObject(this.waypoints.vertical);e&&n&&(this.adapter.off(".waypoints"),delete i[this.key])},n.prototype.createThrottledResizeHandler=function(){function e(){n.handleResize(),n.didResize=!1}var n=this;this.adapter.on("resize.waypoints",function(){n.didResize||(n.didResize=!0,o.requestAnimationFrame(e))})},n.prototype.createThrottledScrollHandler=function(){function e(){n.handleScroll(),n.didScroll=!1}var n=this;this.adapter.on("scroll.waypoints",function(){n.didScroll&&!o.isTouch||(n.didScroll=!0,o.requestAnimationFrame(e))})},n.prototype.handleResize=function(){o.Context.refreshAll()},n.prototype.handleScroll=function(){var e={},n={horizontal:{newScroll:this.adapter.scrollLeft(),oldScroll:this.oldScroll.x,forward:"right",backward:"left"},vertical:{newScroll:this.adapter.scrollTop(),oldScroll:this.oldScroll.y,forward:"down",backward:"up"}};for(var t in n){var i=n[t],o=i.newScroll>i.oldScroll,r=o?i.forward:i.backward;for(var a in this.waypoints[t]){var s=this.waypoints[t][a],l=i.oldScroll<s.triggerPoint,u=i.newScroll>=s.triggerPoint,d=l&&u,c=!l&&!u;(d||c)&&(s.queueTrigger(r),e[s.group.id]=s.group)}}for(var h in e)e[h].flushTriggers();this.oldScroll={x:n.horizontal.newScroll,y:n.vertical.newScroll}},n.prototype.innerHeight=function(){return this.element==this.element.window?o.viewportHeight():this.adapter.innerHeight()},n.prototype.remove=function(e){delete this.waypoints[e.axis][e.key],this.checkEmpty()},n.prototype.innerWidth=function(){return this.element==this.element.window?o.viewportWidth():this.adapter.innerWidth()},n.prototype.destroy=function(){var e=[];for(var n in this.waypoints)for(var t in this.waypoints[n])e.push(this.waypoints[n][t]);for(var i=0,o=e.length;o>i;i++)e[i].destroy()},n.prototype.refresh=function(){var e,n=this.element==this.element.window,t=n?void 0:this.adapter.offset(),i={};this.handleScroll(),e={horizontal:{contextOffset:n?0:t.left,contextScroll:n?0:this.oldScroll.x,contextDimension:this.innerWidth(),oldScroll:this.oldScroll.x,forward:"right",backward:"left",offsetProp:"left"},vertical:{contextOffset:n?0:t.top,contextScroll:n?0:this.oldScroll.y,contextDimension:this.innerHeight(),oldScroll:this.oldScroll.y,forward:"down",backward:"up",offsetProp:"top"}};for(var r in e){var a=e[r];for(var s in this.waypoints[r]){var l,u,d,c,h,m=this.waypoints[r][s],f=m.options.offset,p=m.triggerPoint,y=0,w=null==p;m.element!==m.element.window&&(y=m.adapter.offset()[a.offsetProp]),"function"==typeof f?f=f.apply(m):"string"==typeof f&&(f=parseFloat(f),m.options.offset.indexOf("%")>-1&&(f=Math.ceil(a.contextDimension*f/100))),l=a.contextScroll-a.contextOffset,m.triggerPoint=y+l-f,u=p<a.oldScroll,d=m.triggerPoint>=a.oldScroll,c=u&&d,h=!u&&!d,!w&&c?(m.queueTrigger(a.backward),i[m.group.id]=m.group):!w&&h?(m.queueTrigger(a.forward),i[m.group.id]=m.group):w&&a.oldScroll>=m.triggerPoint&&(m.queueTrigger(a.forward),i[m.group.id]=m.group)}}return o.requestAnimationFrame(function(){for(var e in i)i[e].flushTriggers()}),this},n.findOrCreateByElement=function(e){return n.findByElement(e)||new n(e)},n.refreshAll=function(){for(var e in i)i[e].refresh()},n.findByElement=function(e){return i[e.waypointContextKey]},window.onload=function(){r&&r(),n.refreshAll()},o.requestAnimationFrame=function(n){var t=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||e;t.call(window,n)},o.Context=n}(),function(){function e(e,n){return e.triggerPoint-n.triggerPoint}function n(e,n){return n.triggerPoint-e.triggerPoint}function t(e){this.name=e.name,this.axis=e.axis,this.id=this.name+"-"+this.axis,this.waypoints=[],this.clearTriggerQueues(),i[this.axis][this.name]=this}var i={vertical:{},horizontal:{}},o=window.Waypoint;t.prototype.add=function(e){this.waypoints.push(e)},t.prototype.clearTriggerQueues=function(){this.triggerQueues={up:[],down:[],left:[],right:[]}},t.prototype.flushTriggers=function(){for(var t in this.triggerQueues){var i=this.triggerQueues[t],o="up"===t||"left"===t;i.sort(o?n:e);for(var r=0,a=i.length;a>r;r+=1){var s=i[r];(s.options.continuous||r===i.length-1)&&s.trigger([t])}}this.clearTriggerQueues()},t.prototype.next=function(n){this.waypoints.sort(e);var t=o.Adapter.inArray(n,this.waypoints),i=t===this.waypoints.length-1;return i?null:this.waypoints[t+1]},t.prototype.previous=function(n){this.waypoints.sort(e);var t=o.Adapter.inArray(n,this.waypoints);return t?this.waypoints[t-1]:null},t.prototype.queueTrigger=function(e,n){this.triggerQueues[n].push(e)},t.prototype.remove=function(e){var n=o.Adapter.inArray(e,this.waypoints);n>-1&&this.waypoints.splice(n,1)},t.prototype.first=function(){return this.waypoints[0]},t.prototype.last=function(){return this.waypoints[this.waypoints.length-1]},t.findOrCreate=function(e){return i[e.axis][e.name]||new t(e)},o.Group=t}(),function(){function e(e){return e===e.window}function n(n){return e(n)?n:n.defaultView}function t(e){this.element=e,this.handlers={}}var i=window.Waypoint;t.prototype.innerHeight=function(){var n=e(this.element);return n?this.element.innerHeight:this.element.clientHeight},t.prototype.innerWidth=function(){var n=e(this.element);return n?this.element.innerWidth:this.element.clientWidth},t.prototype.off=function(e,n){function t(e,n,t){for(var i=0,o=n.length-1;o>i;i++){var r=n[i];t&&t!==r||e.removeEventListener(r)}}var i=e.split("."),o=i[0],r=i[1],a=this.element;if(r&&this.handlers[r]&&o)t(a,this.handlers[r][o],n),this.handlers[r][o]=[];else if(o)for(var s in this.handlers)t(a,this.handlers[s][o]||[],n),this.handlers[s][o]=[];else if(r&&this.handlers[r]){for(var l in this.handlers[r])t(a,this.handlers[r][l],n);this.handlers[r]={}}},t.prototype.offset=function(){if(!this.element.ownerDocument)return null;var e=this.element.ownerDocument.documentElement,t=n(this.element.ownerDocument),i={top:0,left:0};return this.element.getBoundingClientRect&&(i=this.element.getBoundingClientRect()),{top:i.top+t.pageYOffset-e.clientTop,left:i.left+t.pageXOffset-e.clientLeft}},t.prototype.on=function(e,n){var t=e.split("."),i=t[0],o=t[1]||"__default",r=this.handlers[o]=this.handlers[o]||{},a=r[i]=r[i]||[];a.push(n),this.element.addEventListener(i,n)},t.prototype.outerHeight=function(n){var t,i=this.innerHeight();return n&&!e(this.element)&&(t=window.getComputedStyle(this.element),i+=parseInt(t.marginTop,10),i+=parseInt(t.marginBottom,10)),i},t.prototype.outerWidth=function(n){var t,i=this.innerWidth();return n&&!e(this.element)&&(t=window.getComputedStyle(this.element),i+=parseInt(t.marginLeft,10),i+=parseInt(t.marginRight,10)),i},t.prototype.scrollLeft=function(){var e=n(this.element);return e?e.pageXOffset:this.element.scrollLeft},t.prototype.scrollTop=function(){var e=n(this.element);return e?e.pageYOffset:this.element.scrollTop},t.extend=function(){function e(e,n){if("object"===("undefined"==typeof e?"undefined":_typeof(e))&&"object"===("undefined"==typeof n?"undefined":_typeof(n)))for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e}for(var n=Array.prototype.slice.call(arguments),t=1,i=n.length;i>t;t++)e(n[0],n[t]);return n[0]},t.inArray=function(e,n,t){return null==n?-1:n.indexOf(e,t)},t.isEmptyObject=function(e){for(var n in e)return!1;return!0},i.adapters.push({name:"noframework",Adapter:t}),i.Adapter=t}()},{}]},{},[1]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5taW4uanMiLCJhcHAuanMiXSwibmFtZXMiOlsiX3R5cGVvZiIsIlN5bWJvbCIsIml0ZXJhdG9yIiwib2JqIiwiY29uc3RydWN0b3IiLCJlIiwidCIsIm4iLCJyIiwicyIsIm8iLCJ1IiwiYSIsInJlcXVpcmUiLCJpIiwiRXJyb3IiLCJmIiwiZXhwb3J0cyIsImNhbGwiLCJsZW5ndGgiLCIxIiwibW9kdWxlIiwiZG9jU3R5bGUiLCJkb2N1bWVudCIsImJvZHkiLCJzdHlsZSIsImJnUGF0aCIsImxvY2F0aW9uIiwiaW1nRXh0IiwiYmdzIiwiYmdJbWFnZXNMb2FkZWQiLCJjYXRlZ29yeVNlY3Rpb25zIiwibG9hZFdheXBvaW50cyIsIldheXBvaW50IiwiZWxlbWVudCIsImdldEVsZW1lbnRCeUlkIiwiaGFuZGxlciIsImRpcmVjdGlvbiIsImNvbnNvbGUiLCJsb2ciLCJ0aGlzIiwiY2xpZW50SGVpZ2h0IiwialF1ZXJ5IiwiYWRkQ2xhc3MiLCJvbmUiLCJyZW1vdmVDbGFzcyIsIm9mZnNldCIsIndpbmRvdyIsImlubmVySGVpZ2h0Iiwid2F5cG9pbnRzIiwiZm9yRWFjaCIsImluZGV4IiwicXVlcnlTZWxlY3RvciIsImxvYWRCZyIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsImJnIiwiSW1hZ2UiLCJzcmMiLCJiZ0NhbkxvYWQiLCJzZXRUaW1lb3V0IiwiYmFja2dyb3VuZEltYWdlIiwiYnVzaW5lc3NTZWxlY3QiLCJlYWNoIiwiZWwiLCJvbiIsImhpZGUiLCJkYXRhc2V0IiwiYnVzaW5lc3MiLCJwYXJlbnQiLCJzaG93IiwiY2xhc3NMaXN0IiwiYWRkIiwiY3VycmVudEFjdGl2ZSIsInJlbW92ZSIsIm1lbnVzIiwicXVlcnlTZWxlY3RvckFsbCIsInZpc2liaWxpdHkiLCJmb2xkTWVudSIsImFjY29yZGlvbiIsImV2Iiwib3JpIiwiY3VycmVudFZpc2libGUiLCJkaXNwbGF5Iiwic2VjdGlvblRvU2hvdyIsImZhZGVJbiIsImFuaW1hdGUiLCJzY3JvbGxUb3AiLCJ0b3AiLCJmaW5kIiwiT3JpRG9taSIsImhQYW5lbHMiLCJyaXBwbGUiLCJzaGFkaW5nIiwidG91Y2hFbmFibGVkIiwiZm9sZFVwIiwiaGNyTWVudUl0ZW1MaW5rIiwicHJldmVudERlZmF1bHQiLCJ0YXJnZXQiLCJocmVmIiwic3BsaXQiLCJhQXJyYXkiLCJhQ2hpbGQiLCJhaHJlZiIsImF0dHIiLCJwdXNoIiwic2Nyb2xsIiwid2luZG93UG9zIiwid2luZG93SGVpZ2h0IiwiaGVpZ2h0IiwiZG9jSGVpZ2h0IiwiX2kiLCJ0aGVJRCIsInJlcGxhY2UiLCJkaXZQb3MiLCJkaXZIZWlnaHQiLCJoYXNDbGFzcyIsIm5hdkFjdGl2ZUN1cnJlbnQiLCIuLi9ub2RlX21vZHVsZXMvd2F5cG9pbnRzL2xpYi9ub2ZyYW1ld29yay53YXlwb2ludHMiLCIyIiwib3B0aW9ucyIsImtleSIsImtleUNvdW50ZXIiLCJBZGFwdGVyIiwiZXh0ZW5kIiwiZGVmYXVsdHMiLCJhZGFwdGVyIiwiY2FsbGJhY2siLCJheGlzIiwiaG9yaXpvbnRhbCIsImVuYWJsZWQiLCJ0cmlnZ2VyUG9pbnQiLCJncm91cCIsIkdyb3VwIiwiZmluZE9yQ3JlYXRlIiwibmFtZSIsImNvbnRleHQiLCJDb250ZXh0IiwiZmluZE9yQ3JlYXRlQnlFbGVtZW50Iiwib2Zmc2V0QWxpYXNlcyIsImFsbFdheXBvaW50cyIsInByb3RvdHlwZSIsInF1ZXVlVHJpZ2dlciIsInRyaWdnZXIiLCJhcmdzIiwiYXBwbHkiLCJkZXN0cm95IiwiZGlzYWJsZSIsImVuYWJsZSIsInJlZnJlc2giLCJuZXh0IiwicHJldmlvdXMiLCJpbnZva2VBbGwiLCJtZXRob2QiLCJhbGxXYXlwb2ludHNBcnJheSIsIndheXBvaW50S2V5IiwiZW5kIiwiZGVzdHJveUFsbCIsImRpc2FibGVBbGwiLCJlbmFibGVBbGwiLCJyZWZyZXNoQWxsIiwidmlld3BvcnRIZWlnaHQiLCJkb2N1bWVudEVsZW1lbnQiLCJ2aWV3cG9ydFdpZHRoIiwiY2xpZW50V2lkdGgiLCJhZGFwdGVycyIsImNvbnRpbnVvdXMiLCJib3R0b20taW4tdmlldyIsIm91dGVySGVpZ2h0IiwicmlnaHQtaW4tdmlldyIsImlubmVyV2lkdGgiLCJvdXRlcldpZHRoIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lU2hpbSIsImRpZFNjcm9sbCIsImRpZFJlc2l6ZSIsIm9sZFNjcm9sbCIsIngiLCJzY3JvbGxMZWZ0IiwieSIsInZlcnRpY2FsIiwid2F5cG9pbnRDb250ZXh0S2V5IiwiY29udGV4dHMiLCJjcmVhdGVUaHJvdHRsZWRTY3JvbGxIYW5kbGVyIiwiY3JlYXRlVGhyb3R0bGVkUmVzaXplSGFuZGxlciIsIm9sZFdpbmRvd0xvYWQiLCJvbmxvYWQiLCJ3YXlwb2ludCIsImNoZWNrRW1wdHkiLCJob3Jpem9udGFsRW1wdHkiLCJpc0VtcHR5T2JqZWN0IiwidmVydGljYWxFbXB0eSIsIm9mZiIsInJlc2l6ZUhhbmRsZXIiLCJzZWxmIiwiaGFuZGxlUmVzaXplIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwic2Nyb2xsSGFuZGxlciIsImhhbmRsZVNjcm9sbCIsImlzVG91Y2giLCJ0cmlnZ2VyZWRHcm91cHMiLCJheGVzIiwibmV3U2Nyb2xsIiwiZm9yd2FyZCIsImJhY2t3YXJkIiwiYXhpc0tleSIsImlzRm9yd2FyZCIsIndhc0JlZm9yZVRyaWdnZXJQb2ludCIsIm5vd0FmdGVyVHJpZ2dlclBvaW50IiwiY3Jvc3NlZEZvcndhcmQiLCJjcm9zc2VkQmFja3dhcmQiLCJpZCIsImdyb3VwS2V5IiwiZmx1c2hUcmlnZ2VycyIsImlzV2luZG93IiwiY29udGV4dE9mZnNldCIsInVuZGVmaW5lZCIsImxlZnQiLCJjb250ZXh0U2Nyb2xsIiwiY29udGV4dERpbWVuc2lvbiIsIm9mZnNldFByb3AiLCJjb250ZXh0TW9kaWZpZXIiLCJ3YXNCZWZvcmVTY3JvbGwiLCJub3dBZnRlclNjcm9sbCIsInRyaWdnZXJlZEJhY2t3YXJkIiwidHJpZ2dlcmVkRm9yd2FyZCIsImFkanVzdG1lbnQiLCJvbGRUcmlnZ2VyUG9pbnQiLCJlbGVtZW50T2Zmc2V0IiwiZnJlc2hXYXlwb2ludCIsInBhcnNlRmxvYXQiLCJpbmRleE9mIiwiY2VpbCIsImZpbmRCeUVsZW1lbnQiLCJjb250ZXh0SWQiLCJyZXF1ZXN0Rm4iLCJtb3pSZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJ3ZWJraXRSZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJieVRyaWdnZXJQb2ludCIsImIiLCJieVJldmVyc2VUcmlnZ2VyUG9pbnQiLCJjbGVhclRyaWdnZXJRdWV1ZXMiLCJncm91cHMiLCJ0cmlnZ2VyUXVldWVzIiwidXAiLCJkb3duIiwicmlnaHQiLCJyZXZlcnNlIiwic29ydCIsImluQXJyYXkiLCJpc0xhc3QiLCJzcGxpY2UiLCJmaXJzdCIsImxhc3QiLCJnZXRXaW5kb3ciLCJkZWZhdWx0VmlldyIsIk5vRnJhbWV3b3JrQWRhcHRlciIsImhhbmRsZXJzIiwiaXNXaW4iLCJldmVudCIsInJlbW92ZUxpc3RlbmVycyIsImxpc3RlbmVycyIsImxpc3RlbmVyIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImV2ZW50UGFydHMiLCJldmVudFR5cGUiLCJuYW1lc3BhY2UiLCJucyIsInR5cGUiLCJvd25lckRvY3VtZW50Iiwid2luIiwicmVjdCIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsInBhZ2VZT2Zmc2V0IiwiY2xpZW50VG9wIiwicGFnZVhPZmZzZXQiLCJjbGllbnRMZWZ0IiwibnNIYW5kbGVycyIsIm5zVHlwZUxpc3QiLCJhZGRFdmVudExpc3RlbmVyIiwiaW5jbHVkZU1hcmdpbiIsImNvbXB1dGVkU3R5bGUiLCJnZXRDb21wdXRlZFN0eWxlIiwicGFyc2VJbnQiLCJtYXJnaW5Ub3AiLCJtYXJnaW5Cb3R0b20iLCJ3aWR0aCIsIm1hcmdpbkxlZnQiLCJtYXJnaW5SaWdodCIsIm1lcmdlIiwiaGFzT3duUHJvcGVydHkiLCJBcnJheSIsInNsaWNlIiwiYXJndW1lbnRzIiwiYXJyYXkiXSwibWFwcGluZ3MiOiJBQUFBLFlBRUEsSUFBSUEsU0FBNEIsa0JBQVhDLFNBQW9E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UUFDekIsT0FBTzRPLEdBQU1BLEVBQUlHLFlBQWN6TyxLQUFLTixRQUFRc0QsV0FHOUN3SyxFQUFtQm5JLE9BQVMsV0FHMUIsUUFBU29LLEdBQU05TCxFQUFRaEcsR0FDckIsR0FBc0IsWUFBbEIsbUJBQU9nRyxHQUFQLFlBQUFuRyxRQUFPbUcsS0FBc0MsWUFBZixtQkFBT2hHLEdBQVAsWUFBQUgsUUFBT0csSUFDdkMsSUFBSyxHQUFJdUgsS0FBT3ZILEdBQ1ZBLEVBQUkrUixlQUFleEssS0FDckJ2QixFQUFPdUIsR0FBT3ZILEVBQUl1SCxHQUt4QixPQUFPdkIsR0FHVCxJQUFLLEdBZEQ4QyxHQUFPa0osTUFBTXJKLFVBQVVzSixNQUFNbFIsS0FBS21SLFdBYzdCdlIsRUFBSSxFQUFHK0ksRUFBTVosRUFBSzlILE9BQVkwSSxFQUFKL0ksRUFBU0EsSUFDMUNtUixFQUFNaEosRUFBSyxHQUFJQSxFQUFLbkksR0FFdEIsT0FBT21JLEdBQUssSUFHZCtHLEVBQW1CUCxRQUFVLFNBQVN2TixFQUFTb1EsRUFBT3hSLEdBQ3BELE1BQWdCLE9BQVR3UixFQUFnQixHQUFLQSxFQUFNL0QsUUFBUXJNLEVBQVNwQixJQUdyRGtQLEVBQW1CbEUsY0FBZ0IsU0FBUzNMLEdBRTFDLElBQUssR0FBSXFJLEtBQVFySSxHQUNmLE9BQU8sQ0FFVCxRQUFPLEdBR1Q4QixFQUFTcUksU0FBUzVELE1BQ2hCOEIsS0FBTSxjQUNOWixRQUFTb0ksSUFFWC9OLEVBQVMyRixRQUFVb0ksZUFHViIsImZpbGUiOiJhcHAubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBfdHlwZW9mID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIgPyBmdW5jdGlvbiAob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9IDogZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9O1xuXG4oZnVuY3Rpb24gZSh0LCBuLCByKSB7XG4gIGZ1bmN0aW9uIHMobywgdSkge1xuICAgIGlmICghbltvXSkge1xuICAgICAgaWYgKCF0W29dKSB7XG4gICAgICAgIHZhciBhID0gdHlwZW9mIHJlcXVpcmUgPT0gXCJmdW5jdGlvblwiICYmIHJlcXVpcmU7aWYgKCF1ICYmIGEpIHJldHVybiBhKG8sICEwKTtpZiAoaSkgcmV0dXJuIGkobywgITApO3Rocm93IG5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIgKyBvICsgXCInXCIpO1xuICAgICAgfXZhciBmID0gbltvXSA9IHsgZXhwb3J0czoge30gfTt0W29dWzBdLmNhbGwoZi5leHBvcnRzLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICB2YXIgbiA9IHRbb11bMV1bZV07cmV0dXJuIHMobiA/IG4gOiBlKTtcbiAgICAgIH0sIGYsIGYuZXhwb3J0cywgZSwgdCwgbiwgcik7XG4gICAgfXJldHVybiBuW29dLmV4cG9ydHM7XG4gIH12YXIgaSA9IHR5cGVvZiByZXF1aXJlID09IFwiZnVuY3Rpb25cIiAmJiByZXF1aXJlO2ZvciAodmFyIG8gPSAwOyBvIDwgci5sZW5ndGg7IG8rKykge1xuICAgIHMocltvXSk7XG4gIH1yZXR1cm4gcztcbn0pKHsgMTogW2Z1bmN0aW9uIChyZXF1aXJlLCBtb2R1bGUsIGV4cG9ydHMpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICByZXF1aXJlKCcuLi9ub2RlX21vZHVsZXMvd2F5cG9pbnRzL2xpYi9ub2ZyYW1ld29yay53YXlwb2ludHMnKTtcblxuICAgIHZhciBkb2NTdHlsZSA9IGRvY3VtZW50LmJvZHkuc3R5bGU7XG4gICAgdmFyIGJnUGF0aCA9IGRvY3VtZW50LmxvY2F0aW9uICsgJ2ltYWdlcy9iZy8nO1xuICAgIHZhciBpbWdFeHQgPSAnLnBuZyc7XG4gICAgdmFyIGJncyA9IFsnRmVhdGhlcl9UT05FJywgJ0R1Y2tQcmludHNfRmVhdGhlcl9UT05FJywgJ1dhbGxQYXBlcjIuNScsICdXYWxsUGFwZXIzJywgJ1dhbGxQYXBlcjMuNScsICdXYWxsUGFwZXI0JywgJ1dhbGxQYXBlcjQuNScsICdXYWxsUGFwZXI1LjUnLCAnV2FsbFBhcGVyNS41X3RvbmUnLCAnV2FsbFBhcGVyNicsICdXYWxsUGFwZXI2LjUnLCAnV2FsbFBhcGVyNy41JywgJ1dhbGxQYXBlcjcuNV90b25lJ107XG4gICAgdmFyIGJnSW1hZ2VzTG9hZGVkID0gZmFsc2U7XG4gICAgdmFyIGNhdGVnb3J5U2VjdGlvbnMgPSBbJ3NtLW5ldy1lbXBsb3llZXMtY29udGFpbmVyJywgJ3NtLWN1cnJlbnQtZW1wbG95ZWVzLWNvbnRhaW5lcicsICdzbS1leGl0aW5nLWVtcGxveWVlcy1jb250YWluZXInLCAnc20tY2FkaWxsYWMtdGF4LWNvbnRhaW5lcicsICdzbS1wZW5hbHRpZXMtY29udGFpbmVyJywgJ3NtLWJlbmVmaXRzLXJlcXVpcmVtZW50cy1jb250YWluZXInLCAnc20tdm9sdW50YXJ5LWluc3VyYW5jZS1jb250YWluZXInLCAnc20tZXhjaGFuZ2VzLWNvbnRhaW5lcicsICdzbS13aGF0cy1uZXh0LWNvbnRhaW5lcicsICduZXctZW1wbG95ZWVzLWNvbnRhaW5lcicsICdjdXJyZW50LWVtcGxveWVlcy1jb250YWluZXInLCAnZXhpdGluZy1lbXBsb3llZXMtY29udGFpbmVyJywgJ2NhZGlsbGFjLXRheC1jb250YWluZXInLCAncGVuYWx0aWVzLWNvbnRhaW5lcicsICdiZW5lZml0cy1yZXF1aXJlbWVudHMtY29udGFpbmVyJywgJ3ZvbHVudGFyeS1pbnN1cmFuY2UtY29udGFpbmVyJywgJ2V4Y2hhbmdlcy1jb250YWluZXInLCAnd2hhdHMtbmV4dC1jb250YWluZXInXTtcblxuICAgIHZhciBsb2FkV2F5cG9pbnRzID0gZnVuY3Rpb24gbG9hZFdheXBvaW50cygpIHtcbiAgICAgIC8vIEJlbmVmaXRzXG4gICAgICBuZXcgV2F5cG9pbnQoe1xuICAgICAgICBlbGVtZW50OiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc20tYmVuZWZpdHMtcmVxdWlyZW1lbnRzJyksXG4gICAgICAgIGhhbmRsZXI6IGZ1bmN0aW9uIGhhbmRsZXIoZGlyZWN0aW9uKSB7XG4gICAgICAgICAgY29uc29sZS5sb2codGhpcy5lbGVtZW50LmNsaWVudEhlaWdodCk7XG4gICAgICAgICAgalF1ZXJ5KCcjc20tYmVuZWZpdHMtcmVxdWlyZW1lbnRzOm5vdCguc2hvd24pJykuYWRkQ2xhc3MoJ2FuaW1hdGVkIGJvdW5jZUluRG93biBzaG93bicpO1xuICAgICAgICAgIGpRdWVyeSgnI3NtLWJlbmVmaXRzLXJlcXVpcmVtZW50cycpLm9uZSgnd2Via2l0QW5pbWF0aW9uRW5kIG9hbmltYXRpb25lbmQgbXNBbmltYXRpb25FbmQgYW5pbWF0aW9uZW5kJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgalF1ZXJ5KCcjc20tYmVuZWZpdHMtcmVxdWlyZW1lbnRzJykucmVtb3ZlQ2xhc3MoJ2FuaW1hdGVkIGJvdW5jZUluRG93bicpO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIC8vZGlyZWN0aW9uID09PSAnZG93bicgPyBsb2FkQmcoaW5kZXggKyAxKSA6IGxvYWRCZyhpbmRleCk7XG4gICAgICAgIH0sXG4gICAgICAgIG9mZnNldDogZnVuY3Rpb24gb2Zmc2V0KCkge1xuICAgICAgICAgIHJldHVybiB3aW5kb3cuaW5uZXJIZWlnaHQgLSB0aGlzLmVsZW1lbnQuY2xpZW50SGVpZ2h0ICogMjtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIC8vIE5ldyBFbXBsb3llZXNcbiAgICAgIG5ldyBXYXlwb2ludCh7XG4gICAgICAgIGVsZW1lbnQ6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzbS1uZXctZW1wbG95ZWVzJyksXG4gICAgICAgIGhhbmRsZXI6IGZ1bmN0aW9uIGhhbmRsZXIoZGlyZWN0aW9uKSB7XG4gICAgICAgICAgY29uc29sZS5sb2codGhpcy5lbGVtZW50LmNsaWVudEhlaWdodCk7XG4gICAgICAgICAgalF1ZXJ5KCcjc20tbmV3LWVtcGxveWVlczpub3QoLnNob3duKScpLmFkZENsYXNzKCdhbmltYXRlZCB6b29tSW5VcCBzaG93bicpO1xuICAgICAgICAgIGpRdWVyeSgnI3NtLW5ldy1lbXBsb3llZXMnKS5vbmUoJ3dlYmtpdEFuaW1hdGlvbkVuZCBvYW5pbWF0aW9uZW5kIG1zQW5pbWF0aW9uRW5kIGFuaW1hdGlvbmVuZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGpRdWVyeSgnI3NtLW5ldy1lbXBsb3llZXMnKS5yZW1vdmVDbGFzcygnYW5pbWF0ZWQgem9vbUluVXAgICcpO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIC8vZGlyZWN0aW9uID09PSAnZG93bicgPyBsb2FkQmcoaW5kZXggKyAxKSA6IGxvYWRCZyhpbmRleCk7XG4gICAgICAgIH0sXG4gICAgICAgIG9mZnNldDogZnVuY3Rpb24gb2Zmc2V0KCkge1xuICAgICAgICAgIHJldHVybiB3aW5kb3cuaW5uZXJIZWlnaHQgLSB0aGlzLmVsZW1lbnQuY2xpZW50SGVpZ2h0ICogMjtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIC8vIEN1cnJlbnQgRW1wbG95ZWVzXG4gICAgICBuZXcgV2F5cG9pbnQoe1xuICAgICAgICBlbGVtZW50OiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc20tY3VycmVudC1lbXBsb3llZXMnKSxcbiAgICAgICAgaGFuZGxlcjogZnVuY3Rpb24gaGFuZGxlcihkaXJlY3Rpb24pIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmVsZW1lbnQuY2xpZW50SGVpZ2h0KTtcbiAgICAgICAgICBqUXVlcnkoJyNzbS1jdXJyZW50LWVtcGxveWVlczpub3QoLnNob3duKScpLmFkZENsYXNzKCdhbmltYXRlZCBqZWxsbyBzaG93bicpO1xuICAgICAgICAgIGpRdWVyeSgnI3NtLWN1cnJlbnQtZW1wbG95ZWVzJykub25lKCd3ZWJraXRBbmltYXRpb25FbmQgb2FuaW1hdGlvbmVuZCBtc0FuaW1hdGlvbkVuZCBhbmltYXRpb25lbmQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBqUXVlcnkoJyNzbS1jdXJyZW50LWVtcGxveWVlcycpLnJlbW92ZUNsYXNzKCdhbmltYXRlZCBqZWxsbyAgJyk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgLy9kaXJlY3Rpb24gPT09ICdkb3duJyA/IGxvYWRCZyhpbmRleCArIDEpIDogbG9hZEJnKGluZGV4KTtcbiAgICAgICAgfSxcbiAgICAgICAgb2Zmc2V0OiBmdW5jdGlvbiBvZmZzZXQoKSB7XG4gICAgICAgICAgcmV0dXJuIHdpbmRvdy5pbm5lckhlaWdodCAtIHRoaXMuZWxlbWVudC5jbGllbnRIZWlnaHQgKiAyO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgLy8gRXhpdGluZyBFbXBsb3llZXNcbiAgICAgIG5ldyBXYXlwb2ludCh7XG4gICAgICAgIGVsZW1lbnQ6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzbS1leGl0aW5nLWVtcGxveWVlcycpLFxuICAgICAgICBoYW5kbGVyOiBmdW5jdGlvbiBoYW5kbGVyKGRpcmVjdGlvbikge1xuICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuZWxlbWVudC5jbGllbnRIZWlnaHQpO1xuICAgICAgICAgIGpRdWVyeSgnI3NtLWV4aXRpbmctZW1wbG95ZWVzOm5vdCguc2hvd24pJykuYWRkQ2xhc3MoJ2FuaW1hdGVkIGZsaXAgc2hvd24nKTtcbiAgICAgICAgICBqUXVlcnkoJyNzbS1leGl0aW5nLWVtcGxveWVlcycpLm9uZSgnd2Via2l0QW5pbWF0aW9uRW5kIG9hbmltYXRpb25lbmQgbXNBbmltYXRpb25FbmQgYW5pbWF0aW9uZW5kJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgalF1ZXJ5KCcjc20tZXhpdGluZy1lbXBsb3llZXMnKS5yZW1vdmVDbGFzcygnYW5pbWF0ZWQgZmxpcCcpO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIC8vZGlyZWN0aW9uID09PSAnZG93bicgPyBsb2FkQmcoaW5kZXggKyAxKSA6IGxvYWRCZyhpbmRleCk7XG4gICAgICAgIH0sXG4gICAgICAgIG9mZnNldDogZnVuY3Rpb24gb2Zmc2V0KCkge1xuICAgICAgICAgIHJldHVybiB3aW5kb3cuaW5uZXJIZWlnaHQgLSB0aGlzLmVsZW1lbnQuY2xpZW50SGVpZ2h0ICogMjtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIC8vIFBlbmFsdGllc1xuICAgICAgbmV3IFdheXBvaW50KHtcbiAgICAgICAgZWxlbWVudDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NtLXBlbmFsdGllcycpLFxuICAgICAgICBoYW5kbGVyOiBmdW5jdGlvbiBoYW5kbGVyKGRpcmVjdGlvbikge1xuICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuZWxlbWVudC5jbGllbnRIZWlnaHQpO1xuICAgICAgICAgIGpRdWVyeSgnI3NtLXBlbmFsdGllczpub3QoLnNob3duKScpLmFkZENsYXNzKCdhbmltYXRlZCB6b29tSW5VcCBzaG93bicpO1xuICAgICAgICAgIGpRdWVyeSgnI3NtLXBlbmFsdGllcycpLm9uZSgnd2Via2l0QW5pbWF0aW9uRW5kIG9hbmltYXRpb25lbmQgbXNBbmltYXRpb25FbmQgYW5pbWF0aW9uZW5kJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgalF1ZXJ5KCcjc20tcGVuYWx0aWVzJykucmVtb3ZlQ2xhc3MoJ2FuaW1hdGVkIHpvb21JblVwICAnKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICAvL2RpcmVjdGlvbiA9PT0gJ2Rvd24nID8gbG9hZEJnKGluZGV4ICsgMSkgOiBsb2FkQmcoaW5kZXgpO1xuICAgICAgICB9LFxuICAgICAgICBvZmZzZXQ6IGZ1bmN0aW9uIG9mZnNldCgpIHtcbiAgICAgICAgICByZXR1cm4gd2luZG93LmlubmVySGVpZ2h0IC0gdGhpcy5lbGVtZW50LmNsaWVudEhlaWdodCAqIDI7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICAvLyBDYWRpbGxhYyBUYXhcbiAgICAgIG5ldyBXYXlwb2ludCh7XG4gICAgICAgIGVsZW1lbnQ6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzbS1jYWRpbGxhYy10YXgnKSxcbiAgICAgICAgaGFuZGxlcjogZnVuY3Rpb24gaGFuZGxlcihkaXJlY3Rpb24pIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmVsZW1lbnQuY2xpZW50SGVpZ2h0KTtcbiAgICAgICAgICBqUXVlcnkoJyNzbS1jYWRpbGxhYy10YXg6bm90KC5zaG93biknKS5hZGRDbGFzcygnYW5pbWF0ZWQgem9vbUluIHNob3duJyk7XG4gICAgICAgICAgalF1ZXJ5KCcjc20tY2FkaWxsYWMtdGF4Jykub25lKCd3ZWJraXRBbmltYXRpb25FbmQgb2FuaW1hdGlvbmVuZCBtc0FuaW1hdGlvbkVuZCBhbmltYXRpb25lbmQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBqUXVlcnkoJyNzbS1jYWRpbGxhYy10YXgnKS5yZW1vdmVDbGFzcygnYW5pbWF0ZWQgem9vbUluICAnKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICAvL2RpcmVjdGlvbiA9PT0gJ2Rvd24nID8gbG9hZEJnKGluZGV4ICsgMSkgOiBsb2FkQmcoaW5kZXgpO1xuICAgICAgICB9LFxuICAgICAgICBvZmZzZXQ6IGZ1bmN0aW9uIG9mZnNldCgpIHtcbiAgICAgICAgICByZXR1cm4gd2luZG93LmlubmVySGVpZ2h0IC0gdGhpcy5lbGVtZW50LmNsaWVudEhlaWdodCAqIDI7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICAvLyBFeGNoYW5nZXNcbiAgICAgIG5ldyBXYXlwb2ludCh7XG4gICAgICAgIGVsZW1lbnQ6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzbS1leGNoYW5nZXMnKSxcbiAgICAgICAgaGFuZGxlcjogZnVuY3Rpb24gaGFuZGxlcihkaXJlY3Rpb24pIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnaGVyZScpO1xuICAgICAgICAgIGpRdWVyeSgnI3NtLWV4Y2hhbmdlczpub3QoLnNob3duKScpLmFkZENsYXNzKCdhbmltYXRlZCByb3RhdGVJbiBzaG93bicpO1xuICAgICAgICAgIGpRdWVyeSgnI3NtLWV4Y2hhbmdlcycpLm9uZSgnd2Via2l0QW5pbWF0aW9uRW5kIG9hbmltYXRpb25lbmQgbXNBbmltYXRpb25FbmQgYW5pbWF0aW9uZW5kJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgalF1ZXJ5KCcjc20tZXhjaGFuZ2VzJykucmVtb3ZlQ2xhc3MoJ2FuaW1hdGVkIHJvdGF0ZUluJyk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgLy9kaXJlY3Rpb24gPT09ICdkb3duJyA/IGxvYWRCZyhpbmRleCArIDEpIDogbG9hZEJnKGluZGV4KTtcbiAgICAgICAgfSxcbiAgICAgICAgb2Zmc2V0OiBmdW5jdGlvbiBvZmZzZXQoKSB7XG4gICAgICAgICAgcmV0dXJuIHdpbmRvdy5pbm5lckhlaWdodCAtIHRoaXMuZWxlbWVudC5jbGllbnRIZWlnaHQgKiAyO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgLy8gdm9sdW50YXJ5IGluc3VyYW5jZVxuICAgICAgbmV3IFdheXBvaW50KHtcbiAgICAgICAgZWxlbWVudDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NtLXZvbHVudGFyeS1pbnN1cmFuY2UnKSxcbiAgICAgICAgaGFuZGxlcjogZnVuY3Rpb24gaGFuZGxlcihkaXJlY3Rpb24pIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnaGVyZScpO1xuICAgICAgICAgIGpRdWVyeSgnI3NtLXZvbHVudGFyeS1pbnN1cmFuY2U6bm90KC5zaG93biknKS5hZGRDbGFzcygnYW5pbWF0ZWQgc2xpZGVJblVwIHNob3duJyk7XG4gICAgICAgICAgalF1ZXJ5KCcjc20tdm9sdW50YXJ5LWluc3VyYW5jZScpLm9uZSgnd2Via2l0QW5pbWF0aW9uRW5kIG9hbmltYXRpb25lbmQgbXNBbmltYXRpb25FbmQgYW5pbWF0aW9uZW5kJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgalF1ZXJ5KCcjc20tdm9sdW50YXJ5LWluc3VyYW5jZScpLnJlbW92ZUNsYXNzKCdhbmltYXRlZCBzbGlkZUluVXAnKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICAvL2RpcmVjdGlvbiA9PT0gJ2Rvd24nID8gbG9hZEJnKGluZGV4ICsgMSkgOiBsb2FkQmcoaW5kZXgpO1xuICAgICAgICB9LFxuICAgICAgICBvZmZzZXQ6IGZ1bmN0aW9uIG9mZnNldCgpIHtcbiAgICAgICAgICByZXR1cm4gd2luZG93LmlubmVySGVpZ2h0IC0gdGhpcy5lbGVtZW50LmNsaWVudEhlaWdodCAqIDI7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgLy8gd2hhdCdzIG5leHQgaW5zdXJhbmNlXG4gICAgICBuZXcgV2F5cG9pbnQoe1xuICAgICAgICBlbGVtZW50OiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc20td2hhdHMtbmV4dCcpLFxuICAgICAgICBoYW5kbGVyOiBmdW5jdGlvbiBoYW5kbGVyKGRpcmVjdGlvbikge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdoZXJlJyk7XG4gICAgICAgICAgalF1ZXJ5KCcjc20td2hhdHMtbmV4dDpub3QoLnNob3duKScpLmFkZENsYXNzKCdhbmltYXRlZCBib3VuY2VJblVwIHNob3duJyk7XG4gICAgICAgICAgalF1ZXJ5KCcjc20td2hhdHMtbmV4dCcpLm9uZSgnd2Via2l0QW5pbWF0aW9uRW5kIG9hbmltYXRpb25lbmQgbXNBbmltYXRpb25FbmQgYW5pbWF0aW9uZW5kJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgalF1ZXJ5KCcjc20td2hhdHMtbmV4dCcpLnJlbW92ZUNsYXNzKCdhbmltYXRlZCBib3VuY2VJblVwJyk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgLy9kaXJlY3Rpb24gPT09ICdkb3duJyA/IGxvYWRCZyhpbmRleCArIDEpIDogbG9hZEJnKGluZGV4KTtcbiAgICAgICAgfSxcbiAgICAgICAgb2Zmc2V0OiBmdW5jdGlvbiBvZmZzZXQoKSB7XG4gICAgICAgICAgcmV0dXJuIHdpbmRvdy5pbm5lckhlaWdodCAtIHRoaXMuZWxlbWVudC5jbGllbnRIZWlnaHQgKiAyO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIC8vIEJlbmVmaXRzXG4gICAgICBuZXcgV2F5cG9pbnQoe1xuICAgICAgICBlbGVtZW50OiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmVuZWZpdHMtcmVxdWlyZW1lbnRzJyksXG4gICAgICAgIGhhbmRsZXI6IGZ1bmN0aW9uIGhhbmRsZXIoZGlyZWN0aW9uKSB7XG4gICAgICAgICAgY29uc29sZS5sb2codGhpcy5lbGVtZW50LmNsaWVudEhlaWdodCk7XG4gICAgICAgICAgalF1ZXJ5KCcjYmVuZWZpdHMtcmVxdWlyZW1lbnRzOm5vdCguc2hvd24pJykuYWRkQ2xhc3MoJ2FuaW1hdGVkIGJvdW5jZUluRG93biBzaG93bicpO1xuICAgICAgICAgIGpRdWVyeSgnI2JlbmVmaXRzLXJlcXVpcmVtZW50cycpLm9uZSgnd2Via2l0QW5pbWF0aW9uRW5kIG9hbmltYXRpb25lbmQgbXNBbmltYXRpb25FbmQgYW5pbWF0aW9uZW5kJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgalF1ZXJ5KCcjYmVuZWZpdHMtcmVxdWlyZW1lbnRzJykucmVtb3ZlQ2xhc3MoJ2FuaW1hdGVkIGJvdW5jZUluRG93bicpO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIC8vZGlyZWN0aW9uID09PSAnZG93bicgPyBsb2FkQmcoaW5kZXggKyAxKSA6IGxvYWRCZyhpbmRleCk7XG4gICAgICAgIH0sXG4gICAgICAgIG9mZnNldDogZnVuY3Rpb24gb2Zmc2V0KCkge1xuICAgICAgICAgIHJldHVybiB3aW5kb3cuaW5uZXJIZWlnaHQgLSB0aGlzLmVsZW1lbnQuY2xpZW50SGVpZ2h0ICogMjtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIC8vIE5ldyBFbXBsb3llZXNcbiAgICAgIG5ldyBXYXlwb2ludCh7XG4gICAgICAgIGVsZW1lbnQ6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduZXctZW1wbG95ZWVzJyksXG4gICAgICAgIGhhbmRsZXI6IGZ1bmN0aW9uIGhhbmRsZXIoZGlyZWN0aW9uKSB7XG4gICAgICAgICAgY29uc29sZS5sb2codGhpcy5lbGVtZW50LmNsaWVudEhlaWdodCk7XG4gICAgICAgICAgalF1ZXJ5KCcjbmV3LWVtcGxveWVlczpub3QoLnNob3duKScpLmFkZENsYXNzKCdhbmltYXRlZCB6b29tSW5VcCBzaG93bicpO1xuICAgICAgICAgIGpRdWVyeSgnI25ldy1lbXBsb3llZXMnKS5vbmUoJ3dlYmtpdEFuaW1hdGlvbkVuZCBvYW5pbWF0aW9uZW5kIG1zQW5pbWF0aW9uRW5kIGFuaW1hdGlvbmVuZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGpRdWVyeSgnI25ldy1lbXBsb3llZXMnKS5yZW1vdmVDbGFzcygnYW5pbWF0ZWQgem9vbUluVXAgICcpO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIC8vZGlyZWN0aW9uID09PSAnZG93bicgPyBsb2FkQmcoaW5kZXggKyAxKSA6IGxvYWRCZyhpbmRleCk7XG4gICAgICAgIH0sXG4gICAgICAgIG9mZnNldDogZnVuY3Rpb24gb2Zmc2V0KCkge1xuICAgICAgICAgIHJldHVybiB3aW5kb3cuaW5uZXJIZWlnaHQgLSB0aGlzLmVsZW1lbnQuY2xpZW50SGVpZ2h0ICogMjtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIC8vIEN1cnJlbnQgRW1wbG95ZWVzXG4gICAgICBuZXcgV2F5cG9pbnQoe1xuICAgICAgICBlbGVtZW50OiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY3VycmVudC1lbXBsb3llZXMnKSxcbiAgICAgICAgaGFuZGxlcjogZnVuY3Rpb24gaGFuZGxlcihkaXJlY3Rpb24pIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmVsZW1lbnQuY2xpZW50SGVpZ2h0KTtcbiAgICAgICAgICBqUXVlcnkoJyNjdXJyZW50LWVtcGxveWVlczpub3QoLnNob3duKScpLmFkZENsYXNzKCdhbmltYXRlZCBqZWxsbyBzaG93bicpO1xuICAgICAgICAgIGpRdWVyeSgnI2N1cnJlbnQtZW1wbG95ZWVzJykub25lKCd3ZWJraXRBbmltYXRpb25FbmQgb2FuaW1hdGlvbmVuZCBtc0FuaW1hdGlvbkVuZCBhbmltYXRpb25lbmQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBqUXVlcnkoJyNjdXJyZW50LWVtcGxveWVlcycpLnJlbW92ZUNsYXNzKCdhbmltYXRlZCBqZWxsbyAgJyk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgLy9kaXJlY3Rpb24gPT09ICdkb3duJyA/IGxvYWRCZyhpbmRleCArIDEpIDogbG9hZEJnKGluZGV4KTtcbiAgICAgICAgfSxcbiAgICAgICAgb2Zmc2V0OiBmdW5jdGlvbiBvZmZzZXQoKSB7XG4gICAgICAgICAgcmV0dXJuIHdpbmRvdy5pbm5lckhlaWdodCAtIHRoaXMuZWxlbWVudC5jbGllbnRIZWlnaHQgKiAyO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgLy8gRXhpdGluZyBFbXBsb3llZXNcbiAgICAgIG5ldyBXYXlwb2ludCh7XG4gICAgICAgIGVsZW1lbnQ6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdleGl0aW5nLWVtcGxveWVlcycpLFxuICAgICAgICBoYW5kbGVyOiBmdW5jdGlvbiBoYW5kbGVyKGRpcmVjdGlvbikge1xuICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuZWxlbWVudC5jbGllbnRIZWlnaHQpO1xuICAgICAgICAgIGpRdWVyeSgnI2V4aXRpbmctZW1wbG95ZWVzOm5vdCguc2hvd24pJykuYWRkQ2xhc3MoJ2FuaW1hdGVkIGZsaXAgc2hvd24nKTtcbiAgICAgICAgICBqUXVlcnkoJyNleGl0aW5nLWVtcGxveWVlcycpLm9uZSgnd2Via2l0QW5pbWF0aW9uRW5kIG9hbmltYXRpb25lbmQgbXNBbmltYXRpb25FbmQgYW5pbWF0aW9uZW5kJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgalF1ZXJ5KCcjZXhpdGluZy1lbXBsb3llZXMnKS5yZW1vdmVDbGFzcygnYW5pbWF0ZWQgZmxpcCcpO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIC8vZGlyZWN0aW9uID09PSAnZG93bicgPyBsb2FkQmcoaW5kZXggKyAxKSA6IGxvYWRCZyhpbmRleCk7XG4gICAgICAgIH0sXG4gICAgICAgIG9mZnNldDogZnVuY3Rpb24gb2Zmc2V0KCkge1xuICAgICAgICAgIHJldHVybiB3aW5kb3cuaW5uZXJIZWlnaHQgLSB0aGlzLmVsZW1lbnQuY2xpZW50SGVpZ2h0ICogMjtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIC8vIFBlbmFsdGllc1xuICAgICAgbmV3IFdheXBvaW50KHtcbiAgICAgICAgZWxlbWVudDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BlbmFsdGllcycpLFxuICAgICAgICBoYW5kbGVyOiBmdW5jdGlvbiBoYW5kbGVyKGRpcmVjdGlvbikge1xuICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuZWxlbWVudC5jbGllbnRIZWlnaHQpO1xuICAgICAgICAgIGpRdWVyeSgnI3BlbmFsdGllczpub3QoLnNob3duKScpLmFkZENsYXNzKCdhbmltYXRlZCB6b29tSW5VcCBzaG93bicpO1xuICAgICAgICAgIGpRdWVyeSgnI3BlbmFsdGllcycpLm9uZSgnd2Via2l0QW5pbWF0aW9uRW5kIG9hbmltYXRpb25lbmQgbXNBbmltYXRpb25FbmQgYW5pbWF0aW9uZW5kJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgalF1ZXJ5KCcjcGVuYWx0aWVzJykucmVtb3ZlQ2xhc3MoJ2FuaW1hdGVkIHpvb21JblVwICAnKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICAvL2RpcmVjdGlvbiA9PT0gJ2Rvd24nID8gbG9hZEJnKGluZGV4ICsgMSkgOiBsb2FkQmcoaW5kZXgpO1xuICAgICAgICB9LFxuICAgICAgICBvZmZzZXQ6IGZ1bmN0aW9uIG9mZnNldCgpIHtcbiAgICAgICAgICByZXR1cm4gd2luZG93LmlubmVySGVpZ2h0IC0gdGhpcy5lbGVtZW50LmNsaWVudEhlaWdodCAqIDI7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICAvLyBDYWRpbGxhYyBUYXhcbiAgICAgIG5ldyBXYXlwb2ludCh7XG4gICAgICAgIGVsZW1lbnQ6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYWRpbGxhYy10YXgnKSxcbiAgICAgICAgaGFuZGxlcjogZnVuY3Rpb24gaGFuZGxlcihkaXJlY3Rpb24pIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmVsZW1lbnQuY2xpZW50SGVpZ2h0KTtcbiAgICAgICAgICBqUXVlcnkoJyNjYWRpbGxhYy10YXg6bm90KC5zaG93biknKS5hZGRDbGFzcygnYW5pbWF0ZWQgem9vbUluIHNob3duJyk7XG4gICAgICAgICAgalF1ZXJ5KCcjY2FkaWxsYWMtdGF4Jykub25lKCd3ZWJraXRBbmltYXRpb25FbmQgb2FuaW1hdGlvbmVuZCBtc0FuaW1hdGlvbkVuZCBhbmltYXRpb25lbmQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBqUXVlcnkoJyNjYWRpbGxhYy10YXgnKS5yZW1vdmVDbGFzcygnYW5pbWF0ZWQgem9vbUluICAnKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICAvL2RpcmVjdGlvbiA9PT0gJ2Rvd24nID8gbG9hZEJnKGluZGV4ICsgMSkgOiBsb2FkQmcoaW5kZXgpO1xuICAgICAgICB9LFxuICAgICAgICBvZmZzZXQ6IGZ1bmN0aW9uIG9mZnNldCgpIHtcbiAgICAgICAgICByZXR1cm4gd2luZG93LmlubmVySGVpZ2h0IC0gdGhpcy5lbGVtZW50LmNsaWVudEhlaWdodCAqIDI7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICAvLyBFeGNoYW5nZXNcbiAgICAgIG5ldyBXYXlwb2ludCh7XG4gICAgICAgIGVsZW1lbnQ6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdleGNoYW5nZXMnKSxcbiAgICAgICAgaGFuZGxlcjogZnVuY3Rpb24gaGFuZGxlcihkaXJlY3Rpb24pIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnaGVyZScpO1xuICAgICAgICAgIGpRdWVyeSgnI2V4Y2hhbmdlczpub3QoLnNob3duKScpLmFkZENsYXNzKCdhbmltYXRlZCByb3RhdGVJbiBzaG93bicpO1xuICAgICAgICAgIGpRdWVyeSgnI2V4Y2hhbmdlcycpLm9uZSgnd2Via2l0QW5pbWF0aW9uRW5kIG9hbmltYXRpb25lbmQgbXNBbmltYXRpb25FbmQgYW5pbWF0aW9uZW5kJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgalF1ZXJ5KCcjZXhjaGFuZ2VzJykucmVtb3ZlQ2xhc3MoJ2FuaW1hdGVkIHJvdGF0ZUluJyk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgLy9kaXJlY3Rpb24gPT09ICdkb3duJyA/IGxvYWRCZyhpbmRleCArIDEpIDogbG9hZEJnKGluZGV4KTtcbiAgICAgICAgfSxcbiAgICAgICAgb2Zmc2V0OiBmdW5jdGlvbiBvZmZzZXQoKSB7XG4gICAgICAgICAgcmV0dXJuIHdpbmRvdy5pbm5lckhlaWdodCAtIHRoaXMuZWxlbWVudC5jbGllbnRIZWlnaHQgKiAyO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgLy8gdm9sdW50YXJ5IGluc3VyYW5jZVxuICAgICAgbmV3IFdheXBvaW50KHtcbiAgICAgICAgZWxlbWVudDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ZvbHVudGFyeS1pbnN1cmFuY2UnKSxcbiAgICAgICAgaGFuZGxlcjogZnVuY3Rpb24gaGFuZGxlcihkaXJlY3Rpb24pIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnaGVyZScpO1xuICAgICAgICAgIGpRdWVyeSgnI3ZvbHVudGFyeS1pbnN1cmFuY2U6bm90KC5zaG93biknKS5hZGRDbGFzcygnYW5pbWF0ZWQgc2xpZGVJblVwIHNob3duJyk7XG4gICAgICAgICAgalF1ZXJ5KCcjdm9sdW50YXJ5LWluc3VyYW5jZScpLm9uZSgnd2Via2l0QW5pbWF0aW9uRW5kIG9hbmltYXRpb25lbmQgbXNBbmltYXRpb25FbmQgYW5pbWF0aW9uZW5kJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgalF1ZXJ5KCcjdm9sdW50YXJ5LWluc3VyYW5jZScpLnJlbW92ZUNsYXNzKCdhbmltYXRlZCBzbGlkZUluVXAnKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICAvL2RpcmVjdGlvbiA9PT0gJ2Rvd24nID8gbG9hZEJnKGluZGV4ICsgMSkgOiBsb2FkQmcoaW5kZXgpO1xuICAgICAgICB9LFxuICAgICAgICBvZmZzZXQ6IGZ1bmN0aW9uIG9mZnNldCgpIHtcbiAgICAgICAgICByZXR1cm4gd2luZG93LmlubmVySGVpZ2h0IC0gdGhpcy5lbGVtZW50LmNsaWVudEhlaWdodCAqIDI7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgLy8gd2hhdCdzIG5leHQgaW5zdXJhbmNlXG4gICAgICBuZXcgV2F5cG9pbnQoe1xuICAgICAgICBlbGVtZW50OiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnd2hhdHMtbmV4dCcpLFxuICAgICAgICBoYW5kbGVyOiBmdW5jdGlvbiBoYW5kbGVyKGRpcmVjdGlvbikge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdoZXJlJyk7XG4gICAgICAgICAgalF1ZXJ5KCcjd2hhdHMtbmV4dDpub3QoLnNob3duKScpLmFkZENsYXNzKCdhbmltYXRlZCBib3VuY2VJblVwIHNob3duJyk7XG4gICAgICAgICAgalF1ZXJ5KCcjd2hhdHMtbmV4dCcpLm9uZSgnd2Via2l0QW5pbWF0aW9uRW5kIG9hbmltYXRpb25lbmQgbXNBbmltYXRpb25FbmQgYW5pbWF0aW9uZW5kJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgalF1ZXJ5KCcjd2hhdHMtbmV4dCcpLnJlbW92ZUNsYXNzKCdhbmltYXRlZCBib3VuY2VJblVwJyk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgLy9kaXJlY3Rpb24gPT09ICdkb3duJyA/IGxvYWRCZyhpbmRleCArIDEpIDogbG9hZEJnKGluZGV4KTtcbiAgICAgICAgfSxcbiAgICAgICAgb2Zmc2V0OiBmdW5jdGlvbiBvZmZzZXQoKSB7XG4gICAgICAgICAgcmV0dXJuIHdpbmRvdy5pbm5lckhlaWdodCAtIHRoaXMuZWxlbWVudC5jbGllbnRIZWlnaHQgKiAyO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgLy8gVXRpbGl0eVxuICAgIC8vIHNldHVwIHdheXBvaW50c1xuICAgIHdpbmRvdy53YXlwb2ludHMgPSBbXTtcbiAgICBjYXRlZ29yeVNlY3Rpb25zLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQsIGluZGV4KSB7XG4gICAgICBjb25zb2xlLmxvZyhcIi5cIiArIGVsZW1lbnQpO1xuICAgICAgd2luZG93LndheXBvaW50c1tpbmRleF0gPSBuZXcgV2F5cG9pbnQoe1xuICAgICAgICBlbGVtZW50OiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLlwiICsgZWxlbWVudCksXG4gICAgICAgIGhhbmRsZXI6IGZ1bmN0aW9uIGhhbmRsZXIoZGlyZWN0aW9uKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ2xvYWRpbmcuLi4nKTtcbiAgICAgICAgICBsb2FkQmcoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogYmdzLmxlbmd0aCkpO1xuICAgICAgICAgIC8vZGlyZWN0aW9uID09PSAnZG93bicgPyBsb2FkQmcoaW5kZXggKyAxKSA6IGxvYWRCZyhpbmRleCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgLy8gcHJlbG9hZCBpbWFnZXNcbiAgICBpZiAoYmdJbWFnZXNMb2FkZWQgIT09IHRydWUpIHtcbiAgICAgIGJncy5mb3JFYWNoKGZ1bmN0aW9uIChiZykge1xuICAgICAgICBuZXcgSW1hZ2UoKS5zcmMgPSBiZ1BhdGggKyBiZyArIGltZ0V4dDtcbiAgICAgICAgLy8gY2FjaGVzIGltYWdlcywgYXZvaWRpbmcgd2hpdGUgZmxhc2ggYmV0d2VlbiBiYWNrZ3JvdW5kIHJlcGxhY2VtZW50c1xuICAgICAgfSk7XG4gICAgICBiZ0ltYWdlc0xvYWRlZCA9IHRydWU7XG4gICAgfVxuICAgIC8vIGxvYWQgYmcgaW1hZ2VcbiAgICB2YXIgYmdDYW5Mb2FkID0gdHJ1ZTtcbiAgICB2YXIgbG9hZEJnID0gZnVuY3Rpb24gbG9hZEJnKGJnKSB7XG4gICAgICBpZiAoYmdDYW5Mb2FkID09PSB0cnVlKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdjYW4gbG9hZCEhISEhJyk7XG4gICAgICAgIGJnQ2FuTG9hZCA9IGZhbHNlO1xuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBkb2NTdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSBcInVybChcIiArIGJnUGF0aCArIGJnc1tiZ10gKyBpbWdFeHQgKyBcIilcIjtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcImxvYWRpbmcgXCIgKyBiZ1BhdGggKyBiZ3NbYmddICsgaW1nRXh0LCBiZyk7XG4gICAgICAgICAgYmdDYW5Mb2FkID0gdHJ1ZTtcbiAgICAgICAgfSwgMTAwKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIHZhciBkZWJvdW5jZSA9IGZ1bmN0aW9uIGRlYm91bmNlKGZ1bmMsIHdhaXQsIGltbWVkaWF0ZSkge1xuICAgICAgdmFyIHRpbWVvdXQ7XG4gICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgY29udGV4dCA9IHRoaXMsXG4gICAgICAgICAgICBhcmdzID0gYXJndW1lbnRzO1xuICAgICAgICB2YXIgbGF0ZXIgPSBmdW5jdGlvbiBsYXRlcigpIHtcbiAgICAgICAgICB0aW1lb3V0ID0gbnVsbDtcbiAgICAgICAgICBpZiAoIWltbWVkaWF0ZSkgZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTtcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIGNhbGxOb3cgPSBpbW1lZGlhdGUgJiYgIXRpbWVvdXQ7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgICAgICAgdGltZW91dCA9IHNldFRpbWVvdXQobGF0ZXIsIHdhaXQpO1xuICAgICAgICBpZiAoY2FsbE5vdykgZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTtcbiAgICAgIH07XG4gICAgfTtcbiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICAgIC8vIGJ1c2luZXNzIHNlbGVjdCBidXR0b25zXG4gICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICB2YXIgYnVzaW5lc3NTZWxlY3QgPSBqUXVlcnkoJy5idXNpbmVzcy10eXBlLXNlbGVjdCcpO1xuICAgIGJ1c2luZXNzU2VsZWN0LmVhY2goZnVuY3Rpb24gKGksIGVsKSB7XG4gICAgICBjb25zb2xlLmxvZyhlbCk7XG4gICAgICBqUXVlcnkoZWwpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY29uc29sZS5sb2coZWwpO1xuICAgICAgICBqUXVlcnkoJy5oY3ItbWVudS1pdGVtJykuaGlkZSgpO1xuICAgICAgICBpZiAoZWwuZGF0YXNldC5idXNpbmVzcyA9PT0gJ2J1c2luZXNzLTUwJykge1xuICAgICAgICAgIGpRdWVyeSgnYS5zbScpLnBhcmVudCgpLnNob3coKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBqUXVlcnkoJ2EubGcnKS5wYXJlbnQoKS5zaG93KCk7XG4gICAgICAgIH1cbiAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QgPSAnJztcbiAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKGVsLmRhdGFzZXQuYnVzaW5lc3MgKyBcIi1hY3RpdmVcIik7XG4gICAgICAgIC8vIGdldCB0aGUgYWN0aXZlIG1lbnUgaXRlbSBhbmQgdHVybiBpdCBvZmZcbiAgICAgICAgdmFyIGN1cnJlbnRBY3RpdmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnVzaW5lc3MtdHlwZS1zZWxlY3QuYWN0aXZlJyk7XG4gICAgICAgIGlmIChjdXJyZW50QWN0aXZlKSB7XG4gICAgICAgICAgY3VycmVudEFjdGl2ZS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcbiAgICAgICAgfVxuICAgICAgICAvLyB0dXJuIG9uIHRoZSBuZXcgbWVudSBpdGVtXG4gICAgICAgIGVsLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuICAgICAgICAvLyBzaG93IHRoZSBuYXZcbiAgICAgICAgdmFyIG1lbnVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmhjci1tZW51Jyk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWVudXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBtZW51c1tpXS5zdHlsZS52aXNpYmlsaXR5ID0gJ3Zpc2libGUnO1xuICAgICAgICB9XG4gICAgICAgIGZvbGRNZW51LmFjY29yZGlvbigwLCAndG9wJywgZnVuY3Rpb24gKGV2LCBvcmkpIHtcbiAgICAgICAgICBvcmkuZWwuY2xhc3NMaXN0LmFkZCgnb3BlbicpO1xuICAgICAgICAgIGNvbnNvbGUubG9nKGV2LCBvcmkpO1xuICAgICAgICB9KTtcbiAgICAgICAgdmFyIGN1cnJlbnRWaXNpYmxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJ1c2luZXNzLWNvbnRhaW5lci52aXNpYmxlJyk7XG4gICAgICAgIGlmIChjdXJyZW50VmlzaWJsZSkge1xuICAgICAgICAgIGN1cnJlbnRWaXNpYmxlLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgY3VycmVudFZpc2libGUuY2xhc3NMaXN0LnJlbW92ZSgndmlzaWJsZScpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBzZWN0aW9uVG9TaG93ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5cIiArIGVsLmRhdGFzZXQuYnVzaW5lc3MgKyBcIi1jb250YWluZXJcIik7XG4gICAgICAgIGNvbnNvbGUubG9nKHNlY3Rpb25Ub1Nob3cpO1xuICAgICAgICBqUXVlcnkoc2VjdGlvblRvU2hvdykuZmFkZUluKCk7XG4gICAgICAgIHNlY3Rpb25Ub1Nob3cuY2xhc3NMaXN0LmFkZCgndmlzaWJsZScpO1xuICAgICAgICBqUXVlcnkoJ2h0bWwsIGJvZHknKS5hbmltYXRlKHtcbiAgICAgICAgICBzY3JvbGxUb3A6IGpRdWVyeShzZWN0aW9uVG9TaG93KS5vZmZzZXQoKS50b3BcbiAgICAgICAgfSwgMTAwMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGpRdWVyeShzZWN0aW9uVG9TaG93KS5maW5kKCdoMycpLmFkZENsYXNzKCdhbmltYXRlZCcpLmFkZENsYXNzKCdwdWxzZScpO1xuICAgICAgICB9KTtcbiAgICAgICAgbG9hZEJnKE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGJncy5sZW5ndGgpKTtcblxuICAgICAgICBsb2FkV2F5cG9pbnRzKCk7XG5cbiAgICAgICAgLy8gVXRpbGl0eVxuICAgICAgICAvLyBzZXR1cCB3YXlwb2ludHNcbiAgICAgICAgd2luZG93LndheXBvaW50cyA9IFtdO1xuICAgICAgICBjYXRlZ29yeVNlY3Rpb25zLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQsIGluZGV4KSB7XG4gICAgICAgICAgY29uc29sZS5sb2coXCIuXCIgKyBlbGVtZW50KTtcbiAgICAgICAgICB3aW5kb3cud2F5cG9pbnRzW2luZGV4XSA9IG5ldyBXYXlwb2ludCh7XG4gICAgICAgICAgICBlbGVtZW50OiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLlwiICsgZWxlbWVudCksXG4gICAgICAgICAgICBoYW5kbGVyOiBmdW5jdGlvbiBoYW5kbGVyKGRpcmVjdGlvbikge1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZygnbG9hZGluZy4uLicpO1xuICAgICAgICAgICAgICAvL2xvYWRCZyhNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAyKSk7XG4gICAgICAgICAgICAgIGRpcmVjdGlvbiA9PT0gJ2Rvd24nID8gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogYmdzLmxlbmd0aCkgOiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBiZ3MubGVuZ3RoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIC8vLy8vLy8vLy8vXG4gICAgLy8gaGNyIG1lbnVcbiAgICAvLy8vLy8vLy8vL1xuICAgIHZhciBmb2xkTWVudSA9IG5ldyBPcmlEb21pKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oY3ItbWVudScpLCB7XG4gICAgICBoUGFuZWxzOiAzLFxuICAgICAgcmlwcGxlOiAyLFxuICAgICAgc2hhZGluZzogJ2hhcmQnLFxuICAgICAgdG91Y2hFbmFibGVkOiBmYWxzZVxuICAgIH0pO1xuICAgIC8vIGxvYWRcbiAgICBmb2xkTWVudS5mb2xkVXAoJ3RvcCcpO1xuXG4gICAgLy8gY2xpY2tcbiAgICB2YXIgaGNyTWVudUl0ZW1MaW5rID0galF1ZXJ5KCcuaGNyLW1lbnUtaXRlbSBhJyk7XG4gICAgaGNyTWVudUl0ZW1MaW5rLm9uKCdjbGljaycsIGZ1bmN0aW9uIChlLCBlbCkge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgY29uc29sZS5sb2coXCIuXCIgKyBlLnRhcmdldC5ocmVmLnNwbGl0KCcjJylbMV0pO1xuICAgICAgalF1ZXJ5KCdodG1sLCBib2R5JykuYW5pbWF0ZSh7XG4gICAgICAgIHNjcm9sbFRvcDogalF1ZXJ5KFwiLlwiICsgZS50YXJnZXQuaHJlZi5zcGxpdCgnIycpWzFdICsgXCItY29udGFpbmVyXCIpLm9mZnNldCgpLnRvcCAtIDEwMFxuICAgICAgfSwgMTAwMCwgZnVuY3Rpb24gKCkge30pO1xuICAgIH0pO1xuXG4gICAgLy9zY3JvbGxcbiAgICB2YXIgYUFycmF5ID0gW107IC8vIGNyZWF0ZSB0aGUgZW1wdHkgYUFycmF5XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBoY3JNZW51SXRlbUxpbmsubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBhQ2hpbGQgPSBoY3JNZW51SXRlbUxpbmtbaV07XG4gICAgICB2YXIgYWhyZWYgPSBqUXVlcnkoYUNoaWxkKS5hdHRyKCdocmVmJyk7XG4gICAgICBhQXJyYXkucHVzaChhaHJlZik7XG4gICAgfVxuICAgIHZhciBjdXJyZW50U2VjdGlvbiA9ICcnO1xuICAgIGpRdWVyeSh3aW5kb3cpLnNjcm9sbChmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgd2luZG93UG9zID0galF1ZXJ5KHdpbmRvdykuc2Nyb2xsVG9wKCk7IC8vIGdldCB0aGUgb2Zmc2V0IG9mIHRoZSB3aW5kb3cgZnJvbSB0aGUgdG9wIG9mIHBhZ2VcbiAgICAgIHZhciB3aW5kb3dIZWlnaHQgPSBqUXVlcnkod2luZG93KS5oZWlnaHQoKTsgLy8gZ2V0IHRoZSBoZWlnaHQgb2YgdGhlIHdpbmRvd1xuICAgICAgdmFyIGRvY0hlaWdodCA9IGpRdWVyeShkb2N1bWVudCkuaGVpZ2h0KCk7XG5cbiAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhQXJyYXkubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgIHZhciB0aGVJRCA9IGFBcnJheVtfaV0ucmVwbGFjZSgnIycsICcnKTtcbiAgICAgICAgdmFyIGRpdlBvcyA9IGpRdWVyeShcIi5cIiArIHRoZUlEICsgXCItY29udGFpbmVyXCIpLm9mZnNldCgpLnRvcCAtIDIwMDsgLy8gZ2V0IHRoZSBvZmZzZXQgb2YgdGhlIGRpdiBmcm9tIHRoZSB0b3Agb2YgcGFnZVxuICAgICAgICB2YXIgZGl2SGVpZ2h0ID0galF1ZXJ5KFwiLlwiICsgdGhlSUQgKyBcIi1jb250YWluZXJcIikuaGVpZ2h0KCk7IC8vIGdldCB0aGUgaGVpZ2h0IG9mIHRoZSBkaXYgaW4gcXVlc3Rpb25cbiAgICAgICAgaWYgKHdpbmRvd1BvcyA+PSBkaXZQb3MgJiYgd2luZG93UG9zIDwgZGl2UG9zICsgZGl2SGVpZ2h0KSB7XG4gICAgICAgICAgalF1ZXJ5KFwiYVtocmVmPScjXCIgKyB0aGVJRCArIFwiJ11cIikuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGpRdWVyeShcImFbaHJlZj0nI1wiICsgdGhlSUQgKyBcIiddXCIpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAod2luZG93UG9zICsgd2luZG93SGVpZ2h0ID09IGRvY0hlaWdodCkge1xuICAgICAgICBpZiAoIWpRdWVyeSgnbmF2IGxpOmxhc3QtY2hpbGQgYScpLmhhc0NsYXNzKCdhY3RpdmUnKSkge1xuICAgICAgICAgIHZhciBuYXZBY3RpdmVDdXJyZW50ID0galF1ZXJ5KCcubmF2LWFjdGl2ZScpLmF0dHIoJ2hyZWYnKTtcbiAgICAgICAgICBqUXVlcnkoXCJhW2hyZWY9J1wiICsgbmF2QWN0aXZlQ3VycmVudCArIFwiJ11cIikucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgIGpRdWVyeSgnbmF2IGxpOmxhc3QtY2hpbGQgYScpLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICB9LCB7IFwiLi4vbm9kZV9tb2R1bGVzL3dheXBvaW50cy9saWIvbm9mcmFtZXdvcmsud2F5cG9pbnRzXCI6IDIgfV0sIDI6IFtmdW5jdGlvbiAocmVxdWlyZSwgbW9kdWxlLCBleHBvcnRzKSB7XG4gICAgLyohXG4gICAgV2F5cG9pbnRzIC0gNC4wLjBcbiAgICBDb3B5cmlnaHQgwqkgMjAxMS0yMDE1IENhbGViIFRyb3VnaHRvblxuICAgIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbiAgICBodHRwczovL2dpdGh1Yi5jb20vaW1ha2V3ZWJ0aGluZ3Mvd2F5cG9pbnRzL2Jsb2cvbWFzdGVyL2xpY2Vuc2VzLnR4dFxuICAgICovXG4gICAgKGZ1bmN0aW9uICgpIHtcbiAgICAgICd1c2Ugc3RyaWN0JztcblxuICAgICAgdmFyIGtleUNvdW50ZXIgPSAwO1xuICAgICAgdmFyIGFsbFdheXBvaW50cyA9IHt9O1xuXG4gICAgICAvKiBodHRwOi8vaW1ha2V3ZWJ0aGluZ3MuY29tL3dheXBvaW50cy9hcGkvd2F5cG9pbnQgKi9cbiAgICAgIGZ1bmN0aW9uIFdheXBvaW50KG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKCFvcHRpb25zKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBvcHRpb25zIHBhc3NlZCB0byBXYXlwb2ludCBjb25zdHJ1Y3RvcicpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghb3B0aW9ucy5lbGVtZW50KSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBlbGVtZW50IG9wdGlvbiBwYXNzZWQgdG8gV2F5cG9pbnQgY29uc3RydWN0b3InKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIW9wdGlvbnMuaGFuZGxlcikge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTm8gaGFuZGxlciBvcHRpb24gcGFzc2VkIHRvIFdheXBvaW50IGNvbnN0cnVjdG9yJyk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmtleSA9ICd3YXlwb2ludC0nICsga2V5Q291bnRlcjtcbiAgICAgICAgdGhpcy5vcHRpb25zID0gV2F5cG9pbnQuQWRhcHRlci5leHRlbmQoe30sIFdheXBvaW50LmRlZmF1bHRzLCBvcHRpb25zKTtcbiAgICAgICAgdGhpcy5lbGVtZW50ID0gdGhpcy5vcHRpb25zLmVsZW1lbnQ7XG4gICAgICAgIHRoaXMuYWRhcHRlciA9IG5ldyBXYXlwb2ludC5BZGFwdGVyKHRoaXMuZWxlbWVudCk7XG4gICAgICAgIHRoaXMuY2FsbGJhY2sgPSBvcHRpb25zLmhhbmRsZXI7XG4gICAgICAgIHRoaXMuYXhpcyA9IHRoaXMub3B0aW9ucy5ob3Jpem9udGFsID8gJ2hvcml6b250YWwnIDogJ3ZlcnRpY2FsJztcbiAgICAgICAgdGhpcy5lbmFibGVkID0gdGhpcy5vcHRpb25zLmVuYWJsZWQ7XG4gICAgICAgIHRoaXMudHJpZ2dlclBvaW50ID0gbnVsbDtcbiAgICAgICAgdGhpcy5ncm91cCA9IFdheXBvaW50Lkdyb3VwLmZpbmRPckNyZWF0ZSh7XG4gICAgICAgICAgbmFtZTogdGhpcy5vcHRpb25zLmdyb3VwLFxuICAgICAgICAgIGF4aXM6IHRoaXMuYXhpc1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5jb250ZXh0ID0gV2F5cG9pbnQuQ29udGV4dC5maW5kT3JDcmVhdGVCeUVsZW1lbnQodGhpcy5vcHRpb25zLmNvbnRleHQpO1xuXG4gICAgICAgIGlmIChXYXlwb2ludC5vZmZzZXRBbGlhc2VzW3RoaXMub3B0aW9ucy5vZmZzZXRdKSB7XG4gICAgICAgICAgdGhpcy5vcHRpb25zLm9mZnNldCA9IFdheXBvaW50Lm9mZnNldEFsaWFzZXNbdGhpcy5vcHRpb25zLm9mZnNldF07XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5ncm91cC5hZGQodGhpcyk7XG4gICAgICAgIHRoaXMuY29udGV4dC5hZGQodGhpcyk7XG4gICAgICAgIGFsbFdheXBvaW50c1t0aGlzLmtleV0gPSB0aGlzO1xuICAgICAgICBrZXlDb3VudGVyICs9IDE7XG4gICAgICB9XG5cbiAgICAgIC8qIFByaXZhdGUgKi9cbiAgICAgIFdheXBvaW50LnByb3RvdHlwZS5xdWV1ZVRyaWdnZXIgPSBmdW5jdGlvbiAoZGlyZWN0aW9uKSB7XG4gICAgICAgIHRoaXMuZ3JvdXAucXVldWVUcmlnZ2VyKHRoaXMsIGRpcmVjdGlvbik7XG4gICAgICB9O1xuXG4gICAgICAvKiBQcml2YXRlICovXG4gICAgICBXYXlwb2ludC5wcm90b3R5cGUudHJpZ2dlciA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgIGlmICghdGhpcy5lbmFibGVkKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmNhbGxiYWNrKSB7XG4gICAgICAgICAgdGhpcy5jYWxsYmFjay5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgLyogUHVibGljICovXG4gICAgICAvKiBodHRwOi8vaW1ha2V3ZWJ0aGluZ3MuY29tL3dheXBvaW50cy9hcGkvZGVzdHJveSAqL1xuICAgICAgV2F5cG9pbnQucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuY29udGV4dC5yZW1vdmUodGhpcyk7XG4gICAgICAgIHRoaXMuZ3JvdXAucmVtb3ZlKHRoaXMpO1xuICAgICAgICBkZWxldGUgYWxsV2F5cG9pbnRzW3RoaXMua2V5XTtcbiAgICAgIH07XG5cbiAgICAgIC8qIFB1YmxpYyAqL1xuICAgICAgLyogaHR0cDovL2ltYWtld2VidGhpbmdzLmNvbS93YXlwb2ludHMvYXBpL2Rpc2FibGUgKi9cbiAgICAgIFdheXBvaW50LnByb3RvdHlwZS5kaXNhYmxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmVuYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9O1xuXG4gICAgICAvKiBQdWJsaWMgKi9cbiAgICAgIC8qIGh0dHA6Ly9pbWFrZXdlYnRoaW5ncy5jb20vd2F5cG9pbnRzL2FwaS9lbmFibGUgKi9cbiAgICAgIFdheXBvaW50LnByb3RvdHlwZS5lbmFibGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuY29udGV4dC5yZWZyZXNoKCk7XG4gICAgICAgIHRoaXMuZW5hYmxlZCA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfTtcblxuICAgICAgLyogUHVibGljICovXG4gICAgICAvKiBodHRwOi8vaW1ha2V3ZWJ0aGluZ3MuY29tL3dheXBvaW50cy9hcGkvbmV4dCAqL1xuICAgICAgV2F5cG9pbnQucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdyb3VwLm5leHQodGhpcyk7XG4gICAgICB9O1xuXG4gICAgICAvKiBQdWJsaWMgKi9cbiAgICAgIC8qIGh0dHA6Ly9pbWFrZXdlYnRoaW5ncy5jb20vd2F5cG9pbnRzL2FwaS9wcmV2aW91cyAqL1xuICAgICAgV2F5cG9pbnQucHJvdG90eXBlLnByZXZpb3VzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5ncm91cC5wcmV2aW91cyh0aGlzKTtcbiAgICAgIH07XG5cbiAgICAgIC8qIFByaXZhdGUgKi9cbiAgICAgIFdheXBvaW50Lmludm9rZUFsbCA9IGZ1bmN0aW9uIChtZXRob2QpIHtcbiAgICAgICAgdmFyIGFsbFdheXBvaW50c0FycmF5ID0gW107XG4gICAgICAgIGZvciAodmFyIHdheXBvaW50S2V5IGluIGFsbFdheXBvaW50cykge1xuICAgICAgICAgIGFsbFdheXBvaW50c0FycmF5LnB1c2goYWxsV2F5cG9pbnRzW3dheXBvaW50S2V5XSk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGVuZCA9IGFsbFdheXBvaW50c0FycmF5Lmxlbmd0aDsgaSA8IGVuZDsgaSsrKSB7XG4gICAgICAgICAgYWxsV2F5cG9pbnRzQXJyYXlbaV1bbWV0aG9kXSgpO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICAvKiBQdWJsaWMgKi9cbiAgICAgIC8qIGh0dHA6Ly9pbWFrZXdlYnRoaW5ncy5jb20vd2F5cG9pbnRzL2FwaS9kZXN0cm95LWFsbCAqL1xuICAgICAgV2F5cG9pbnQuZGVzdHJveUFsbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgV2F5cG9pbnQuaW52b2tlQWxsKCdkZXN0cm95Jyk7XG4gICAgICB9O1xuXG4gICAgICAvKiBQdWJsaWMgKi9cbiAgICAgIC8qIGh0dHA6Ly9pbWFrZXdlYnRoaW5ncy5jb20vd2F5cG9pbnRzL2FwaS9kaXNhYmxlLWFsbCAqL1xuICAgICAgV2F5cG9pbnQuZGlzYWJsZUFsbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgV2F5cG9pbnQuaW52b2tlQWxsKCdkaXNhYmxlJyk7XG4gICAgICB9O1xuXG4gICAgICAvKiBQdWJsaWMgKi9cbiAgICAgIC8qIGh0dHA6Ly9pbWFrZXdlYnRoaW5ncy5jb20vd2F5cG9pbnRzL2FwaS9lbmFibGUtYWxsICovXG4gICAgICBXYXlwb2ludC5lbmFibGVBbGwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIFdheXBvaW50Lmludm9rZUFsbCgnZW5hYmxlJyk7XG4gICAgICB9O1xuXG4gICAgICAvKiBQdWJsaWMgKi9cbiAgICAgIC8qIGh0dHA6Ly9pbWFrZXdlYnRoaW5ncy5jb20vd2F5cG9pbnRzL2FwaS9yZWZyZXNoLWFsbCAqL1xuICAgICAgV2F5cG9pbnQucmVmcmVzaEFsbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgV2F5cG9pbnQuQ29udGV4dC5yZWZyZXNoQWxsKCk7XG4gICAgICB9O1xuXG4gICAgICAvKiBQdWJsaWMgKi9cbiAgICAgIC8qIGh0dHA6Ly9pbWFrZXdlYnRoaW5ncy5jb20vd2F5cG9pbnRzL2FwaS92aWV3cG9ydC1oZWlnaHQgKi9cbiAgICAgIFdheXBvaW50LnZpZXdwb3J0SGVpZ2h0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gd2luZG93LmlubmVySGVpZ2h0IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQ7XG4gICAgICB9O1xuXG4gICAgICAvKiBQdWJsaWMgKi9cbiAgICAgIC8qIGh0dHA6Ly9pbWFrZXdlYnRoaW5ncy5jb20vd2F5cG9pbnRzL2FwaS92aWV3cG9ydC13aWR0aCAqL1xuICAgICAgV2F5cG9pbnQudmlld3BvcnRXaWR0aCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aDtcbiAgICAgIH07XG5cbiAgICAgIFdheXBvaW50LmFkYXB0ZXJzID0gW107XG5cbiAgICAgIFdheXBvaW50LmRlZmF1bHRzID0ge1xuICAgICAgICBjb250ZXh0OiB3aW5kb3csXG4gICAgICAgIGNvbnRpbnVvdXM6IHRydWUsXG4gICAgICAgIGVuYWJsZWQ6IHRydWUsXG4gICAgICAgIGdyb3VwOiAnZGVmYXVsdCcsXG4gICAgICAgIGhvcml6b250YWw6IGZhbHNlLFxuICAgICAgICBvZmZzZXQ6IDBcbiAgICAgIH07XG5cbiAgICAgIFdheXBvaW50Lm9mZnNldEFsaWFzZXMgPSB7XG4gICAgICAgICdib3R0b20taW4tdmlldyc6IGZ1bmN0aW9uIGJvdHRvbUluVmlldygpIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5jb250ZXh0LmlubmVySGVpZ2h0KCkgLSB0aGlzLmFkYXB0ZXIub3V0ZXJIZWlnaHQoKTtcbiAgICAgICAgfSxcbiAgICAgICAgJ3JpZ2h0LWluLXZpZXcnOiBmdW5jdGlvbiByaWdodEluVmlldygpIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5jb250ZXh0LmlubmVyV2lkdGgoKSAtIHRoaXMuYWRhcHRlci5vdXRlcldpZHRoKCk7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIHdpbmRvdy5XYXlwb2ludCA9IFdheXBvaW50O1xuICAgIH0pKCk7KGZ1bmN0aW9uICgpIHtcbiAgICAgICd1c2Ugc3RyaWN0JztcblxuICAgICAgZnVuY3Rpb24gcmVxdWVzdEFuaW1hdGlvbkZyYW1lU2hpbShjYWxsYmFjaykge1xuICAgICAgICB3aW5kb3cuc2V0VGltZW91dChjYWxsYmFjaywgMTAwMCAvIDYwKTtcbiAgICAgIH1cblxuICAgICAgdmFyIGtleUNvdW50ZXIgPSAwO1xuICAgICAgdmFyIGNvbnRleHRzID0ge307XG4gICAgICB2YXIgV2F5cG9pbnQgPSB3aW5kb3cuV2F5cG9pbnQ7XG4gICAgICB2YXIgb2xkV2luZG93TG9hZCA9IHdpbmRvdy5vbmxvYWQ7XG5cbiAgICAgIC8qIGh0dHA6Ly9pbWFrZXdlYnRoaW5ncy5jb20vd2F5cG9pbnRzL2FwaS9jb250ZXh0ICovXG4gICAgICBmdW5jdGlvbiBDb250ZXh0KGVsZW1lbnQpIHtcbiAgICAgICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudDtcbiAgICAgICAgdGhpcy5BZGFwdGVyID0gV2F5cG9pbnQuQWRhcHRlcjtcbiAgICAgICAgdGhpcy5hZGFwdGVyID0gbmV3IHRoaXMuQWRhcHRlcihlbGVtZW50KTtcbiAgICAgICAgdGhpcy5rZXkgPSAnd2F5cG9pbnQtY29udGV4dC0nICsga2V5Q291bnRlcjtcbiAgICAgICAgdGhpcy5kaWRTY3JvbGwgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5kaWRSZXNpemUgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5vbGRTY3JvbGwgPSB7XG4gICAgICAgICAgeDogdGhpcy5hZGFwdGVyLnNjcm9sbExlZnQoKSxcbiAgICAgICAgICB5OiB0aGlzLmFkYXB0ZXIuc2Nyb2xsVG9wKClcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy53YXlwb2ludHMgPSB7XG4gICAgICAgICAgdmVydGljYWw6IHt9LFxuICAgICAgICAgIGhvcml6b250YWw6IHt9XG4gICAgICAgIH07XG5cbiAgICAgICAgZWxlbWVudC53YXlwb2ludENvbnRleHRLZXkgPSB0aGlzLmtleTtcbiAgICAgICAgY29udGV4dHNbZWxlbWVudC53YXlwb2ludENvbnRleHRLZXldID0gdGhpcztcbiAgICAgICAga2V5Q291bnRlciArPSAxO1xuXG4gICAgICAgIHRoaXMuY3JlYXRlVGhyb3R0bGVkU2Nyb2xsSGFuZGxlcigpO1xuICAgICAgICB0aGlzLmNyZWF0ZVRocm90dGxlZFJlc2l6ZUhhbmRsZXIoKTtcbiAgICAgIH1cblxuICAgICAgLyogUHJpdmF0ZSAqL1xuICAgICAgQ29udGV4dC5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24gKHdheXBvaW50KSB7XG4gICAgICAgIHZhciBheGlzID0gd2F5cG9pbnQub3B0aW9ucy5ob3Jpem9udGFsID8gJ2hvcml6b250YWwnIDogJ3ZlcnRpY2FsJztcbiAgICAgICAgdGhpcy53YXlwb2ludHNbYXhpc11bd2F5cG9pbnQua2V5XSA9IHdheXBvaW50O1xuICAgICAgICB0aGlzLnJlZnJlc2goKTtcbiAgICAgIH07XG5cbiAgICAgIC8qIFByaXZhdGUgKi9cbiAgICAgIENvbnRleHQucHJvdG90eXBlLmNoZWNrRW1wdHkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBob3Jpem9udGFsRW1wdHkgPSB0aGlzLkFkYXB0ZXIuaXNFbXB0eU9iamVjdCh0aGlzLndheXBvaW50cy5ob3Jpem9udGFsKTtcbiAgICAgICAgdmFyIHZlcnRpY2FsRW1wdHkgPSB0aGlzLkFkYXB0ZXIuaXNFbXB0eU9iamVjdCh0aGlzLndheXBvaW50cy52ZXJ0aWNhbCk7XG4gICAgICAgIGlmIChob3Jpem9udGFsRW1wdHkgJiYgdmVydGljYWxFbXB0eSkge1xuICAgICAgICAgIHRoaXMuYWRhcHRlci5vZmYoJy53YXlwb2ludHMnKTtcbiAgICAgICAgICBkZWxldGUgY29udGV4dHNbdGhpcy5rZXldO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICAvKiBQcml2YXRlICovXG4gICAgICBDb250ZXh0LnByb3RvdHlwZS5jcmVhdGVUaHJvdHRsZWRSZXNpemVIYW5kbGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgICAgZnVuY3Rpb24gcmVzaXplSGFuZGxlcigpIHtcbiAgICAgICAgICBzZWxmLmhhbmRsZVJlc2l6ZSgpO1xuICAgICAgICAgIHNlbGYuZGlkUmVzaXplID0gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmFkYXB0ZXIub24oJ3Jlc2l6ZS53YXlwb2ludHMnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgaWYgKCFzZWxmLmRpZFJlc2l6ZSkge1xuICAgICAgICAgICAgc2VsZi5kaWRSZXNpemUgPSB0cnVlO1xuICAgICAgICAgICAgV2F5cG9pbnQucmVxdWVzdEFuaW1hdGlvbkZyYW1lKHJlc2l6ZUhhbmRsZXIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9O1xuXG4gICAgICAvKiBQcml2YXRlICovXG4gICAgICBDb250ZXh0LnByb3RvdHlwZS5jcmVhdGVUaHJvdHRsZWRTY3JvbGxIYW5kbGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIGZ1bmN0aW9uIHNjcm9sbEhhbmRsZXIoKSB7XG4gICAgICAgICAgc2VsZi5oYW5kbGVTY3JvbGwoKTtcbiAgICAgICAgICBzZWxmLmRpZFNjcm9sbCA9IGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5hZGFwdGVyLm9uKCdzY3JvbGwud2F5cG9pbnRzJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGlmICghc2VsZi5kaWRTY3JvbGwgfHwgV2F5cG9pbnQuaXNUb3VjaCkge1xuICAgICAgICAgICAgc2VsZi5kaWRTY3JvbGwgPSB0cnVlO1xuICAgICAgICAgICAgV2F5cG9pbnQucmVxdWVzdEFuaW1hdGlvbkZyYW1lKHNjcm9sbEhhbmRsZXIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9O1xuXG4gICAgICAvKiBQcml2YXRlICovXG4gICAgICBDb250ZXh0LnByb3RvdHlwZS5oYW5kbGVSZXNpemUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIFdheXBvaW50LkNvbnRleHQucmVmcmVzaEFsbCgpO1xuICAgICAgfTtcblxuICAgICAgLyogUHJpdmF0ZSAqL1xuICAgICAgQ29udGV4dC5wcm90b3R5cGUuaGFuZGxlU2Nyb2xsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgdHJpZ2dlcmVkR3JvdXBzID0ge307XG4gICAgICAgIHZhciBheGVzID0ge1xuICAgICAgICAgIGhvcml6b250YWw6IHtcbiAgICAgICAgICAgIG5ld1Njcm9sbDogdGhpcy5hZGFwdGVyLnNjcm9sbExlZnQoKSxcbiAgICAgICAgICAgIG9sZFNjcm9sbDogdGhpcy5vbGRTY3JvbGwueCxcbiAgICAgICAgICAgIGZvcndhcmQ6ICdyaWdodCcsXG4gICAgICAgICAgICBiYWNrd2FyZDogJ2xlZnQnXG4gICAgICAgICAgfSxcbiAgICAgICAgICB2ZXJ0aWNhbDoge1xuICAgICAgICAgICAgbmV3U2Nyb2xsOiB0aGlzLmFkYXB0ZXIuc2Nyb2xsVG9wKCksXG4gICAgICAgICAgICBvbGRTY3JvbGw6IHRoaXMub2xkU2Nyb2xsLnksXG4gICAgICAgICAgICBmb3J3YXJkOiAnZG93bicsXG4gICAgICAgICAgICBiYWNrd2FyZDogJ3VwJ1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBmb3IgKHZhciBheGlzS2V5IGluIGF4ZXMpIHtcbiAgICAgICAgICB2YXIgYXhpcyA9IGF4ZXNbYXhpc0tleV07XG4gICAgICAgICAgdmFyIGlzRm9yd2FyZCA9IGF4aXMubmV3U2Nyb2xsID4gYXhpcy5vbGRTY3JvbGw7XG4gICAgICAgICAgdmFyIGRpcmVjdGlvbiA9IGlzRm9yd2FyZCA/IGF4aXMuZm9yd2FyZCA6IGF4aXMuYmFja3dhcmQ7XG5cbiAgICAgICAgICBmb3IgKHZhciB3YXlwb2ludEtleSBpbiB0aGlzLndheXBvaW50c1theGlzS2V5XSkge1xuICAgICAgICAgICAgdmFyIHdheXBvaW50ID0gdGhpcy53YXlwb2ludHNbYXhpc0tleV1bd2F5cG9pbnRLZXldO1xuICAgICAgICAgICAgdmFyIHdhc0JlZm9yZVRyaWdnZXJQb2ludCA9IGF4aXMub2xkU2Nyb2xsIDwgd2F5cG9pbnQudHJpZ2dlclBvaW50O1xuICAgICAgICAgICAgdmFyIG5vd0FmdGVyVHJpZ2dlclBvaW50ID0gYXhpcy5uZXdTY3JvbGwgPj0gd2F5cG9pbnQudHJpZ2dlclBvaW50O1xuICAgICAgICAgICAgdmFyIGNyb3NzZWRGb3J3YXJkID0gd2FzQmVmb3JlVHJpZ2dlclBvaW50ICYmIG5vd0FmdGVyVHJpZ2dlclBvaW50O1xuICAgICAgICAgICAgdmFyIGNyb3NzZWRCYWNrd2FyZCA9ICF3YXNCZWZvcmVUcmlnZ2VyUG9pbnQgJiYgIW5vd0FmdGVyVHJpZ2dlclBvaW50O1xuICAgICAgICAgICAgaWYgKGNyb3NzZWRGb3J3YXJkIHx8IGNyb3NzZWRCYWNrd2FyZCkge1xuICAgICAgICAgICAgICB3YXlwb2ludC5xdWV1ZVRyaWdnZXIoZGlyZWN0aW9uKTtcbiAgICAgICAgICAgICAgdHJpZ2dlcmVkR3JvdXBzW3dheXBvaW50Lmdyb3VwLmlkXSA9IHdheXBvaW50Lmdyb3VwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAodmFyIGdyb3VwS2V5IGluIHRyaWdnZXJlZEdyb3Vwcykge1xuICAgICAgICAgIHRyaWdnZXJlZEdyb3Vwc1tncm91cEtleV0uZmx1c2hUcmlnZ2VycygpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5vbGRTY3JvbGwgPSB7XG4gICAgICAgICAgeDogYXhlcy5ob3Jpem9udGFsLm5ld1Njcm9sbCxcbiAgICAgICAgICB5OiBheGVzLnZlcnRpY2FsLm5ld1Njcm9sbFxuICAgICAgICB9O1xuICAgICAgfTtcblxuICAgICAgLyogUHJpdmF0ZSAqL1xuICAgICAgQ29udGV4dC5wcm90b3R5cGUuaW5uZXJIZWlnaHQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8qZXNsaW50LWRpc2FibGUgZXFlcWVxICovXG4gICAgICAgIGlmICh0aGlzLmVsZW1lbnQgPT0gdGhpcy5lbGVtZW50LndpbmRvdykge1xuICAgICAgICAgIHJldHVybiBXYXlwb2ludC52aWV3cG9ydEhlaWdodCgpO1xuICAgICAgICB9XG4gICAgICAgIC8qZXNsaW50LWVuYWJsZSBlcWVxZXEgKi9cbiAgICAgICAgcmV0dXJuIHRoaXMuYWRhcHRlci5pbm5lckhlaWdodCgpO1xuICAgICAgfTtcblxuICAgICAgLyogUHJpdmF0ZSAqL1xuICAgICAgQ29udGV4dC5wcm90b3R5cGUucmVtb3ZlID0gZnVuY3Rpb24gKHdheXBvaW50KSB7XG4gICAgICAgIGRlbGV0ZSB0aGlzLndheXBvaW50c1t3YXlwb2ludC5heGlzXVt3YXlwb2ludC5rZXldO1xuICAgICAgICB0aGlzLmNoZWNrRW1wdHkoKTtcbiAgICAgIH07XG5cbiAgICAgIC8qIFByaXZhdGUgKi9cbiAgICAgIENvbnRleHQucHJvdG90eXBlLmlubmVyV2lkdGggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8qZXNsaW50LWRpc2FibGUgZXFlcWVxICovXG4gICAgICAgIGlmICh0aGlzLmVsZW1lbnQgPT0gdGhpcy5lbGVtZW50LndpbmRvdykge1xuICAgICAgICAgIHJldHVybiBXYXlwb2ludC52aWV3cG9ydFdpZHRoKCk7XG4gICAgICAgIH1cbiAgICAgICAgLyplc2xpbnQtZW5hYmxlIGVxZXFlcSAqL1xuICAgICAgICByZXR1cm4gdGhpcy5hZGFwdGVyLmlubmVyV2lkdGgoKTtcbiAgICAgIH07XG5cbiAgICAgIC8qIFB1YmxpYyAqL1xuICAgICAgLyogaHR0cDovL2ltYWtld2VidGhpbmdzLmNvbS93YXlwb2ludHMvYXBpL2NvbnRleHQtZGVzdHJveSAqL1xuICAgICAgQ29udGV4dC5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGFsbFdheXBvaW50cyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBheGlzIGluIHRoaXMud2F5cG9pbnRzKSB7XG4gICAgICAgICAgZm9yICh2YXIgd2F5cG9pbnRLZXkgaW4gdGhpcy53YXlwb2ludHNbYXhpc10pIHtcbiAgICAgICAgICAgIGFsbFdheXBvaW50cy5wdXNoKHRoaXMud2F5cG9pbnRzW2F4aXNdW3dheXBvaW50S2V5XSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBlbmQgPSBhbGxXYXlwb2ludHMubGVuZ3RoOyBpIDwgZW5kOyBpKyspIHtcbiAgICAgICAgICBhbGxXYXlwb2ludHNbaV0uZGVzdHJveSgpO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICAvKiBQdWJsaWMgKi9cbiAgICAgIC8qIGh0dHA6Ly9pbWFrZXdlYnRoaW5ncy5jb20vd2F5cG9pbnRzL2FwaS9jb250ZXh0LXJlZnJlc2ggKi9cbiAgICAgIENvbnRleHQucHJvdG90eXBlLnJlZnJlc2ggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8qZXNsaW50LWRpc2FibGUgZXFlcWVxICovXG4gICAgICAgIHZhciBpc1dpbmRvdyA9IHRoaXMuZWxlbWVudCA9PSB0aGlzLmVsZW1lbnQud2luZG93O1xuICAgICAgICAvKmVzbGludC1lbmFibGUgZXFlcWVxICovXG4gICAgICAgIHZhciBjb250ZXh0T2Zmc2V0ID0gaXNXaW5kb3cgPyB1bmRlZmluZWQgOiB0aGlzLmFkYXB0ZXIub2Zmc2V0KCk7XG4gICAgICAgIHZhciB0cmlnZ2VyZWRHcm91cHMgPSB7fTtcbiAgICAgICAgdmFyIGF4ZXM7XG5cbiAgICAgICAgdGhpcy5oYW5kbGVTY3JvbGwoKTtcbiAgICAgICAgYXhlcyA9IHtcbiAgICAgICAgICBob3Jpem9udGFsOiB7XG4gICAgICAgICAgICBjb250ZXh0T2Zmc2V0OiBpc1dpbmRvdyA/IDAgOiBjb250ZXh0T2Zmc2V0LmxlZnQsXG4gICAgICAgICAgICBjb250ZXh0U2Nyb2xsOiBpc1dpbmRvdyA/IDAgOiB0aGlzLm9sZFNjcm9sbC54LFxuICAgICAgICAgICAgY29udGV4dERpbWVuc2lvbjogdGhpcy5pbm5lcldpZHRoKCksXG4gICAgICAgICAgICBvbGRTY3JvbGw6IHRoaXMub2xkU2Nyb2xsLngsXG4gICAgICAgICAgICBmb3J3YXJkOiAncmlnaHQnLFxuICAgICAgICAgICAgYmFja3dhcmQ6ICdsZWZ0JyxcbiAgICAgICAgICAgIG9mZnNldFByb3A6ICdsZWZ0J1xuICAgICAgICAgIH0sXG4gICAgICAgICAgdmVydGljYWw6IHtcbiAgICAgICAgICAgIGNvbnRleHRPZmZzZXQ6IGlzV2luZG93ID8gMCA6IGNvbnRleHRPZmZzZXQudG9wLFxuICAgICAgICAgICAgY29udGV4dFNjcm9sbDogaXNXaW5kb3cgPyAwIDogdGhpcy5vbGRTY3JvbGwueSxcbiAgICAgICAgICAgIGNvbnRleHREaW1lbnNpb246IHRoaXMuaW5uZXJIZWlnaHQoKSxcbiAgICAgICAgICAgIG9sZFNjcm9sbDogdGhpcy5vbGRTY3JvbGwueSxcbiAgICAgICAgICAgIGZvcndhcmQ6ICdkb3duJyxcbiAgICAgICAgICAgIGJhY2t3YXJkOiAndXAnLFxuICAgICAgICAgICAgb2Zmc2V0UHJvcDogJ3RvcCdcbiAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgZm9yICh2YXIgYXhpc0tleSBpbiBheGVzKSB7XG4gICAgICAgICAgdmFyIGF4aXMgPSBheGVzW2F4aXNLZXldO1xuICAgICAgICAgIGZvciAodmFyIHdheXBvaW50S2V5IGluIHRoaXMud2F5cG9pbnRzW2F4aXNLZXldKSB7XG4gICAgICAgICAgICB2YXIgd2F5cG9pbnQgPSB0aGlzLndheXBvaW50c1theGlzS2V5XVt3YXlwb2ludEtleV07XG4gICAgICAgICAgICB2YXIgYWRqdXN0bWVudCA9IHdheXBvaW50Lm9wdGlvbnMub2Zmc2V0O1xuICAgICAgICAgICAgdmFyIG9sZFRyaWdnZXJQb2ludCA9IHdheXBvaW50LnRyaWdnZXJQb2ludDtcbiAgICAgICAgICAgIHZhciBlbGVtZW50T2Zmc2V0ID0gMDtcbiAgICAgICAgICAgIHZhciBmcmVzaFdheXBvaW50ID0gb2xkVHJpZ2dlclBvaW50ID09IG51bGw7XG4gICAgICAgICAgICB2YXIgY29udGV4dE1vZGlmaWVyLCB3YXNCZWZvcmVTY3JvbGwsIG5vd0FmdGVyU2Nyb2xsO1xuICAgICAgICAgICAgdmFyIHRyaWdnZXJlZEJhY2t3YXJkLCB0cmlnZ2VyZWRGb3J3YXJkO1xuXG4gICAgICAgICAgICBpZiAod2F5cG9pbnQuZWxlbWVudCAhPT0gd2F5cG9pbnQuZWxlbWVudC53aW5kb3cpIHtcbiAgICAgICAgICAgICAgZWxlbWVudE9mZnNldCA9IHdheXBvaW50LmFkYXB0ZXIub2Zmc2V0KClbYXhpcy5vZmZzZXRQcm9wXTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHR5cGVvZiBhZGp1c3RtZW50ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgIGFkanVzdG1lbnQgPSBhZGp1c3RtZW50LmFwcGx5KHdheXBvaW50KTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGFkanVzdG1lbnQgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgIGFkanVzdG1lbnQgPSBwYXJzZUZsb2F0KGFkanVzdG1lbnQpO1xuICAgICAgICAgICAgICBpZiAod2F5cG9pbnQub3B0aW9ucy5vZmZzZXQuaW5kZXhPZignJScpID4gLTEpIHtcbiAgICAgICAgICAgICAgICBhZGp1c3RtZW50ID0gTWF0aC5jZWlsKGF4aXMuY29udGV4dERpbWVuc2lvbiAqIGFkanVzdG1lbnQgLyAxMDApO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnRleHRNb2RpZmllciA9IGF4aXMuY29udGV4dFNjcm9sbCAtIGF4aXMuY29udGV4dE9mZnNldDtcbiAgICAgICAgICAgIHdheXBvaW50LnRyaWdnZXJQb2ludCA9IGVsZW1lbnRPZmZzZXQgKyBjb250ZXh0TW9kaWZpZXIgLSBhZGp1c3RtZW50O1xuICAgICAgICAgICAgd2FzQmVmb3JlU2Nyb2xsID0gb2xkVHJpZ2dlclBvaW50IDwgYXhpcy5vbGRTY3JvbGw7XG4gICAgICAgICAgICBub3dBZnRlclNjcm9sbCA9IHdheXBvaW50LnRyaWdnZXJQb2ludCA+PSBheGlzLm9sZFNjcm9sbDtcbiAgICAgICAgICAgIHRyaWdnZXJlZEJhY2t3YXJkID0gd2FzQmVmb3JlU2Nyb2xsICYmIG5vd0FmdGVyU2Nyb2xsO1xuICAgICAgICAgICAgdHJpZ2dlcmVkRm9yd2FyZCA9ICF3YXNCZWZvcmVTY3JvbGwgJiYgIW5vd0FmdGVyU2Nyb2xsO1xuXG4gICAgICAgICAgICBpZiAoIWZyZXNoV2F5cG9pbnQgJiYgdHJpZ2dlcmVkQmFja3dhcmQpIHtcbiAgICAgICAgICAgICAgd2F5cG9pbnQucXVldWVUcmlnZ2VyKGF4aXMuYmFja3dhcmQpO1xuICAgICAgICAgICAgICB0cmlnZ2VyZWRHcm91cHNbd2F5cG9pbnQuZ3JvdXAuaWRdID0gd2F5cG9pbnQuZ3JvdXA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKCFmcmVzaFdheXBvaW50ICYmIHRyaWdnZXJlZEZvcndhcmQpIHtcbiAgICAgICAgICAgICAgd2F5cG9pbnQucXVldWVUcmlnZ2VyKGF4aXMuZm9yd2FyZCk7XG4gICAgICAgICAgICAgIHRyaWdnZXJlZEdyb3Vwc1t3YXlwb2ludC5ncm91cC5pZF0gPSB3YXlwb2ludC5ncm91cDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZnJlc2hXYXlwb2ludCAmJiBheGlzLm9sZFNjcm9sbCA+PSB3YXlwb2ludC50cmlnZ2VyUG9pbnQpIHtcbiAgICAgICAgICAgICAgd2F5cG9pbnQucXVldWVUcmlnZ2VyKGF4aXMuZm9yd2FyZCk7XG4gICAgICAgICAgICAgIHRyaWdnZXJlZEdyb3Vwc1t3YXlwb2ludC5ncm91cC5pZF0gPSB3YXlwb2ludC5ncm91cDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBXYXlwb2ludC5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGZvciAodmFyIGdyb3VwS2V5IGluIHRyaWdnZXJlZEdyb3Vwcykge1xuICAgICAgICAgICAgdHJpZ2dlcmVkR3JvdXBzW2dyb3VwS2V5XS5mbHVzaFRyaWdnZXJzKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH07XG5cbiAgICAgIC8qIFByaXZhdGUgKi9cbiAgICAgIENvbnRleHQuZmluZE9yQ3JlYXRlQnlFbGVtZW50ID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgcmV0dXJuIENvbnRleHQuZmluZEJ5RWxlbWVudChlbGVtZW50KSB8fCBuZXcgQ29udGV4dChlbGVtZW50KTtcbiAgICAgIH07XG5cbiAgICAgIC8qIFByaXZhdGUgKi9cbiAgICAgIENvbnRleHQucmVmcmVzaEFsbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZm9yICh2YXIgY29udGV4dElkIGluIGNvbnRleHRzKSB7XG4gICAgICAgICAgY29udGV4dHNbY29udGV4dElkXS5yZWZyZXNoKCk7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIC8qIFB1YmxpYyAqL1xuICAgICAgLyogaHR0cDovL2ltYWtld2VidGhpbmdzLmNvbS93YXlwb2ludHMvYXBpL2NvbnRleHQtZmluZC1ieS1lbGVtZW50ICovXG4gICAgICBDb250ZXh0LmZpbmRCeUVsZW1lbnQgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICByZXR1cm4gY29udGV4dHNbZWxlbWVudC53YXlwb2ludENvbnRleHRLZXldO1xuICAgICAgfTtcblxuICAgICAgd2luZG93Lm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKG9sZFdpbmRvd0xvYWQpIHtcbiAgICAgICAgICBvbGRXaW5kb3dMb2FkKCk7XG4gICAgICAgIH1cbiAgICAgICAgQ29udGV4dC5yZWZyZXNoQWxsKCk7XG4gICAgICB9O1xuXG4gICAgICBXYXlwb2ludC5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIHJlcXVlc3RGbiA9IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHwgd2luZG93Lm1velJlcXVlc3RBbmltYXRpb25GcmFtZSB8fCB3aW5kb3cud2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8IHJlcXVlc3RBbmltYXRpb25GcmFtZVNoaW07XG4gICAgICAgIHJlcXVlc3RGbi5jYWxsKHdpbmRvdywgY2FsbGJhY2spO1xuICAgICAgfTtcbiAgICAgIFdheXBvaW50LkNvbnRleHQgPSBDb250ZXh0O1xuICAgIH0pKCk7KGZ1bmN0aW9uICgpIHtcbiAgICAgICd1c2Ugc3RyaWN0JztcblxuICAgICAgZnVuY3Rpb24gYnlUcmlnZ2VyUG9pbnQoYSwgYikge1xuICAgICAgICByZXR1cm4gYS50cmlnZ2VyUG9pbnQgLSBiLnRyaWdnZXJQb2ludDtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gYnlSZXZlcnNlVHJpZ2dlclBvaW50KGEsIGIpIHtcbiAgICAgICAgcmV0dXJuIGIudHJpZ2dlclBvaW50IC0gYS50cmlnZ2VyUG9pbnQ7XG4gICAgICB9XG5cbiAgICAgIHZhciBncm91cHMgPSB7XG4gICAgICAgIHZlcnRpY2FsOiB7fSxcbiAgICAgICAgaG9yaXpvbnRhbDoge31cbiAgICAgIH07XG4gICAgICB2YXIgV2F5cG9pbnQgPSB3aW5kb3cuV2F5cG9pbnQ7XG5cbiAgICAgIC8qIGh0dHA6Ly9pbWFrZXdlYnRoaW5ncy5jb20vd2F5cG9pbnRzL2FwaS9ncm91cCAqL1xuICAgICAgZnVuY3Rpb24gR3JvdXAob3B0aW9ucykge1xuICAgICAgICB0aGlzLm5hbWUgPSBvcHRpb25zLm5hbWU7XG4gICAgICAgIHRoaXMuYXhpcyA9IG9wdGlvbnMuYXhpcztcbiAgICAgICAgdGhpcy5pZCA9IHRoaXMubmFtZSArICctJyArIHRoaXMuYXhpcztcbiAgICAgICAgdGhpcy53YXlwb2ludHMgPSBbXTtcbiAgICAgICAgdGhpcy5jbGVhclRyaWdnZXJRdWV1ZXMoKTtcbiAgICAgICAgZ3JvdXBzW3RoaXMuYXhpc11bdGhpcy5uYW1lXSA9IHRoaXM7XG4gICAgICB9XG5cbiAgICAgIC8qIFByaXZhdGUgKi9cbiAgICAgIEdyb3VwLnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbiAod2F5cG9pbnQpIHtcbiAgICAgICAgdGhpcy53YXlwb2ludHMucHVzaCh3YXlwb2ludCk7XG4gICAgICB9O1xuXG4gICAgICAvKiBQcml2YXRlICovXG4gICAgICBHcm91cC5wcm90b3R5cGUuY2xlYXJUcmlnZ2VyUXVldWVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnRyaWdnZXJRdWV1ZXMgPSB7XG4gICAgICAgICAgdXA6IFtdLFxuICAgICAgICAgIGRvd246IFtdLFxuICAgICAgICAgIGxlZnQ6IFtdLFxuICAgICAgICAgIHJpZ2h0OiBbXVxuICAgICAgICB9O1xuICAgICAgfTtcblxuICAgICAgLyogUHJpdmF0ZSAqL1xuICAgICAgR3JvdXAucHJvdG90eXBlLmZsdXNoVHJpZ2dlcnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZvciAodmFyIGRpcmVjdGlvbiBpbiB0aGlzLnRyaWdnZXJRdWV1ZXMpIHtcbiAgICAgICAgICB2YXIgd2F5cG9pbnRzID0gdGhpcy50cmlnZ2VyUXVldWVzW2RpcmVjdGlvbl07XG4gICAgICAgICAgdmFyIHJldmVyc2UgPSBkaXJlY3Rpb24gPT09ICd1cCcgfHwgZGlyZWN0aW9uID09PSAnbGVmdCc7XG4gICAgICAgICAgd2F5cG9pbnRzLnNvcnQocmV2ZXJzZSA/IGJ5UmV2ZXJzZVRyaWdnZXJQb2ludCA6IGJ5VHJpZ2dlclBvaW50KTtcbiAgICAgICAgICBmb3IgKHZhciBpID0gMCwgZW5kID0gd2F5cG9pbnRzLmxlbmd0aDsgaSA8IGVuZDsgaSArPSAxKSB7XG4gICAgICAgICAgICB2YXIgd2F5cG9pbnQgPSB3YXlwb2ludHNbaV07XG4gICAgICAgICAgICBpZiAod2F5cG9pbnQub3B0aW9ucy5jb250aW51b3VzIHx8IGkgPT09IHdheXBvaW50cy5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICAgIHdheXBvaW50LnRyaWdnZXIoW2RpcmVjdGlvbl0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNsZWFyVHJpZ2dlclF1ZXVlcygpO1xuICAgICAgfTtcblxuICAgICAgLyogUHJpdmF0ZSAqL1xuICAgICAgR3JvdXAucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAod2F5cG9pbnQpIHtcbiAgICAgICAgdGhpcy53YXlwb2ludHMuc29ydChieVRyaWdnZXJQb2ludCk7XG4gICAgICAgIHZhciBpbmRleCA9IFdheXBvaW50LkFkYXB0ZXIuaW5BcnJheSh3YXlwb2ludCwgdGhpcy53YXlwb2ludHMpO1xuICAgICAgICB2YXIgaXNMYXN0ID0gaW5kZXggPT09IHRoaXMud2F5cG9pbnRzLmxlbmd0aCAtIDE7XG4gICAgICAgIHJldHVybiBpc0xhc3QgPyBudWxsIDogdGhpcy53YXlwb2ludHNbaW5kZXggKyAxXTtcbiAgICAgIH07XG5cbiAgICAgIC8qIFByaXZhdGUgKi9cbiAgICAgIEdyb3VwLnByb3RvdHlwZS5wcmV2aW91cyA9IGZ1bmN0aW9uICh3YXlwb2ludCkge1xuICAgICAgICB0aGlzLndheXBvaW50cy5zb3J0KGJ5VHJpZ2dlclBvaW50KTtcbiAgICAgICAgdmFyIGluZGV4ID0gV2F5cG9pbnQuQWRhcHRlci5pbkFycmF5KHdheXBvaW50LCB0aGlzLndheXBvaW50cyk7XG4gICAgICAgIHJldHVybiBpbmRleCA/IHRoaXMud2F5cG9pbnRzW2luZGV4IC0gMV0gOiBudWxsO1xuICAgICAgfTtcblxuICAgICAgLyogUHJpdmF0ZSAqL1xuICAgICAgR3JvdXAucHJvdG90eXBlLnF1ZXVlVHJpZ2dlciA9IGZ1bmN0aW9uICh3YXlwb2ludCwgZGlyZWN0aW9uKSB7XG4gICAgICAgIHRoaXMudHJpZ2dlclF1ZXVlc1tkaXJlY3Rpb25dLnB1c2god2F5cG9pbnQpO1xuICAgICAgfTtcblxuICAgICAgLyogUHJpdmF0ZSAqL1xuICAgICAgR3JvdXAucHJvdG90eXBlLnJlbW92ZSA9IGZ1bmN0aW9uICh3YXlwb2ludCkge1xuICAgICAgICB2YXIgaW5kZXggPSBXYXlwb2ludC5BZGFwdGVyLmluQXJyYXkod2F5cG9pbnQsIHRoaXMud2F5cG9pbnRzKTtcbiAgICAgICAgaWYgKGluZGV4ID4gLTEpIHtcbiAgICAgICAgICB0aGlzLndheXBvaW50cy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICAvKiBQdWJsaWMgKi9cbiAgICAgIC8qIGh0dHA6Ly9pbWFrZXdlYnRoaW5ncy5jb20vd2F5cG9pbnRzL2FwaS9maXJzdCAqL1xuICAgICAgR3JvdXAucHJvdG90eXBlLmZpcnN0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy53YXlwb2ludHNbMF07XG4gICAgICB9O1xuXG4gICAgICAvKiBQdWJsaWMgKi9cbiAgICAgIC8qIGh0dHA6Ly9pbWFrZXdlYnRoaW5ncy5jb20vd2F5cG9pbnRzL2FwaS9sYXN0ICovXG4gICAgICBHcm91cC5wcm90b3R5cGUubGFzdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud2F5cG9pbnRzW3RoaXMud2F5cG9pbnRzLmxlbmd0aCAtIDFdO1xuICAgICAgfTtcblxuICAgICAgLyogUHJpdmF0ZSAqL1xuICAgICAgR3JvdXAuZmluZE9yQ3JlYXRlID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIGdyb3Vwc1tvcHRpb25zLmF4aXNdW29wdGlvbnMubmFtZV0gfHwgbmV3IEdyb3VwKG9wdGlvbnMpO1xuICAgICAgfTtcblxuICAgICAgV2F5cG9pbnQuR3JvdXAgPSBHcm91cDtcbiAgICB9KSgpOyhmdW5jdGlvbiAoKSB7XG4gICAgICAndXNlIHN0cmljdCc7XG5cbiAgICAgIHZhciBXYXlwb2ludCA9IHdpbmRvdy5XYXlwb2ludDtcblxuICAgICAgZnVuY3Rpb24gaXNXaW5kb3coZWxlbWVudCkge1xuICAgICAgICByZXR1cm4gZWxlbWVudCA9PT0gZWxlbWVudC53aW5kb3c7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGdldFdpbmRvdyhlbGVtZW50KSB7XG4gICAgICAgIGlmIChpc1dpbmRvdyhlbGVtZW50KSkge1xuICAgICAgICAgIHJldHVybiBlbGVtZW50O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlbGVtZW50LmRlZmF1bHRWaWV3O1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBOb0ZyYW1ld29ya0FkYXB0ZXIoZWxlbWVudCkge1xuICAgICAgICB0aGlzLmVsZW1lbnQgPSBlbGVtZW50O1xuICAgICAgICB0aGlzLmhhbmRsZXJzID0ge307XG4gICAgICB9XG5cbiAgICAgIE5vRnJhbWV3b3JrQWRhcHRlci5wcm90b3R5cGUuaW5uZXJIZWlnaHQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBpc1dpbiA9IGlzV2luZG93KHRoaXMuZWxlbWVudCk7XG4gICAgICAgIHJldHVybiBpc1dpbiA/IHRoaXMuZWxlbWVudC5pbm5lckhlaWdodCA6IHRoaXMuZWxlbWVudC5jbGllbnRIZWlnaHQ7XG4gICAgICB9O1xuXG4gICAgICBOb0ZyYW1ld29ya0FkYXB0ZXIucHJvdG90eXBlLmlubmVyV2lkdGggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBpc1dpbiA9IGlzV2luZG93KHRoaXMuZWxlbWVudCk7XG4gICAgICAgIHJldHVybiBpc1dpbiA/IHRoaXMuZWxlbWVudC5pbm5lcldpZHRoIDogdGhpcy5lbGVtZW50LmNsaWVudFdpZHRoO1xuICAgICAgfTtcblxuICAgICAgTm9GcmFtZXdvcmtBZGFwdGVyLnByb3RvdHlwZS5vZmYgPSBmdW5jdGlvbiAoZXZlbnQsIGhhbmRsZXIpIHtcbiAgICAgICAgZnVuY3Rpb24gcmVtb3ZlTGlzdGVuZXJzKGVsZW1lbnQsIGxpc3RlbmVycywgaGFuZGxlcikge1xuICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBlbmQgPSBsaXN0ZW5lcnMubGVuZ3RoIC0gMTsgaSA8IGVuZDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgbGlzdGVuZXIgPSBsaXN0ZW5lcnNbaV07XG4gICAgICAgICAgICBpZiAoIWhhbmRsZXIgfHwgaGFuZGxlciA9PT0gbGlzdGVuZXIpIHtcbiAgICAgICAgICAgICAgZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKGxpc3RlbmVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgZXZlbnRQYXJ0cyA9IGV2ZW50LnNwbGl0KCcuJyk7XG4gICAgICAgIHZhciBldmVudFR5cGUgPSBldmVudFBhcnRzWzBdO1xuICAgICAgICB2YXIgbmFtZXNwYWNlID0gZXZlbnRQYXJ0c1sxXTtcbiAgICAgICAgdmFyIGVsZW1lbnQgPSB0aGlzLmVsZW1lbnQ7XG5cbiAgICAgICAgaWYgKG5hbWVzcGFjZSAmJiB0aGlzLmhhbmRsZXJzW25hbWVzcGFjZV0gJiYgZXZlbnRUeXBlKSB7XG4gICAgICAgICAgcmVtb3ZlTGlzdGVuZXJzKGVsZW1lbnQsIHRoaXMuaGFuZGxlcnNbbmFtZXNwYWNlXVtldmVudFR5cGVdLCBoYW5kbGVyKTtcbiAgICAgICAgICB0aGlzLmhhbmRsZXJzW25hbWVzcGFjZV1bZXZlbnRUeXBlXSA9IFtdO1xuICAgICAgICB9IGVsc2UgaWYgKGV2ZW50VHlwZSkge1xuICAgICAgICAgIGZvciAodmFyIG5zIGluIHRoaXMuaGFuZGxlcnMpIHtcbiAgICAgICAgICAgIHJlbW92ZUxpc3RlbmVycyhlbGVtZW50LCB0aGlzLmhhbmRsZXJzW25zXVtldmVudFR5cGVdIHx8IFtdLCBoYW5kbGVyKTtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlcnNbbnNdW2V2ZW50VHlwZV0gPSBbXTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAobmFtZXNwYWNlICYmIHRoaXMuaGFuZGxlcnNbbmFtZXNwYWNlXSkge1xuICAgICAgICAgIGZvciAodmFyIHR5cGUgaW4gdGhpcy5oYW5kbGVyc1tuYW1lc3BhY2VdKSB7XG4gICAgICAgICAgICByZW1vdmVMaXN0ZW5lcnMoZWxlbWVudCwgdGhpcy5oYW5kbGVyc1tuYW1lc3BhY2VdW3R5cGVdLCBoYW5kbGVyKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy5oYW5kbGVyc1tuYW1lc3BhY2VdID0ge307XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIC8qIEFkYXB0ZWQgZnJvbSBqUXVlcnkgMS54IG9mZnNldCgpICovXG4gICAgICBOb0ZyYW1ld29ya0FkYXB0ZXIucHJvdG90eXBlLm9mZnNldCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmVsZW1lbnQub3duZXJEb2N1bWVudCkge1xuICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGRvY3VtZW50RWxlbWVudCA9IHRoaXMuZWxlbWVudC5vd25lckRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtcbiAgICAgICAgdmFyIHdpbiA9IGdldFdpbmRvdyh0aGlzLmVsZW1lbnQub3duZXJEb2N1bWVudCk7XG4gICAgICAgIHZhciByZWN0ID0ge1xuICAgICAgICAgIHRvcDogMCxcbiAgICAgICAgICBsZWZ0OiAwXG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKHRoaXMuZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QpIHtcbiAgICAgICAgICByZWN0ID0gdGhpcy5lbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB0b3A6IHJlY3QudG9wICsgd2luLnBhZ2VZT2Zmc2V0IC0gZG9jdW1lbnRFbGVtZW50LmNsaWVudFRvcCxcbiAgICAgICAgICBsZWZ0OiByZWN0LmxlZnQgKyB3aW4ucGFnZVhPZmZzZXQgLSBkb2N1bWVudEVsZW1lbnQuY2xpZW50TGVmdFxuICAgICAgICB9O1xuICAgICAgfTtcblxuICAgICAgTm9GcmFtZXdvcmtBZGFwdGVyLnByb3RvdHlwZS5vbiA9IGZ1bmN0aW9uIChldmVudCwgaGFuZGxlcikge1xuICAgICAgICB2YXIgZXZlbnRQYXJ0cyA9IGV2ZW50LnNwbGl0KCcuJyk7XG4gICAgICAgIHZhciBldmVudFR5cGUgPSBldmVudFBhcnRzWzBdO1xuICAgICAgICB2YXIgbmFtZXNwYWNlID0gZXZlbnRQYXJ0c1sxXSB8fCAnX19kZWZhdWx0JztcbiAgICAgICAgdmFyIG5zSGFuZGxlcnMgPSB0aGlzLmhhbmRsZXJzW25hbWVzcGFjZV0gPSB0aGlzLmhhbmRsZXJzW25hbWVzcGFjZV0gfHwge307XG4gICAgICAgIHZhciBuc1R5cGVMaXN0ID0gbnNIYW5kbGVyc1tldmVudFR5cGVdID0gbnNIYW5kbGVyc1tldmVudFR5cGVdIHx8IFtdO1xuXG4gICAgICAgIG5zVHlwZUxpc3QucHVzaChoYW5kbGVyKTtcbiAgICAgICAgdGhpcy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnRUeXBlLCBoYW5kbGVyKTtcbiAgICAgIH07XG5cbiAgICAgIE5vRnJhbWV3b3JrQWRhcHRlci5wcm90b3R5cGUub3V0ZXJIZWlnaHQgPSBmdW5jdGlvbiAoaW5jbHVkZU1hcmdpbikge1xuICAgICAgICB2YXIgaGVpZ2h0ID0gdGhpcy5pbm5lckhlaWdodCgpO1xuICAgICAgICB2YXIgY29tcHV0ZWRTdHlsZTtcblxuICAgICAgICBpZiAoaW5jbHVkZU1hcmdpbiAmJiAhaXNXaW5kb3codGhpcy5lbGVtZW50KSkge1xuICAgICAgICAgIGNvbXB1dGVkU3R5bGUgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgIGhlaWdodCArPSBwYXJzZUludChjb21wdXRlZFN0eWxlLm1hcmdpblRvcCwgMTApO1xuICAgICAgICAgIGhlaWdodCArPSBwYXJzZUludChjb21wdXRlZFN0eWxlLm1hcmdpbkJvdHRvbSwgMTApO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGhlaWdodDtcbiAgICAgIH07XG5cbiAgICAgIE5vRnJhbWV3b3JrQWRhcHRlci5wcm90b3R5cGUub3V0ZXJXaWR0aCA9IGZ1bmN0aW9uIChpbmNsdWRlTWFyZ2luKSB7XG4gICAgICAgIHZhciB3aWR0aCA9IHRoaXMuaW5uZXJXaWR0aCgpO1xuICAgICAgICB2YXIgY29tcHV0ZWRTdHlsZTtcblxuICAgICAgICBpZiAoaW5jbHVkZU1hcmdpbiAmJiAhaXNXaW5kb3codGhpcy5lbGVtZW50KSkge1xuICAgICAgICAgIGNvbXB1dGVkU3R5bGUgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgIHdpZHRoICs9IHBhcnNlSW50KGNvbXB1dGVkU3R5bGUubWFyZ2luTGVmdCwgMTApO1xuICAgICAgICAgIHdpZHRoICs9IHBhcnNlSW50KGNvbXB1dGVkU3R5bGUubWFyZ2luUmlnaHQsIDEwKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB3aWR0aDtcbiAgICAgIH07XG5cbiAgICAgIE5vRnJhbWV3b3JrQWRhcHRlci5wcm90b3R5cGUuc2Nyb2xsTGVmdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHdpbiA9IGdldFdpbmRvdyh0aGlzLmVsZW1lbnQpO1xuICAgICAgICByZXR1cm4gd2luID8gd2luLnBhZ2VYT2Zmc2V0IDogdGhpcy5lbGVtZW50LnNjcm9sbExlZnQ7XG4gICAgICB9O1xuXG4gICAgICBOb0ZyYW1ld29ya0FkYXB0ZXIucHJvdG90eXBlLnNjcm9sbFRvcCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHdpbiA9IGdldFdpbmRvdyh0aGlzLmVsZW1lbnQpO1xuICAgICAgICByZXR1cm4gd2luID8gd2luLnBhZ2VZT2Zmc2V0IDogdGhpcy5lbGVtZW50LnNjcm9sbFRvcDtcbiAgICAgIH07XG5cbiAgICAgIE5vRnJhbWV3b3JrQWRhcHRlci5leHRlbmQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKTtcblxuICAgICAgICBmdW5jdGlvbiBtZXJnZSh0YXJnZXQsIG9iaikge1xuICAgICAgICAgIGlmICgodHlwZW9mIHRhcmdldCA9PT0gXCJ1bmRlZmluZWRcIiA/IFwidW5kZWZpbmVkXCIgOiBfdHlwZW9mKHRhcmdldCkpID09PSAnb2JqZWN0JyAmJiAodHlwZW9mIG9iaiA9PT0gXCJ1bmRlZmluZWRcIiA/IFwidW5kZWZpbmVkXCIgOiBfdHlwZW9mKG9iaikpID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIG9iaikge1xuICAgICAgICAgICAgICBpZiAob2JqLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICAgICAgICB0YXJnZXRba2V5XSA9IG9ialtrZXldO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuIHRhcmdldDtcbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAodmFyIGkgPSAxLCBlbmQgPSBhcmdzLmxlbmd0aDsgaSA8IGVuZDsgaSsrKSB7XG4gICAgICAgICAgbWVyZ2UoYXJnc1swXSwgYXJnc1tpXSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFyZ3NbMF07XG4gICAgICB9O1xuXG4gICAgICBOb0ZyYW1ld29ya0FkYXB0ZXIuaW5BcnJheSA9IGZ1bmN0aW9uIChlbGVtZW50LCBhcnJheSwgaSkge1xuICAgICAgICByZXR1cm4gYXJyYXkgPT0gbnVsbCA/IC0xIDogYXJyYXkuaW5kZXhPZihlbGVtZW50LCBpKTtcbiAgICAgIH07XG5cbiAgICAgIE5vRnJhbWV3b3JrQWRhcHRlci5pc0VtcHR5T2JqZWN0ID0gZnVuY3Rpb24gKG9iaikge1xuICAgICAgICAvKiBlc2xpbnQgbm8tdW51c2VkLXZhcnM6IDAgKi9cbiAgICAgICAgZm9yICh2YXIgbmFtZSBpbiBvYmopIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9O1xuXG4gICAgICBXYXlwb2ludC5hZGFwdGVycy5wdXNoKHtcbiAgICAgICAgbmFtZTogJ25vZnJhbWV3b3JrJyxcbiAgICAgICAgQWRhcHRlcjogTm9GcmFtZXdvcmtBZGFwdGVyXG4gICAgICB9KTtcbiAgICAgIFdheXBvaW50LkFkYXB0ZXIgPSBOb0ZyYW1ld29ya0FkYXB0ZXI7XG4gICAgfSkoKTtcbiAgfSwge31dIH0sIHt9LCBbMV0pOyIsIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dGhyb3cgbmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKX12YXIgZj1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwoZi5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxmLGYuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pKHsxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbid1c2Ugc3RyaWN0J1xuXG5yZXF1aXJlKCcuLi9ub2RlX21vZHVsZXMvd2F5cG9pbnRzL2xpYi9ub2ZyYW1ld29yay53YXlwb2ludHMnKTtcblxubGV0IGRvY1N0eWxlID0gZG9jdW1lbnQuYm9keS5zdHlsZTtcbmxldCBiZ1BhdGggPSBkb2N1bWVudC5sb2NhdGlvbiArICdpbWFnZXMvYmcvJztcbmxldCBpbWdFeHQgPSAnLnBuZyc7XG5sZXQgYmdzID0gWydGZWF0aGVyX1RPTkUnLCAnRHVja1ByaW50c19GZWF0aGVyX1RPTkUnLCAnV2FsbFBhcGVyMi41JywgJ1dhbGxQYXBlcjMnLCAnV2FsbFBhcGVyMy41JywgJ1dhbGxQYXBlcjQnLCAnV2FsbFBhcGVyNC41JywgJ1dhbGxQYXBlcjUuNScsICdXYWxsUGFwZXI1LjVfdG9uZScsJ1dhbGxQYXBlcjYnLCAnV2FsbFBhcGVyNi41JywgJ1dhbGxQYXBlcjcuNScsICdXYWxsUGFwZXI3LjVfdG9uZSddO1xubGV0IGJnSW1hZ2VzTG9hZGVkID0gZmFsc2U7XG5sZXQgY2F0ZWdvcnlTZWN0aW9ucyA9IFsnc20tbmV3LWVtcGxveWVlcy1jb250YWluZXInLCAnc20tY3VycmVudC1lbXBsb3llZXMtY29udGFpbmVyJywgJ3NtLWV4aXRpbmctZW1wbG95ZWVzLWNvbnRhaW5lcicsICdzbS1jYWRpbGxhYy10YXgtY29udGFpbmVyJywgJ3NtLXBlbmFsdGllcy1jb250YWluZXInLCAnc20tYmVuZWZpdHMtcmVxdWlyZW1lbnRzLWNvbnRhaW5lcicsICdzbS12b2x1bnRhcnktaW5zdXJhbmNlLWNvbnRhaW5lcicsICdzbS1leGNoYW5nZXMtY29udGFpbmVyJywgJ3NtLXdoYXRzLW5leHQtY29udGFpbmVyJywgJ25ldy1lbXBsb3llZXMtY29udGFpbmVyJywgJ2N1cnJlbnQtZW1wbG95ZWVzLWNvbnRhaW5lcicsICdleGl0aW5nLWVtcGxveWVlcy1jb250YWluZXInLCAnY2FkaWxsYWMtdGF4LWNvbnRhaW5lcicsICdwZW5hbHRpZXMtY29udGFpbmVyJywgJ2JlbmVmaXRzLXJlcXVpcmVtZW50cy1jb250YWluZXInLCAndm9sdW50YXJ5LWluc3VyYW5jZS1jb250YWluZXInLCAnZXhjaGFuZ2VzLWNvbnRhaW5lcicsICd3aGF0cy1uZXh0LWNvbnRhaW5lciddO1xuXG5jb25zdCBsb2FkV2F5cG9pbnRzID0gZnVuY3Rpb24gKCkge1xuICAgIC8vIEJlbmVmaXRzXG4gICAgbmV3IFdheXBvaW50KHtcbiAgICAgICAgZWxlbWVudDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NtLWJlbmVmaXRzLXJlcXVpcmVtZW50cycpLFxuICAgICAgICBoYW5kbGVyOiBmdW5jdGlvbiAoZGlyZWN0aW9uKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmVsZW1lbnQuY2xpZW50SGVpZ2h0KTtcbiAgICAgICAgICAgIGpRdWVyeSgnI3NtLWJlbmVmaXRzLXJlcXVpcmVtZW50czpub3QoLnNob3duKScpLmFkZENsYXNzKCdhbmltYXRlZCBib3VuY2VJbkRvd24gc2hvd24nKTtcbiAgICAgICAgICAgIGpRdWVyeSgnI3NtLWJlbmVmaXRzLXJlcXVpcmVtZW50cycpLm9uZSgnd2Via2l0QW5pbWF0aW9uRW5kIG9hbmltYXRpb25lbmQgbXNBbmltYXRpb25FbmQgYW5pbWF0aW9uZW5kJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGpRdWVyeSgnI3NtLWJlbmVmaXRzLXJlcXVpcmVtZW50cycpLnJlbW92ZUNsYXNzKCdhbmltYXRlZCBib3VuY2VJbkRvd24nKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy9kaXJlY3Rpb24gPT09ICdkb3duJyA/IGxvYWRCZyhpbmRleCArIDEpIDogbG9hZEJnKGluZGV4KTtcbiAgICAgICAgfSxcbiAgICAgICAgb2Zmc2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gd2luZG93LmlubmVySGVpZ2h0IC0gdGhpcy5lbGVtZW50LmNsaWVudEhlaWdodCAqIDI7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIE5ldyBFbXBsb3llZXNcbiAgICBuZXcgV2F5cG9pbnQoe1xuICAgICAgICBlbGVtZW50OiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc20tbmV3LWVtcGxveWVlcycpLFxuICAgICAgICBoYW5kbGVyOiBmdW5jdGlvbiAoZGlyZWN0aW9uKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmVsZW1lbnQuY2xpZW50SGVpZ2h0KTtcbiAgICAgICAgICAgIGpRdWVyeSgnI3NtLW5ldy1lbXBsb3llZXM6bm90KC5zaG93biknKS5hZGRDbGFzcygnYW5pbWF0ZWQgem9vbUluVXAgc2hvd24nKTtcbiAgICAgICAgICAgIGpRdWVyeSgnI3NtLW5ldy1lbXBsb3llZXMnKS5vbmUoJ3dlYmtpdEFuaW1hdGlvbkVuZCBvYW5pbWF0aW9uZW5kIG1zQW5pbWF0aW9uRW5kIGFuaW1hdGlvbmVuZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBqUXVlcnkoJyNzbS1uZXctZW1wbG95ZWVzJykucmVtb3ZlQ2xhc3MoJ2FuaW1hdGVkIHpvb21JblVwICAnKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy9kaXJlY3Rpb24gPT09ICdkb3duJyA/IGxvYWRCZyhpbmRleCArIDEpIDogbG9hZEJnKGluZGV4KTtcbiAgICAgICAgfSxcbiAgICAgICAgb2Zmc2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gd2luZG93LmlubmVySGVpZ2h0IC0gdGhpcy5lbGVtZW50LmNsaWVudEhlaWdodCAqIDI7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIEN1cnJlbnQgRW1wbG95ZWVzXG4gICAgbmV3IFdheXBvaW50KHtcbiAgICAgICAgZWxlbWVudDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NtLWN1cnJlbnQtZW1wbG95ZWVzJyksXG4gICAgICAgIGhhbmRsZXI6IGZ1bmN0aW9uIChkaXJlY3Rpb24pIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuZWxlbWVudC5jbGllbnRIZWlnaHQpO1xuICAgICAgICAgICAgalF1ZXJ5KCcjc20tY3VycmVudC1lbXBsb3llZXM6bm90KC5zaG93biknKS5hZGRDbGFzcygnYW5pbWF0ZWQgamVsbG8gc2hvd24nKTtcbiAgICAgICAgICAgIGpRdWVyeSgnI3NtLWN1cnJlbnQtZW1wbG95ZWVzJykub25lKCd3ZWJraXRBbmltYXRpb25FbmQgb2FuaW1hdGlvbmVuZCBtc0FuaW1hdGlvbkVuZCBhbmltYXRpb25lbmQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgalF1ZXJ5KCcjc20tY3VycmVudC1lbXBsb3llZXMnKS5yZW1vdmVDbGFzcygnYW5pbWF0ZWQgamVsbG8gICcpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvL2RpcmVjdGlvbiA9PT0gJ2Rvd24nID8gbG9hZEJnKGluZGV4ICsgMSkgOiBsb2FkQmcoaW5kZXgpO1xuICAgICAgICB9LFxuICAgICAgICBvZmZzZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB3aW5kb3cuaW5uZXJIZWlnaHQgLSB0aGlzLmVsZW1lbnQuY2xpZW50SGVpZ2h0ICogMjtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gRXhpdGluZyBFbXBsb3llZXNcbiAgICBuZXcgV2F5cG9pbnQoe1xuICAgICAgICBlbGVtZW50OiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc20tZXhpdGluZy1lbXBsb3llZXMnKSxcbiAgICAgICAgaGFuZGxlcjogZnVuY3Rpb24gKGRpcmVjdGlvbikge1xuICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy5lbGVtZW50LmNsaWVudEhlaWdodCk7XG4gICAgICAgICAgICBqUXVlcnkoJyNzbS1leGl0aW5nLWVtcGxveWVlczpub3QoLnNob3duKScpLmFkZENsYXNzKCdhbmltYXRlZCBmbGlwIHNob3duJyk7XG4gICAgICAgICAgICBqUXVlcnkoJyNzbS1leGl0aW5nLWVtcGxveWVlcycpLm9uZSgnd2Via2l0QW5pbWF0aW9uRW5kIG9hbmltYXRpb25lbmQgbXNBbmltYXRpb25FbmQgYW5pbWF0aW9uZW5kJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGpRdWVyeSgnI3NtLWV4aXRpbmctZW1wbG95ZWVzJykucmVtb3ZlQ2xhc3MoJ2FuaW1hdGVkIGZsaXAnKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy9kaXJlY3Rpb24gPT09ICdkb3duJyA/IGxvYWRCZyhpbmRleCArIDEpIDogbG9hZEJnKGluZGV4KTtcbiAgICAgICAgfSxcbiAgICAgICAgb2Zmc2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gd2luZG93LmlubmVySGVpZ2h0IC0gdGhpcy5lbGVtZW50LmNsaWVudEhlaWdodCAqIDI7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIFBlbmFsdGllc1xuICAgIG5ldyBXYXlwb2ludCh7XG4gICAgICAgIGVsZW1lbnQ6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzbS1wZW5hbHRpZXMnKSxcbiAgICAgICAgaGFuZGxlcjogZnVuY3Rpb24gKGRpcmVjdGlvbikge1xuICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy5lbGVtZW50LmNsaWVudEhlaWdodCk7XG4gICAgICAgICAgICBqUXVlcnkoJyNzbS1wZW5hbHRpZXM6bm90KC5zaG93biknKS5hZGRDbGFzcygnYW5pbWF0ZWQgem9vbUluVXAgc2hvd24nKTtcbiAgICAgICAgICAgIGpRdWVyeSgnI3NtLXBlbmFsdGllcycpLm9uZSgnd2Via2l0QW5pbWF0aW9uRW5kIG9hbmltYXRpb25lbmQgbXNBbmltYXRpb25FbmQgYW5pbWF0aW9uZW5kJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGpRdWVyeSgnI3NtLXBlbmFsdGllcycpLnJlbW92ZUNsYXNzKCdhbmltYXRlZCB6b29tSW5VcCAgJyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vZGlyZWN0aW9uID09PSAnZG93bicgPyBsb2FkQmcoaW5kZXggKyAxKSA6IGxvYWRCZyhpbmRleCk7XG4gICAgICAgIH0sXG4gICAgICAgIG9mZnNldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHdpbmRvdy5pbm5lckhlaWdodCAtIHRoaXMuZWxlbWVudC5jbGllbnRIZWlnaHQgKiAyO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBDYWRpbGxhYyBUYXhcbiAgICBuZXcgV2F5cG9pbnQoe1xuICAgICAgICBlbGVtZW50OiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc20tY2FkaWxsYWMtdGF4JyksXG4gICAgICAgIGhhbmRsZXI6IGZ1bmN0aW9uIChkaXJlY3Rpb24pIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuZWxlbWVudC5jbGllbnRIZWlnaHQpO1xuICAgICAgICAgICAgalF1ZXJ5KCcjc20tY2FkaWxsYWMtdGF4Om5vdCguc2hvd24pJykuYWRkQ2xhc3MoJ2FuaW1hdGVkIHpvb21JbiBzaG93bicpO1xuICAgICAgICAgICAgalF1ZXJ5KCcjc20tY2FkaWxsYWMtdGF4Jykub25lKCd3ZWJraXRBbmltYXRpb25FbmQgb2FuaW1hdGlvbmVuZCBtc0FuaW1hdGlvbkVuZCBhbmltYXRpb25lbmQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgalF1ZXJ5KCcjc20tY2FkaWxsYWMtdGF4JykucmVtb3ZlQ2xhc3MoJ2FuaW1hdGVkIHpvb21JbiAgJyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vZGlyZWN0aW9uID09PSAnZG93bicgPyBsb2FkQmcoaW5kZXggKyAxKSA6IGxvYWRCZyhpbmRleCk7XG4gICAgICAgIH0sXG4gICAgICAgIG9mZnNldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHdpbmRvdy5pbm5lckhlaWdodCAtIHRoaXMuZWxlbWVudC5jbGllbnRIZWlnaHQgKiAyO1xuICAgICAgICB9XG4gICAgfSk7XG5cbi8vIEV4Y2hhbmdlc1xuICAgIG5ldyBXYXlwb2ludCh7XG4gICAgICAgIGVsZW1lbnQ6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzbS1leGNoYW5nZXMnKSxcbiAgICAgICAgaGFuZGxlcjogZnVuY3Rpb24gKGRpcmVjdGlvbikge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ2hlcmUnKTtcbiAgICAgICAgICAgIGpRdWVyeSgnI3NtLWV4Y2hhbmdlczpub3QoLnNob3duKScpLmFkZENsYXNzKCdhbmltYXRlZCByb3RhdGVJbiBzaG93bicpO1xuICAgICAgICAgICAgalF1ZXJ5KCcjc20tZXhjaGFuZ2VzJykub25lKCd3ZWJraXRBbmltYXRpb25FbmQgb2FuaW1hdGlvbmVuZCBtc0FuaW1hdGlvbkVuZCBhbmltYXRpb25lbmQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgalF1ZXJ5KCcjc20tZXhjaGFuZ2VzJykucmVtb3ZlQ2xhc3MoJ2FuaW1hdGVkIHJvdGF0ZUluJyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vZGlyZWN0aW9uID09PSAnZG93bicgPyBsb2FkQmcoaW5kZXggKyAxKSA6IGxvYWRCZyhpbmRleCk7XG4gICAgICAgIH0sXG4gICAgICAgIG9mZnNldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHdpbmRvdy5pbm5lckhlaWdodCAtIHRoaXMuZWxlbWVudC5jbGllbnRIZWlnaHQgKiAyO1xuICAgICAgICB9XG4gICAgfSk7XG5cbi8vIHZvbHVudGFyeSBpbnN1cmFuY2VcbiAgICBuZXcgV2F5cG9pbnQoe1xuICAgICAgICBlbGVtZW50OiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc20tdm9sdW50YXJ5LWluc3VyYW5jZScpLFxuICAgICAgICBoYW5kbGVyOiBmdW5jdGlvbiAoZGlyZWN0aW9uKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnaGVyZScpO1xuICAgICAgICAgICAgalF1ZXJ5KCcjc20tdm9sdW50YXJ5LWluc3VyYW5jZTpub3QoLnNob3duKScpLmFkZENsYXNzKCdhbmltYXRlZCBzbGlkZUluVXAgc2hvd24nKTtcbiAgICAgICAgICAgIGpRdWVyeSgnI3NtLXZvbHVudGFyeS1pbnN1cmFuY2UnKS5vbmUoJ3dlYmtpdEFuaW1hdGlvbkVuZCBvYW5pbWF0aW9uZW5kIG1zQW5pbWF0aW9uRW5kIGFuaW1hdGlvbmVuZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBqUXVlcnkoJyNzbS12b2x1bnRhcnktaW5zdXJhbmNlJykucmVtb3ZlQ2xhc3MoJ2FuaW1hdGVkIHNsaWRlSW5VcCcpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvL2RpcmVjdGlvbiA9PT0gJ2Rvd24nID8gbG9hZEJnKGluZGV4ICsgMSkgOiBsb2FkQmcoaW5kZXgpO1xuICAgICAgICB9LFxuICAgICAgICBvZmZzZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB3aW5kb3cuaW5uZXJIZWlnaHQgLSB0aGlzLmVsZW1lbnQuY2xpZW50SGVpZ2h0ICogMjtcbiAgICAgICAgfVxuICAgIH0pO1xuLy8gd2hhdCdzIG5leHQgaW5zdXJhbmNlXG4gICAgbmV3IFdheXBvaW50KHtcbiAgICAgICAgZWxlbWVudDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NtLXdoYXRzLW5leHQnKSxcbiAgICAgICAgaGFuZGxlcjogZnVuY3Rpb24gKGRpcmVjdGlvbikge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ2hlcmUnKTtcbiAgICAgICAgICAgIGpRdWVyeSgnI3NtLXdoYXRzLW5leHQ6bm90KC5zaG93biknKS5hZGRDbGFzcygnYW5pbWF0ZWQgYm91bmNlSW5VcCBzaG93bicpO1xuICAgICAgICAgICAgalF1ZXJ5KCcjc20td2hhdHMtbmV4dCcpLm9uZSgnd2Via2l0QW5pbWF0aW9uRW5kIG9hbmltYXRpb25lbmQgbXNBbmltYXRpb25FbmQgYW5pbWF0aW9uZW5kJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGpRdWVyeSgnI3NtLXdoYXRzLW5leHQnKS5yZW1vdmVDbGFzcygnYW5pbWF0ZWQgYm91bmNlSW5VcCcpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvL2RpcmVjdGlvbiA9PT0gJ2Rvd24nID8gbG9hZEJnKGluZGV4ICsgMSkgOiBsb2FkQmcoaW5kZXgpO1xuICAgICAgICB9LFxuICAgICAgICBvZmZzZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB3aW5kb3cuaW5uZXJIZWlnaHQgLSB0aGlzLmVsZW1lbnQuY2xpZW50SGVpZ2h0ICogMjtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIC8vIEJlbmVmaXRzXG4gICAgbmV3IFdheXBvaW50KHtcbiAgICAgICAgZWxlbWVudDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JlbmVmaXRzLXJlcXVpcmVtZW50cycpLFxuICAgICAgICBoYW5kbGVyOiBmdW5jdGlvbiAoZGlyZWN0aW9uKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmVsZW1lbnQuY2xpZW50SGVpZ2h0KTtcbiAgICAgICAgICAgIGpRdWVyeSgnI2JlbmVmaXRzLXJlcXVpcmVtZW50czpub3QoLnNob3duKScpLmFkZENsYXNzKCdhbmltYXRlZCBib3VuY2VJbkRvd24gc2hvd24nKTtcbiAgICAgICAgICAgIGpRdWVyeSgnI2JlbmVmaXRzLXJlcXVpcmVtZW50cycpLm9uZSgnd2Via2l0QW5pbWF0aW9uRW5kIG9hbmltYXRpb25lbmQgbXNBbmltYXRpb25FbmQgYW5pbWF0aW9uZW5kJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGpRdWVyeSgnI2JlbmVmaXRzLXJlcXVpcmVtZW50cycpLnJlbW92ZUNsYXNzKCdhbmltYXRlZCBib3VuY2VJbkRvd24nKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy9kaXJlY3Rpb24gPT09ICdkb3duJyA/IGxvYWRCZyhpbmRleCArIDEpIDogbG9hZEJnKGluZGV4KTtcbiAgICAgICAgfSxcbiAgICAgICAgb2Zmc2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gd2luZG93LmlubmVySGVpZ2h0IC0gdGhpcy5lbGVtZW50LmNsaWVudEhlaWdodCAqIDI7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIE5ldyBFbXBsb3llZXNcbiAgICBuZXcgV2F5cG9pbnQoe1xuICAgICAgICBlbGVtZW50OiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbmV3LWVtcGxveWVlcycpLFxuICAgICAgICBoYW5kbGVyOiBmdW5jdGlvbiAoZGlyZWN0aW9uKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmVsZW1lbnQuY2xpZW50SGVpZ2h0KTtcbiAgICAgICAgICAgIGpRdWVyeSgnI25ldy1lbXBsb3llZXM6bm90KC5zaG93biknKS5hZGRDbGFzcygnYW5pbWF0ZWQgem9vbUluVXAgc2hvd24nKTtcbiAgICAgICAgICAgIGpRdWVyeSgnI25ldy1lbXBsb3llZXMnKS5vbmUoJ3dlYmtpdEFuaW1hdGlvbkVuZCBvYW5pbWF0aW9uZW5kIG1zQW5pbWF0aW9uRW5kIGFuaW1hdGlvbmVuZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBqUXVlcnkoJyNuZXctZW1wbG95ZWVzJykucmVtb3ZlQ2xhc3MoJ2FuaW1hdGVkIHpvb21JblVwICAnKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy9kaXJlY3Rpb24gPT09ICdkb3duJyA/IGxvYWRCZyhpbmRleCArIDEpIDogbG9hZEJnKGluZGV4KTtcbiAgICAgICAgfSxcbiAgICAgICAgb2Zmc2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gd2luZG93LmlubmVySGVpZ2h0IC0gdGhpcy5lbGVtZW50LmNsaWVudEhlaWdodCAqIDI7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIEN1cnJlbnQgRW1wbG95ZWVzXG4gICAgbmV3IFdheXBvaW50KHtcbiAgICAgICAgZWxlbWVudDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2N1cnJlbnQtZW1wbG95ZWVzJyksXG4gICAgICAgIGhhbmRsZXI6IGZ1bmN0aW9uIChkaXJlY3Rpb24pIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuZWxlbWVudC5jbGllbnRIZWlnaHQpO1xuICAgICAgICAgICAgalF1ZXJ5KCcjY3VycmVudC1lbXBsb3llZXM6bm90KC5zaG93biknKS5hZGRDbGFzcygnYW5pbWF0ZWQgamVsbG8gc2hvd24nKTtcbiAgICAgICAgICAgIGpRdWVyeSgnI2N1cnJlbnQtZW1wbG95ZWVzJykub25lKCd3ZWJraXRBbmltYXRpb25FbmQgb2FuaW1hdGlvbmVuZCBtc0FuaW1hdGlvbkVuZCBhbmltYXRpb25lbmQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgalF1ZXJ5KCcjY3VycmVudC1lbXBsb3llZXMnKS5yZW1vdmVDbGFzcygnYW5pbWF0ZWQgamVsbG8gICcpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvL2RpcmVjdGlvbiA9PT0gJ2Rvd24nID8gbG9hZEJnKGluZGV4ICsgMSkgOiBsb2FkQmcoaW5kZXgpO1xuICAgICAgICB9LFxuICAgICAgICBvZmZzZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB3aW5kb3cuaW5uZXJIZWlnaHQgLSB0aGlzLmVsZW1lbnQuY2xpZW50SGVpZ2h0ICogMjtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gRXhpdGluZyBFbXBsb3llZXNcbiAgICBuZXcgV2F5cG9pbnQoe1xuICAgICAgICBlbGVtZW50OiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXhpdGluZy1lbXBsb3llZXMnKSxcbiAgICAgICAgaGFuZGxlcjogZnVuY3Rpb24gKGRpcmVjdGlvbikge1xuICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy5lbGVtZW50LmNsaWVudEhlaWdodCk7XG4gICAgICAgICAgICBqUXVlcnkoJyNleGl0aW5nLWVtcGxveWVlczpub3QoLnNob3duKScpLmFkZENsYXNzKCdhbmltYXRlZCBmbGlwIHNob3duJyk7XG4gICAgICAgICAgICBqUXVlcnkoJyNleGl0aW5nLWVtcGxveWVlcycpLm9uZSgnd2Via2l0QW5pbWF0aW9uRW5kIG9hbmltYXRpb25lbmQgbXNBbmltYXRpb25FbmQgYW5pbWF0aW9uZW5kJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGpRdWVyeSgnI2V4aXRpbmctZW1wbG95ZWVzJykucmVtb3ZlQ2xhc3MoJ2FuaW1hdGVkIGZsaXAnKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy9kaXJlY3Rpb24gPT09ICdkb3duJyA/IGxvYWRCZyhpbmRleCArIDEpIDogbG9hZEJnKGluZGV4KTtcbiAgICAgICAgfSxcbiAgICAgICAgb2Zmc2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gd2luZG93LmlubmVySGVpZ2h0IC0gdGhpcy5lbGVtZW50LmNsaWVudEhlaWdodCAqIDI7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIFBlbmFsdGllc1xuICAgIG5ldyBXYXlwb2ludCh7XG4gICAgICAgIGVsZW1lbnQ6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwZW5hbHRpZXMnKSxcbiAgICAgICAgaGFuZGxlcjogZnVuY3Rpb24gKGRpcmVjdGlvbikge1xuICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy5lbGVtZW50LmNsaWVudEhlaWdodCk7XG4gICAgICAgICAgICBqUXVlcnkoJyNwZW5hbHRpZXM6bm90KC5zaG93biknKS5hZGRDbGFzcygnYW5pbWF0ZWQgem9vbUluVXAgc2hvd24nKTtcbiAgICAgICAgICAgIGpRdWVyeSgnI3BlbmFsdGllcycpLm9uZSgnd2Via2l0QW5pbWF0aW9uRW5kIG9hbmltYXRpb25lbmQgbXNBbmltYXRpb25FbmQgYW5pbWF0aW9uZW5kJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGpRdWVyeSgnI3BlbmFsdGllcycpLnJlbW92ZUNsYXNzKCdhbmltYXRlZCB6b29tSW5VcCAgJyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vZGlyZWN0aW9uID09PSAnZG93bicgPyBsb2FkQmcoaW5kZXggKyAxKSA6IGxvYWRCZyhpbmRleCk7XG4gICAgICAgIH0sXG4gICAgICAgIG9mZnNldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHdpbmRvdy5pbm5lckhlaWdodCAtIHRoaXMuZWxlbWVudC5jbGllbnRIZWlnaHQgKiAyO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBDYWRpbGxhYyBUYXhcbiAgICBuZXcgV2F5cG9pbnQoe1xuICAgICAgICBlbGVtZW50OiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2FkaWxsYWMtdGF4JyksXG4gICAgICAgIGhhbmRsZXI6IGZ1bmN0aW9uIChkaXJlY3Rpb24pIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuZWxlbWVudC5jbGllbnRIZWlnaHQpO1xuICAgICAgICAgICAgalF1ZXJ5KCcjY2FkaWxsYWMtdGF4Om5vdCguc2hvd24pJykuYWRkQ2xhc3MoJ2FuaW1hdGVkIHpvb21JbiBzaG93bicpO1xuICAgICAgICAgICAgalF1ZXJ5KCcjY2FkaWxsYWMtdGF4Jykub25lKCd3ZWJraXRBbmltYXRpb25FbmQgb2FuaW1hdGlvbmVuZCBtc0FuaW1hdGlvbkVuZCBhbmltYXRpb25lbmQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgalF1ZXJ5KCcjY2FkaWxsYWMtdGF4JykucmVtb3ZlQ2xhc3MoJ2FuaW1hdGVkIHpvb21JbiAgJyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vZGlyZWN0aW9uID09PSAnZG93bicgPyBsb2FkQmcoaW5kZXggKyAxKSA6IGxvYWRCZyhpbmRleCk7XG4gICAgICAgIH0sXG4gICAgICAgIG9mZnNldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHdpbmRvdy5pbm5lckhlaWdodCAtIHRoaXMuZWxlbWVudC5jbGllbnRIZWlnaHQgKiAyO1xuICAgICAgICB9XG4gICAgfSk7XG5cbi8vIEV4Y2hhbmdlc1xuICAgIG5ldyBXYXlwb2ludCh7XG4gICAgICAgIGVsZW1lbnQ6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdleGNoYW5nZXMnKSxcbiAgICAgICAgaGFuZGxlcjogZnVuY3Rpb24gKGRpcmVjdGlvbikge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ2hlcmUnKTtcbiAgICAgICAgICAgIGpRdWVyeSgnI2V4Y2hhbmdlczpub3QoLnNob3duKScpLmFkZENsYXNzKCdhbmltYXRlZCByb3RhdGVJbiBzaG93bicpO1xuICAgICAgICAgICAgalF1ZXJ5KCcjZXhjaGFuZ2VzJykub25lKCd3ZWJraXRBbmltYXRpb25FbmQgb2FuaW1hdGlvbmVuZCBtc0FuaW1hdGlvbkVuZCBhbmltYXRpb25lbmQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgalF1ZXJ5KCcjZXhjaGFuZ2VzJykucmVtb3ZlQ2xhc3MoJ2FuaW1hdGVkIHJvdGF0ZUluJyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vZGlyZWN0aW9uID09PSAnZG93bicgPyBsb2FkQmcoaW5kZXggKyAxKSA6IGxvYWRCZyhpbmRleCk7XG4gICAgICAgIH0sXG4gICAgICAgIG9mZnNldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHdpbmRvdy5pbm5lckhlaWdodCAtIHRoaXMuZWxlbWVudC5jbGllbnRIZWlnaHQgKiAyO1xuICAgICAgICB9XG4gICAgfSk7XG5cbi8vIHZvbHVudGFyeSBpbnN1cmFuY2VcbiAgICBuZXcgV2F5cG9pbnQoe1xuICAgICAgICBlbGVtZW50OiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndm9sdW50YXJ5LWluc3VyYW5jZScpLFxuICAgICAgICBoYW5kbGVyOiBmdW5jdGlvbiAoZGlyZWN0aW9uKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnaGVyZScpO1xuICAgICAgICAgICAgalF1ZXJ5KCcjdm9sdW50YXJ5LWluc3VyYW5jZTpub3QoLnNob3duKScpLmFkZENsYXNzKCdhbmltYXRlZCBzbGlkZUluVXAgc2hvd24nKTtcbiAgICAgICAgICAgIGpRdWVyeSgnI3ZvbHVudGFyeS1pbnN1cmFuY2UnKS5vbmUoJ3dlYmtpdEFuaW1hdGlvbkVuZCBvYW5pbWF0aW9uZW5kIG1zQW5pbWF0aW9uRW5kIGFuaW1hdGlvbmVuZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBqUXVlcnkoJyN2b2x1bnRhcnktaW5zdXJhbmNlJykucmVtb3ZlQ2xhc3MoJ2FuaW1hdGVkIHNsaWRlSW5VcCcpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvL2RpcmVjdGlvbiA9PT0gJ2Rvd24nID8gbG9hZEJnKGluZGV4ICsgMSkgOiBsb2FkQmcoaW5kZXgpO1xuICAgICAgICB9LFxuICAgICAgICBvZmZzZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB3aW5kb3cuaW5uZXJIZWlnaHQgLSB0aGlzLmVsZW1lbnQuY2xpZW50SGVpZ2h0ICogMjtcbiAgICAgICAgfVxuICAgIH0pO1xuLy8gd2hhdCdzIG5leHQgaW5zdXJhbmNlXG4gICAgbmV3IFdheXBvaW50KHtcbiAgICAgICAgZWxlbWVudDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3doYXRzLW5leHQnKSxcbiAgICAgICAgaGFuZGxlcjogZnVuY3Rpb24gKGRpcmVjdGlvbikge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ2hlcmUnKTtcbiAgICAgICAgICAgIGpRdWVyeSgnI3doYXRzLW5leHQ6bm90KC5zaG93biknKS5hZGRDbGFzcygnYW5pbWF0ZWQgYm91bmNlSW5VcCBzaG93bicpO1xuICAgICAgICAgICAgalF1ZXJ5KCcjd2hhdHMtbmV4dCcpLm9uZSgnd2Via2l0QW5pbWF0aW9uRW5kIG9hbmltYXRpb25lbmQgbXNBbmltYXRpb25FbmQgYW5pbWF0aW9uZW5kJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGpRdWVyeSgnI3doYXRzLW5leHQnKS5yZW1vdmVDbGFzcygnYW5pbWF0ZWQgYm91bmNlSW5VcCcpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvL2RpcmVjdGlvbiA9PT0gJ2Rvd24nID8gbG9hZEJnKGluZGV4ICsgMSkgOiBsb2FkQmcoaW5kZXgpO1xuICAgICAgICB9LFxuICAgICAgICBvZmZzZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB3aW5kb3cuaW5uZXJIZWlnaHQgLSB0aGlzLmVsZW1lbnQuY2xpZW50SGVpZ2h0ICogMjtcbiAgICAgICAgfVxuICAgIH0pO1xufVxuXG4vLyBVdGlsaXR5XG4vLyBzZXR1cCB3YXlwb2ludHNcbndpbmRvdy53YXlwb2ludHMgPSBbXTtcbmNhdGVnb3J5U2VjdGlvbnMuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCwgaW5kZXgpIHtcbiAgICBjb25zb2xlLmxvZyhgLiR7ZWxlbWVudH1gKTtcbiAgICB3aW5kb3cud2F5cG9pbnRzW2luZGV4XSA9IG5ldyBXYXlwb2ludCh7XG4gICAgICAgIGVsZW1lbnQ6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke2VsZW1lbnR9YCksXG4gICAgICAgIGhhbmRsZXI6IGZ1bmN0aW9uIChkaXJlY3Rpb24pIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdsb2FkaW5nLi4uJylcbiAgICAgICAgICAgIGxvYWRCZyhNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBiZ3MubGVuZ3RoKSk7XG4gICAgICAgICAgICAvL2RpcmVjdGlvbiA9PT0gJ2Rvd24nID8gbG9hZEJnKGluZGV4ICsgMSkgOiBsb2FkQmcoaW5kZXgpO1xuICAgICAgICB9LFxuICAgIH0pXG59KTtcblxuLy8gcHJlbG9hZCBpbWFnZXNcbmlmIChiZ0ltYWdlc0xvYWRlZCAhPT0gdHJ1ZSkge1xuICAgIGJncy5mb3JFYWNoKGZ1bmN0aW9uIChiZykge1xuICAgICAgICBuZXcgSW1hZ2UoKS5zcmMgPSBiZ1BhdGggKyBiZyArIGltZ0V4dDtcbiAgICAgICAgLy8gY2FjaGVzIGltYWdlcywgYXZvaWRpbmcgd2hpdGUgZmxhc2ggYmV0d2VlbiBiYWNrZ3JvdW5kIHJlcGxhY2VtZW50c1xuICAgIH0pO1xuICAgIGJnSW1hZ2VzTG9hZGVkID0gdHJ1ZTtcbn1cbi8vIGxvYWQgYmcgaW1hZ2VcbmxldCBiZ0NhbkxvYWQgPSB0cnVlO1xuY29uc3QgbG9hZEJnID0gZnVuY3Rpb24gKGJnKSB7XG4gICAgaWYoYmdDYW5Mb2FkID09PSB0cnVlKXtcbiAgICAgICAgY29uc29sZS5sb2coJ2NhbiBsb2FkISEhISEnKTtcbiAgICAgICAgYmdDYW5Mb2FkID0gZmFsc2U7XG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZG9jU3R5bGUuYmFja2dyb3VuZEltYWdlID0gYHVybCgke2JnUGF0aH0ke2Jnc1tiZ119JHtpbWdFeHR9KWA7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgbG9hZGluZyAke2JnUGF0aH0ke2Jnc1tiZ119JHtpbWdFeHR9YCwgYmcpO1xuICAgICAgICAgICAgYmdDYW5Mb2FkID0gdHJ1ZTtcbiAgICAgICAgfSwgMTAwKVxuICAgIH1cbn1cbmNvbnN0IGRlYm91bmNlID0gZnVuY3Rpb24gKGZ1bmMsIHdhaXQsIGltbWVkaWF0ZSkge1xuICAgIHZhciB0aW1lb3V0O1xuICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGNvbnRleHQgPSB0aGlzLCBhcmdzID0gYXJndW1lbnRzO1xuICAgICAgICB2YXIgbGF0ZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHRpbWVvdXQgPSBudWxsO1xuICAgICAgICAgICAgaWYgKCFpbW1lZGlhdGUpIGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XG4gICAgICAgIH07XG4gICAgICAgIHZhciBjYWxsTm93ID0gaW1tZWRpYXRlICYmICF0aW1lb3V0O1xuICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XG4gICAgICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGxhdGVyLCB3YWl0KTtcbiAgICAgICAgaWYgKGNhbGxOb3cpIGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XG4gICAgfTtcbn07XG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gYnVzaW5lc3Mgc2VsZWN0IGJ1dHRvbnNcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG52YXIgYnVzaW5lc3NTZWxlY3QgPSBqUXVlcnkoJy5idXNpbmVzcy10eXBlLXNlbGVjdCcpO1xuYnVzaW5lc3NTZWxlY3QuZWFjaChmdW5jdGlvbiAoaSwgZWwpIHtcbiAgICBjb25zb2xlLmxvZyhlbCk7XG4gICAgalF1ZXJ5KGVsKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGVsKTtcbiAgICAgICAgalF1ZXJ5KCcuaGNyLW1lbnUtaXRlbScpLmhpZGUoKTtcbiAgICAgICAgaWYgKGVsLmRhdGFzZXQuYnVzaW5lc3MgPT09ICdidXNpbmVzcy01MCcpIHtcbiAgICAgICAgICAgIGpRdWVyeSgnYS5zbScpLnBhcmVudCgpLnNob3coKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGpRdWVyeSgnYS5sZycpLnBhcmVudCgpLnNob3coKTtcbiAgICAgICAgfVxuICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdCA9ICcnO1xuICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoYCR7ZWwuZGF0YXNldC5idXNpbmVzc30tYWN0aXZlYClcbiAgICAgICAgLy8gZ2V0IHRoZSBhY3RpdmUgbWVudSBpdGVtIGFuZCB0dXJuIGl0IG9mZlxuICAgICAgICBsZXQgY3VycmVudEFjdGl2ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5idXNpbmVzcy10eXBlLXNlbGVjdC5hY3RpdmUnKTtcbiAgICAgICAgaWYgKGN1cnJlbnRBY3RpdmUpIHtcbiAgICAgICAgICAgIGN1cnJlbnRBY3RpdmUuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gdHVybiBvbiB0aGUgbmV3IG1lbnUgaXRlbVxuICAgICAgICBlbC5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKVxuICAgICAgICAvLyBzaG93IHRoZSBuYXZcbiAgICAgICAgbGV0IG1lbnVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmhjci1tZW51Jyk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWVudXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIG1lbnVzW2ldLnN0eWxlLnZpc2liaWxpdHkgPSAndmlzaWJsZSc7XG4gICAgICAgIH1cbiAgICAgICAgZm9sZE1lbnUuYWNjb3JkaW9uKDAsICd0b3AnLCBmdW5jdGlvbiAoZXYsIG9yaSkge1xuICAgICAgICAgICAgb3JpLmVsLmNsYXNzTGlzdC5hZGQoJ29wZW4nKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGV2LCBvcmkpO1xuICAgICAgICB9KTtcbiAgICAgICAgbGV0IGN1cnJlbnRWaXNpYmxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJ1c2luZXNzLWNvbnRhaW5lci52aXNpYmxlJyk7XG4gICAgICAgIGlmIChjdXJyZW50VmlzaWJsZSkge1xuICAgICAgICAgICAgY3VycmVudFZpc2libGUuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgIGN1cnJlbnRWaXNpYmxlLmNsYXNzTGlzdC5yZW1vdmUoJ3Zpc2libGUnKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgc2VjdGlvblRvU2hvdyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke2VsLmRhdGFzZXQuYnVzaW5lc3N9LWNvbnRhaW5lcmApO1xuICAgICAgICBjb25zb2xlLmxvZyhzZWN0aW9uVG9TaG93KTtcbiAgICAgICAgalF1ZXJ5KHNlY3Rpb25Ub1Nob3cpLmZhZGVJbigpO1xuICAgICAgICBzZWN0aW9uVG9TaG93LmNsYXNzTGlzdC5hZGQoJ3Zpc2libGUnKTtcbiAgICAgICAgalF1ZXJ5KCdodG1sLCBib2R5JykuYW5pbWF0ZSh7XG4gICAgICAgICAgICBzY3JvbGxUb3A6IGpRdWVyeShzZWN0aW9uVG9TaG93KS5vZmZzZXQoKS50b3BcbiAgICAgICAgfSwgMTAwMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgalF1ZXJ5KHNlY3Rpb25Ub1Nob3cpLmZpbmQoJ2gzJykuYWRkQ2xhc3MoJ2FuaW1hdGVkJykuYWRkQ2xhc3MoJ3B1bHNlJyk7XG4gICAgICAgIH0pO1xuICAgICAgICBsb2FkQmcoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogYmdzLmxlbmd0aCkpO1xuXG4gICAgICAgIGxvYWRXYXlwb2ludHMoKTtcblxuLy8gVXRpbGl0eVxuLy8gc2V0dXAgd2F5cG9pbnRzXG4gICAgICAgIHdpbmRvdy53YXlwb2ludHMgPSBbXTtcbiAgICAgICAgY2F0ZWdvcnlTZWN0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50LCBpbmRleCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coYC4ke2VsZW1lbnR9YCk7XG4gICAgICAgICAgICB3aW5kb3cud2F5cG9pbnRzW2luZGV4XSA9IG5ldyBXYXlwb2ludCh7XG4gICAgICAgICAgICAgICAgZWxlbWVudDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLiR7ZWxlbWVudH1gKSxcbiAgICAgICAgICAgICAgICBoYW5kbGVyOiBmdW5jdGlvbiAoZGlyZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdsb2FkaW5nLi4uJylcbiAgICAgICAgICAgICAgICAgICAgLy9sb2FkQmcoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMikpO1xuICAgICAgICAgICAgICAgICAgICBkaXJlY3Rpb24gPT09ICdkb3duJyA/IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGJncy5sZW5ndGgpIDogTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogYmdzLmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pO1xuICAgIH0pO1xufSk7XG5cbi8vLy8vLy8vLy8vXG4vLyBoY3IgbWVudVxuLy8vLy8vLy8vLy9cbmxldCBmb2xkTWVudSA9IG5ldyBPcmlEb21pKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oY3ItbWVudScpLCB7XG4gICAgaFBhbmVsczogMyxcbiAgICByaXBwbGU6IDIsXG4gICAgc2hhZGluZzogJ2hhcmQnLFxuICAgIHRvdWNoRW5hYmxlZDogZmFsc2Vcbn0pO1xuLy8gbG9hZFxuZm9sZE1lbnUuZm9sZFVwKCd0b3AnKTtcblxuLy8gY2xpY2tcbmxldCBoY3JNZW51SXRlbUxpbmsgPSBqUXVlcnkoJy5oY3ItbWVudS1pdGVtIGEnKTtcbmhjck1lbnVJdGVtTGluay5vbignY2xpY2snLCBmdW5jdGlvbiAoZSwgZWwpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgY29uc29sZS5sb2coYC4ke2UudGFyZ2V0LmhyZWYuc3BsaXQoJyMnKVsxXX1gKTtcbiAgICBqUXVlcnkoJ2h0bWwsIGJvZHknKS5hbmltYXRlKHtcbiAgICAgICAgc2Nyb2xsVG9wOiBqUXVlcnkoYC4ke2UudGFyZ2V0LmhyZWYuc3BsaXQoJyMnKVsxXX0tY29udGFpbmVyYCkub2Zmc2V0KCkudG9wIC0gMTAwXG4gICAgfSwgMTAwMCwgZnVuY3Rpb24gKCkge1xuXG4gICAgfSk7XG59KVxuXG4vL3Njcm9sbFxubGV0IGFBcnJheSA9IFtdOyAvLyBjcmVhdGUgdGhlIGVtcHR5IGFBcnJheVxuZm9yIChsZXQgaSA9IDA7IGkgPCBoY3JNZW51SXRlbUxpbmsubGVuZ3RoOyBpKyspIHtcbiAgICBsZXQgYUNoaWxkID0gaGNyTWVudUl0ZW1MaW5rW2ldO1xuICAgIGxldCBhaHJlZiA9IGpRdWVyeShhQ2hpbGQpLmF0dHIoJ2hyZWYnKTtcbiAgICBhQXJyYXkucHVzaChhaHJlZik7XG59XG5sZXQgY3VycmVudFNlY3Rpb24gPSAnJztcbmpRdWVyeSh3aW5kb3cpLnNjcm9sbChmdW5jdGlvbiAoKSB7XG4gICAgbGV0IHdpbmRvd1BvcyA9IGpRdWVyeSh3aW5kb3cpLnNjcm9sbFRvcCgpOyAvLyBnZXQgdGhlIG9mZnNldCBvZiB0aGUgd2luZG93IGZyb20gdGhlIHRvcCBvZiBwYWdlXG4gICAgbGV0IHdpbmRvd0hlaWdodCA9IGpRdWVyeSh3aW5kb3cpLmhlaWdodCgpOyAvLyBnZXQgdGhlIGhlaWdodCBvZiB0aGUgd2luZG93XG4gICAgbGV0IGRvY0hlaWdodCA9IGpRdWVyeShkb2N1bWVudCkuaGVpZ2h0KCk7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFBcnJheS5sZW5ndGg7IGkrKykge1xuICAgICAgICBsZXQgdGhlSUQgPSBhQXJyYXlbaV0ucmVwbGFjZSgnIycsICcnKTtcbiAgICAgICAgbGV0IGRpdlBvcyA9IGpRdWVyeShgLiR7dGhlSUR9LWNvbnRhaW5lcmApLm9mZnNldCgpLnRvcCAtIDIwMDsgLy8gZ2V0IHRoZSBvZmZzZXQgb2YgdGhlIGRpdiBmcm9tIHRoZSB0b3Agb2YgcGFnZVxuICAgICAgICBsZXQgZGl2SGVpZ2h0ID0galF1ZXJ5KGAuJHt0aGVJRH0tY29udGFpbmVyYCkuaGVpZ2h0KCk7IC8vIGdldCB0aGUgaGVpZ2h0IG9mIHRoZSBkaXYgaW4gcXVlc3Rpb25cbiAgICAgICAgaWYgKHdpbmRvd1BvcyA+PSBkaXZQb3MgJiYgd2luZG93UG9zIDwgKGRpdlBvcyArIGRpdkhlaWdodCkpIHtcbiAgICAgICAgICAgIGpRdWVyeShgYVtocmVmPScjJHt0aGVJRH0nXWApLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGpRdWVyeShgYVtocmVmPScjJHt0aGVJRH0nXWApLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGlmICh3aW5kb3dQb3MgKyB3aW5kb3dIZWlnaHQgPT0gZG9jSGVpZ2h0KSB7XG4gICAgICAgIGlmICghalF1ZXJ5KCduYXYgbGk6bGFzdC1jaGlsZCBhJykuaGFzQ2xhc3MoJ2FjdGl2ZScpKSB7XG4gICAgICAgICAgICBsZXQgbmF2QWN0aXZlQ3VycmVudCA9IGpRdWVyeSgnLm5hdi1hY3RpdmUnKS5hdHRyKCdocmVmJyk7XG4gICAgICAgICAgICBqUXVlcnkoYGFbaHJlZj0nJHtuYXZBY3RpdmVDdXJyZW50fSddYCkucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgalF1ZXJ5KCduYXYgbGk6bGFzdC1jaGlsZCBhJykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICB9XG4gICAgfVxuXG59KTtcbn0se1wiLi4vbm9kZV9tb2R1bGVzL3dheXBvaW50cy9saWIvbm9mcmFtZXdvcmsud2F5cG9pbnRzXCI6Mn1dLDI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuLyohXG5XYXlwb2ludHMgLSA0LjAuMFxuQ29weXJpZ2h0IMKpIDIwMTEtMjAxNSBDYWxlYiBUcm91Z2h0b25cbkxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbmh0dHBzOi8vZ2l0aHViLmNvbS9pbWFrZXdlYnRoaW5ncy93YXlwb2ludHMvYmxvZy9tYXN0ZXIvbGljZW5zZXMudHh0XG4qL1xuKGZ1bmN0aW9uKCkge1xuICAndXNlIHN0cmljdCdcblxuICB2YXIga2V5Q291bnRlciA9IDBcbiAgdmFyIGFsbFdheXBvaW50cyA9IHt9XG5cbiAgLyogaHR0cDovL2ltYWtld2VidGhpbmdzLmNvbS93YXlwb2ludHMvYXBpL3dheXBvaW50ICovXG4gIGZ1bmN0aW9uIFdheXBvaW50KG9wdGlvbnMpIHtcbiAgICBpZiAoIW9wdGlvbnMpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTm8gb3B0aW9ucyBwYXNzZWQgdG8gV2F5cG9pbnQgY29uc3RydWN0b3InKVxuICAgIH1cbiAgICBpZiAoIW9wdGlvbnMuZWxlbWVudCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBlbGVtZW50IG9wdGlvbiBwYXNzZWQgdG8gV2F5cG9pbnQgY29uc3RydWN0b3InKVxuICAgIH1cbiAgICBpZiAoIW9wdGlvbnMuaGFuZGxlcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBoYW5kbGVyIG9wdGlvbiBwYXNzZWQgdG8gV2F5cG9pbnQgY29uc3RydWN0b3InKVxuICAgIH1cblxuICAgIHRoaXMua2V5ID0gJ3dheXBvaW50LScgKyBrZXlDb3VudGVyXG4gICAgdGhpcy5vcHRpb25zID0gV2F5cG9pbnQuQWRhcHRlci5leHRlbmQoe30sIFdheXBvaW50LmRlZmF1bHRzLCBvcHRpb25zKVxuICAgIHRoaXMuZWxlbWVudCA9IHRoaXMub3B0aW9ucy5lbGVtZW50XG4gICAgdGhpcy5hZGFwdGVyID0gbmV3IFdheXBvaW50LkFkYXB0ZXIodGhpcy5lbGVtZW50KVxuICAgIHRoaXMuY2FsbGJhY2sgPSBvcHRpb25zLmhhbmRsZXJcbiAgICB0aGlzLmF4aXMgPSB0aGlzLm9wdGlvbnMuaG9yaXpvbnRhbCA/ICdob3Jpem9udGFsJyA6ICd2ZXJ0aWNhbCdcbiAgICB0aGlzLmVuYWJsZWQgPSB0aGlzLm9wdGlvbnMuZW5hYmxlZFxuICAgIHRoaXMudHJpZ2dlclBvaW50ID0gbnVsbFxuICAgIHRoaXMuZ3JvdXAgPSBXYXlwb2ludC5Hcm91cC5maW5kT3JDcmVhdGUoe1xuICAgICAgbmFtZTogdGhpcy5vcHRpb25zLmdyb3VwLFxuICAgICAgYXhpczogdGhpcy5heGlzXG4gICAgfSlcbiAgICB0aGlzLmNvbnRleHQgPSBXYXlwb2ludC5Db250ZXh0LmZpbmRPckNyZWF0ZUJ5RWxlbWVudCh0aGlzLm9wdGlvbnMuY29udGV4dClcblxuICAgIGlmIChXYXlwb2ludC5vZmZzZXRBbGlhc2VzW3RoaXMub3B0aW9ucy5vZmZzZXRdKSB7XG4gICAgICB0aGlzLm9wdGlvbnMub2Zmc2V0ID0gV2F5cG9pbnQub2Zmc2V0QWxpYXNlc1t0aGlzLm9wdGlvbnMub2Zmc2V0XVxuICAgIH1cbiAgICB0aGlzLmdyb3VwLmFkZCh0aGlzKVxuICAgIHRoaXMuY29udGV4dC5hZGQodGhpcylcbiAgICBhbGxXYXlwb2ludHNbdGhpcy5rZXldID0gdGhpc1xuICAgIGtleUNvdW50ZXIgKz0gMVxuICB9XG5cbiAgLyogUHJpdmF0ZSAqL1xuICBXYXlwb2ludC5wcm90b3R5cGUucXVldWVUcmlnZ2VyID0gZnVuY3Rpb24oZGlyZWN0aW9uKSB7XG4gICAgdGhpcy5ncm91cC5xdWV1ZVRyaWdnZXIodGhpcywgZGlyZWN0aW9uKVxuICB9XG5cbiAgLyogUHJpdmF0ZSAqL1xuICBXYXlwb2ludC5wcm90b3R5cGUudHJpZ2dlciA9IGZ1bmN0aW9uKGFyZ3MpIHtcbiAgICBpZiAoIXRoaXMuZW5hYmxlZCkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGlmICh0aGlzLmNhbGxiYWNrKSB7XG4gICAgICB0aGlzLmNhbGxiYWNrLmFwcGx5KHRoaXMsIGFyZ3MpXG4gICAgfVxuICB9XG5cbiAgLyogUHVibGljICovXG4gIC8qIGh0dHA6Ly9pbWFrZXdlYnRoaW5ncy5jb20vd2F5cG9pbnRzL2FwaS9kZXN0cm95ICovXG4gIFdheXBvaW50LnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5jb250ZXh0LnJlbW92ZSh0aGlzKVxuICAgIHRoaXMuZ3JvdXAucmVtb3ZlKHRoaXMpXG4gICAgZGVsZXRlIGFsbFdheXBvaW50c1t0aGlzLmtleV1cbiAgfVxuXG4gIC8qIFB1YmxpYyAqL1xuICAvKiBodHRwOi8vaW1ha2V3ZWJ0aGluZ3MuY29tL3dheXBvaW50cy9hcGkvZGlzYWJsZSAqL1xuICBXYXlwb2ludC5wcm90b3R5cGUuZGlzYWJsZSA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuZW5hYmxlZCA9IGZhbHNlXG4gICAgcmV0dXJuIHRoaXNcbiAgfVxuXG4gIC8qIFB1YmxpYyAqL1xuICAvKiBodHRwOi8vaW1ha2V3ZWJ0aGluZ3MuY29tL3dheXBvaW50cy9hcGkvZW5hYmxlICovXG4gIFdheXBvaW50LnByb3RvdHlwZS5lbmFibGUgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLmNvbnRleHQucmVmcmVzaCgpXG4gICAgdGhpcy5lbmFibGVkID0gdHJ1ZVxuICAgIHJldHVybiB0aGlzXG4gIH1cblxuICAvKiBQdWJsaWMgKi9cbiAgLyogaHR0cDovL2ltYWtld2VidGhpbmdzLmNvbS93YXlwb2ludHMvYXBpL25leHQgKi9cbiAgV2F5cG9pbnQucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5ncm91cC5uZXh0KHRoaXMpXG4gIH1cblxuICAvKiBQdWJsaWMgKi9cbiAgLyogaHR0cDovL2ltYWtld2VidGhpbmdzLmNvbS93YXlwb2ludHMvYXBpL3ByZXZpb3VzICovXG4gIFdheXBvaW50LnByb3RvdHlwZS5wcmV2aW91cyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLmdyb3VwLnByZXZpb3VzKHRoaXMpXG4gIH1cblxuICAvKiBQcml2YXRlICovXG4gIFdheXBvaW50Lmludm9rZUFsbCA9IGZ1bmN0aW9uKG1ldGhvZCkge1xuICAgIHZhciBhbGxXYXlwb2ludHNBcnJheSA9IFtdXG4gICAgZm9yICh2YXIgd2F5cG9pbnRLZXkgaW4gYWxsV2F5cG9pbnRzKSB7XG4gICAgICBhbGxXYXlwb2ludHNBcnJheS5wdXNoKGFsbFdheXBvaW50c1t3YXlwb2ludEtleV0pXG4gICAgfVxuICAgIGZvciAodmFyIGkgPSAwLCBlbmQgPSBhbGxXYXlwb2ludHNBcnJheS5sZW5ndGg7IGkgPCBlbmQ7IGkrKykge1xuICAgICAgYWxsV2F5cG9pbnRzQXJyYXlbaV1bbWV0aG9kXSgpXG4gICAgfVxuICB9XG5cbiAgLyogUHVibGljICovXG4gIC8qIGh0dHA6Ly9pbWFrZXdlYnRoaW5ncy5jb20vd2F5cG9pbnRzL2FwaS9kZXN0cm95LWFsbCAqL1xuICBXYXlwb2ludC5kZXN0cm95QWxsID0gZnVuY3Rpb24oKSB7XG4gICAgV2F5cG9pbnQuaW52b2tlQWxsKCdkZXN0cm95JylcbiAgfVxuXG4gIC8qIFB1YmxpYyAqL1xuICAvKiBodHRwOi8vaW1ha2V3ZWJ0aGluZ3MuY29tL3dheXBvaW50cy9hcGkvZGlzYWJsZS1hbGwgKi9cbiAgV2F5cG9pbnQuZGlzYWJsZUFsbCA9IGZ1bmN0aW9uKCkge1xuICAgIFdheXBvaW50Lmludm9rZUFsbCgnZGlzYWJsZScpXG4gIH1cblxuICAvKiBQdWJsaWMgKi9cbiAgLyogaHR0cDovL2ltYWtld2VidGhpbmdzLmNvbS93YXlwb2ludHMvYXBpL2VuYWJsZS1hbGwgKi9cbiAgV2F5cG9pbnQuZW5hYmxlQWxsID0gZnVuY3Rpb24oKSB7XG4gICAgV2F5cG9pbnQuaW52b2tlQWxsKCdlbmFibGUnKVxuICB9XG5cbiAgLyogUHVibGljICovXG4gIC8qIGh0dHA6Ly9pbWFrZXdlYnRoaW5ncy5jb20vd2F5cG9pbnRzL2FwaS9yZWZyZXNoLWFsbCAqL1xuICBXYXlwb2ludC5yZWZyZXNoQWxsID0gZnVuY3Rpb24oKSB7XG4gICAgV2F5cG9pbnQuQ29udGV4dC5yZWZyZXNoQWxsKClcbiAgfVxuXG4gIC8qIFB1YmxpYyAqL1xuICAvKiBodHRwOi8vaW1ha2V3ZWJ0aGluZ3MuY29tL3dheXBvaW50cy9hcGkvdmlld3BvcnQtaGVpZ2h0ICovXG4gIFdheXBvaW50LnZpZXdwb3J0SGVpZ2h0ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHdpbmRvdy5pbm5lckhlaWdodCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0XG4gIH1cblxuICAvKiBQdWJsaWMgKi9cbiAgLyogaHR0cDovL2ltYWtld2VidGhpbmdzLmNvbS93YXlwb2ludHMvYXBpL3ZpZXdwb3J0LXdpZHRoICovXG4gIFdheXBvaW50LnZpZXdwb3J0V2lkdGggPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoXG4gIH1cblxuICBXYXlwb2ludC5hZGFwdGVycyA9IFtdXG5cbiAgV2F5cG9pbnQuZGVmYXVsdHMgPSB7XG4gICAgY29udGV4dDogd2luZG93LFxuICAgIGNvbnRpbnVvdXM6IHRydWUsXG4gICAgZW5hYmxlZDogdHJ1ZSxcbiAgICBncm91cDogJ2RlZmF1bHQnLFxuICAgIGhvcml6b250YWw6IGZhbHNlLFxuICAgIG9mZnNldDogMFxuICB9XG5cbiAgV2F5cG9pbnQub2Zmc2V0QWxpYXNlcyA9IHtcbiAgICAnYm90dG9tLWluLXZpZXcnOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLmNvbnRleHQuaW5uZXJIZWlnaHQoKSAtIHRoaXMuYWRhcHRlci5vdXRlckhlaWdodCgpXG4gICAgfSxcbiAgICAncmlnaHQtaW4tdmlldyc6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXMuY29udGV4dC5pbm5lcldpZHRoKCkgLSB0aGlzLmFkYXB0ZXIub3V0ZXJXaWR0aCgpXG4gICAgfVxuICB9XG5cbiAgd2luZG93LldheXBvaW50ID0gV2F5cG9pbnRcbn0oKSlcbjsoZnVuY3Rpb24oKSB7XG4gICd1c2Ugc3RyaWN0J1xuXG4gIGZ1bmN0aW9uIHJlcXVlc3RBbmltYXRpb25GcmFtZVNoaW0oY2FsbGJhY2spIHtcbiAgICB3aW5kb3cuc2V0VGltZW91dChjYWxsYmFjaywgMTAwMCAvIDYwKVxuICB9XG5cbiAgdmFyIGtleUNvdW50ZXIgPSAwXG4gIHZhciBjb250ZXh0cyA9IHt9XG4gIHZhciBXYXlwb2ludCA9IHdpbmRvdy5XYXlwb2ludFxuICB2YXIgb2xkV2luZG93TG9hZCA9IHdpbmRvdy5vbmxvYWRcblxuICAvKiBodHRwOi8vaW1ha2V3ZWJ0aGluZ3MuY29tL3dheXBvaW50cy9hcGkvY29udGV4dCAqL1xuICBmdW5jdGlvbiBDb250ZXh0KGVsZW1lbnQpIHtcbiAgICB0aGlzLmVsZW1lbnQgPSBlbGVtZW50XG4gICAgdGhpcy5BZGFwdGVyID0gV2F5cG9pbnQuQWRhcHRlclxuICAgIHRoaXMuYWRhcHRlciA9IG5ldyB0aGlzLkFkYXB0ZXIoZWxlbWVudClcbiAgICB0aGlzLmtleSA9ICd3YXlwb2ludC1jb250ZXh0LScgKyBrZXlDb3VudGVyXG4gICAgdGhpcy5kaWRTY3JvbGwgPSBmYWxzZVxuICAgIHRoaXMuZGlkUmVzaXplID0gZmFsc2VcbiAgICB0aGlzLm9sZFNjcm9sbCA9IHtcbiAgICAgIHg6IHRoaXMuYWRhcHRlci5zY3JvbGxMZWZ0KCksXG4gICAgICB5OiB0aGlzLmFkYXB0ZXIuc2Nyb2xsVG9wKClcbiAgICB9XG4gICAgdGhpcy53YXlwb2ludHMgPSB7XG4gICAgICB2ZXJ0aWNhbDoge30sXG4gICAgICBob3Jpem9udGFsOiB7fVxuICAgIH1cblxuICAgIGVsZW1lbnQud2F5cG9pbnRDb250ZXh0S2V5ID0gdGhpcy5rZXlcbiAgICBjb250ZXh0c1tlbGVtZW50LndheXBvaW50Q29udGV4dEtleV0gPSB0aGlzXG4gICAga2V5Q291bnRlciArPSAxXG5cbiAgICB0aGlzLmNyZWF0ZVRocm90dGxlZFNjcm9sbEhhbmRsZXIoKVxuICAgIHRoaXMuY3JlYXRlVGhyb3R0bGVkUmVzaXplSGFuZGxlcigpXG4gIH1cblxuICAvKiBQcml2YXRlICovXG4gIENvbnRleHQucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uKHdheXBvaW50KSB7XG4gICAgdmFyIGF4aXMgPSB3YXlwb2ludC5vcHRpb25zLmhvcml6b250YWwgPyAnaG9yaXpvbnRhbCcgOiAndmVydGljYWwnXG4gICAgdGhpcy53YXlwb2ludHNbYXhpc11bd2F5cG9pbnQua2V5XSA9IHdheXBvaW50XG4gICAgdGhpcy5yZWZyZXNoKClcbiAgfVxuXG4gIC8qIFByaXZhdGUgKi9cbiAgQ29udGV4dC5wcm90b3R5cGUuY2hlY2tFbXB0eSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBob3Jpem9udGFsRW1wdHkgPSB0aGlzLkFkYXB0ZXIuaXNFbXB0eU9iamVjdCh0aGlzLndheXBvaW50cy5ob3Jpem9udGFsKVxuICAgIHZhciB2ZXJ0aWNhbEVtcHR5ID0gdGhpcy5BZGFwdGVyLmlzRW1wdHlPYmplY3QodGhpcy53YXlwb2ludHMudmVydGljYWwpXG4gICAgaWYgKGhvcml6b250YWxFbXB0eSAmJiB2ZXJ0aWNhbEVtcHR5KSB7XG4gICAgICB0aGlzLmFkYXB0ZXIub2ZmKCcud2F5cG9pbnRzJylcbiAgICAgIGRlbGV0ZSBjb250ZXh0c1t0aGlzLmtleV1cbiAgICB9XG4gIH1cblxuICAvKiBQcml2YXRlICovXG4gIENvbnRleHQucHJvdG90eXBlLmNyZWF0ZVRocm90dGxlZFJlc2l6ZUhhbmRsZXIgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXNcblxuICAgIGZ1bmN0aW9uIHJlc2l6ZUhhbmRsZXIoKSB7XG4gICAgICBzZWxmLmhhbmRsZVJlc2l6ZSgpXG4gICAgICBzZWxmLmRpZFJlc2l6ZSA9IGZhbHNlXG4gICAgfVxuXG4gICAgdGhpcy5hZGFwdGVyLm9uKCdyZXNpemUud2F5cG9pbnRzJywgZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoIXNlbGYuZGlkUmVzaXplKSB7XG4gICAgICAgIHNlbGYuZGlkUmVzaXplID0gdHJ1ZVxuICAgICAgICBXYXlwb2ludC5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUocmVzaXplSGFuZGxlcilcbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgLyogUHJpdmF0ZSAqL1xuICBDb250ZXh0LnByb3RvdHlwZS5jcmVhdGVUaHJvdHRsZWRTY3JvbGxIYW5kbGVyID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzXG4gICAgZnVuY3Rpb24gc2Nyb2xsSGFuZGxlcigpIHtcbiAgICAgIHNlbGYuaGFuZGxlU2Nyb2xsKClcbiAgICAgIHNlbGYuZGlkU2Nyb2xsID0gZmFsc2VcbiAgICB9XG5cbiAgICB0aGlzLmFkYXB0ZXIub24oJ3Njcm9sbC53YXlwb2ludHMnLCBmdW5jdGlvbigpIHtcbiAgICAgIGlmICghc2VsZi5kaWRTY3JvbGwgfHwgV2F5cG9pbnQuaXNUb3VjaCkge1xuICAgICAgICBzZWxmLmRpZFNjcm9sbCA9IHRydWVcbiAgICAgICAgV2F5cG9pbnQucmVxdWVzdEFuaW1hdGlvbkZyYW1lKHNjcm9sbEhhbmRsZXIpXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIC8qIFByaXZhdGUgKi9cbiAgQ29udGV4dC5wcm90b3R5cGUuaGFuZGxlUmVzaXplID0gZnVuY3Rpb24oKSB7XG4gICAgV2F5cG9pbnQuQ29udGV4dC5yZWZyZXNoQWxsKClcbiAgfVxuXG4gIC8qIFByaXZhdGUgKi9cbiAgQ29udGV4dC5wcm90b3R5cGUuaGFuZGxlU2Nyb2xsID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHRyaWdnZXJlZEdyb3VwcyA9IHt9XG4gICAgdmFyIGF4ZXMgPSB7XG4gICAgICBob3Jpem9udGFsOiB7XG4gICAgICAgIG5ld1Njcm9sbDogdGhpcy5hZGFwdGVyLnNjcm9sbExlZnQoKSxcbiAgICAgICAgb2xkU2Nyb2xsOiB0aGlzLm9sZFNjcm9sbC54LFxuICAgICAgICBmb3J3YXJkOiAncmlnaHQnLFxuICAgICAgICBiYWNrd2FyZDogJ2xlZnQnXG4gICAgICB9LFxuICAgICAgdmVydGljYWw6IHtcbiAgICAgICAgbmV3U2Nyb2xsOiB0aGlzLmFkYXB0ZXIuc2Nyb2xsVG9wKCksXG4gICAgICAgIG9sZFNjcm9sbDogdGhpcy5vbGRTY3JvbGwueSxcbiAgICAgICAgZm9yd2FyZDogJ2Rvd24nLFxuICAgICAgICBiYWNrd2FyZDogJ3VwJ1xuICAgICAgfVxuICAgIH1cblxuICAgIGZvciAodmFyIGF4aXNLZXkgaW4gYXhlcykge1xuICAgICAgdmFyIGF4aXMgPSBheGVzW2F4aXNLZXldXG4gICAgICB2YXIgaXNGb3J3YXJkID0gYXhpcy5uZXdTY3JvbGwgPiBheGlzLm9sZFNjcm9sbFxuICAgICAgdmFyIGRpcmVjdGlvbiA9IGlzRm9yd2FyZCA/IGF4aXMuZm9yd2FyZCA6IGF4aXMuYmFja3dhcmRcblxuICAgICAgZm9yICh2YXIgd2F5cG9pbnRLZXkgaW4gdGhpcy53YXlwb2ludHNbYXhpc0tleV0pIHtcbiAgICAgICAgdmFyIHdheXBvaW50ID0gdGhpcy53YXlwb2ludHNbYXhpc0tleV1bd2F5cG9pbnRLZXldXG4gICAgICAgIHZhciB3YXNCZWZvcmVUcmlnZ2VyUG9pbnQgPSBheGlzLm9sZFNjcm9sbCA8IHdheXBvaW50LnRyaWdnZXJQb2ludFxuICAgICAgICB2YXIgbm93QWZ0ZXJUcmlnZ2VyUG9pbnQgPSBheGlzLm5ld1Njcm9sbCA+PSB3YXlwb2ludC50cmlnZ2VyUG9pbnRcbiAgICAgICAgdmFyIGNyb3NzZWRGb3J3YXJkID0gd2FzQmVmb3JlVHJpZ2dlclBvaW50ICYmIG5vd0FmdGVyVHJpZ2dlclBvaW50XG4gICAgICAgIHZhciBjcm9zc2VkQmFja3dhcmQgPSAhd2FzQmVmb3JlVHJpZ2dlclBvaW50ICYmICFub3dBZnRlclRyaWdnZXJQb2ludFxuICAgICAgICBpZiAoY3Jvc3NlZEZvcndhcmQgfHwgY3Jvc3NlZEJhY2t3YXJkKSB7XG4gICAgICAgICAgd2F5cG9pbnQucXVldWVUcmlnZ2VyKGRpcmVjdGlvbilcbiAgICAgICAgICB0cmlnZ2VyZWRHcm91cHNbd2F5cG9pbnQuZ3JvdXAuaWRdID0gd2F5cG9pbnQuZ3JvdXBcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGZvciAodmFyIGdyb3VwS2V5IGluIHRyaWdnZXJlZEdyb3Vwcykge1xuICAgICAgdHJpZ2dlcmVkR3JvdXBzW2dyb3VwS2V5XS5mbHVzaFRyaWdnZXJzKClcbiAgICB9XG5cbiAgICB0aGlzLm9sZFNjcm9sbCA9IHtcbiAgICAgIHg6IGF4ZXMuaG9yaXpvbnRhbC5uZXdTY3JvbGwsXG4gICAgICB5OiBheGVzLnZlcnRpY2FsLm5ld1Njcm9sbFxuICAgIH1cbiAgfVxuXG4gIC8qIFByaXZhdGUgKi9cbiAgQ29udGV4dC5wcm90b3R5cGUuaW5uZXJIZWlnaHQgPSBmdW5jdGlvbigpIHtcbiAgICAvKmVzbGludC1kaXNhYmxlIGVxZXFlcSAqL1xuICAgIGlmICh0aGlzLmVsZW1lbnQgPT0gdGhpcy5lbGVtZW50LndpbmRvdykge1xuICAgICAgcmV0dXJuIFdheXBvaW50LnZpZXdwb3J0SGVpZ2h0KClcbiAgICB9XG4gICAgLyplc2xpbnQtZW5hYmxlIGVxZXFlcSAqL1xuICAgIHJldHVybiB0aGlzLmFkYXB0ZXIuaW5uZXJIZWlnaHQoKVxuICB9XG5cbiAgLyogUHJpdmF0ZSAqL1xuICBDb250ZXh0LnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbih3YXlwb2ludCkge1xuICAgIGRlbGV0ZSB0aGlzLndheXBvaW50c1t3YXlwb2ludC5heGlzXVt3YXlwb2ludC5rZXldXG4gICAgdGhpcy5jaGVja0VtcHR5KClcbiAgfVxuXG4gIC8qIFByaXZhdGUgKi9cbiAgQ29udGV4dC5wcm90b3R5cGUuaW5uZXJXaWR0aCA9IGZ1bmN0aW9uKCkge1xuICAgIC8qZXNsaW50LWRpc2FibGUgZXFlcWVxICovXG4gICAgaWYgKHRoaXMuZWxlbWVudCA9PSB0aGlzLmVsZW1lbnQud2luZG93KSB7XG4gICAgICByZXR1cm4gV2F5cG9pbnQudmlld3BvcnRXaWR0aCgpXG4gICAgfVxuICAgIC8qZXNsaW50LWVuYWJsZSBlcWVxZXEgKi9cbiAgICByZXR1cm4gdGhpcy5hZGFwdGVyLmlubmVyV2lkdGgoKVxuICB9XG5cbiAgLyogUHVibGljICovXG4gIC8qIGh0dHA6Ly9pbWFrZXdlYnRoaW5ncy5jb20vd2F5cG9pbnRzL2FwaS9jb250ZXh0LWRlc3Ryb3kgKi9cbiAgQ29udGV4dC5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBhbGxXYXlwb2ludHMgPSBbXVxuICAgIGZvciAodmFyIGF4aXMgaW4gdGhpcy53YXlwb2ludHMpIHtcbiAgICAgIGZvciAodmFyIHdheXBvaW50S2V5IGluIHRoaXMud2F5cG9pbnRzW2F4aXNdKSB7XG4gICAgICAgIGFsbFdheXBvaW50cy5wdXNoKHRoaXMud2F5cG9pbnRzW2F4aXNdW3dheXBvaW50S2V5XSlcbiAgICAgIH1cbiAgICB9XG4gICAgZm9yICh2YXIgaSA9IDAsIGVuZCA9IGFsbFdheXBvaW50cy5sZW5ndGg7IGkgPCBlbmQ7IGkrKykge1xuICAgICAgYWxsV2F5cG9pbnRzW2ldLmRlc3Ryb3koKVxuICAgIH1cbiAgfVxuXG4gIC8qIFB1YmxpYyAqL1xuICAvKiBodHRwOi8vaW1ha2V3ZWJ0aGluZ3MuY29tL3dheXBvaW50cy9hcGkvY29udGV4dC1yZWZyZXNoICovXG4gIENvbnRleHQucHJvdG90eXBlLnJlZnJlc2ggPSBmdW5jdGlvbigpIHtcbiAgICAvKmVzbGludC1kaXNhYmxlIGVxZXFlcSAqL1xuICAgIHZhciBpc1dpbmRvdyA9IHRoaXMuZWxlbWVudCA9PSB0aGlzLmVsZW1lbnQud2luZG93XG4gICAgLyplc2xpbnQtZW5hYmxlIGVxZXFlcSAqL1xuICAgIHZhciBjb250ZXh0T2Zmc2V0ID0gaXNXaW5kb3cgPyB1bmRlZmluZWQgOiB0aGlzLmFkYXB0ZXIub2Zmc2V0KClcbiAgICB2YXIgdHJpZ2dlcmVkR3JvdXBzID0ge31cbiAgICB2YXIgYXhlc1xuXG4gICAgdGhpcy5oYW5kbGVTY3JvbGwoKVxuICAgIGF4ZXMgPSB7XG4gICAgICBob3Jpem9udGFsOiB7XG4gICAgICAgIGNvbnRleHRPZmZzZXQ6IGlzV2luZG93ID8gMCA6IGNvbnRleHRPZmZzZXQubGVmdCxcbiAgICAgICAgY29udGV4dFNjcm9sbDogaXNXaW5kb3cgPyAwIDogdGhpcy5vbGRTY3JvbGwueCxcbiAgICAgICAgY29udGV4dERpbWVuc2lvbjogdGhpcy5pbm5lcldpZHRoKCksXG4gICAgICAgIG9sZFNjcm9sbDogdGhpcy5vbGRTY3JvbGwueCxcbiAgICAgICAgZm9yd2FyZDogJ3JpZ2h0JyxcbiAgICAgICAgYmFja3dhcmQ6ICdsZWZ0JyxcbiAgICAgICAgb2Zmc2V0UHJvcDogJ2xlZnQnXG4gICAgICB9LFxuICAgICAgdmVydGljYWw6IHtcbiAgICAgICAgY29udGV4dE9mZnNldDogaXNXaW5kb3cgPyAwIDogY29udGV4dE9mZnNldC50b3AsXG4gICAgICAgIGNvbnRleHRTY3JvbGw6IGlzV2luZG93ID8gMCA6IHRoaXMub2xkU2Nyb2xsLnksXG4gICAgICAgIGNvbnRleHREaW1lbnNpb246IHRoaXMuaW5uZXJIZWlnaHQoKSxcbiAgICAgICAgb2xkU2Nyb2xsOiB0aGlzLm9sZFNjcm9sbC55LFxuICAgICAgICBmb3J3YXJkOiAnZG93bicsXG4gICAgICAgIGJhY2t3YXJkOiAndXAnLFxuICAgICAgICBvZmZzZXRQcm9wOiAndG9wJ1xuICAgICAgfVxuICAgIH1cblxuICAgIGZvciAodmFyIGF4aXNLZXkgaW4gYXhlcykge1xuICAgICAgdmFyIGF4aXMgPSBheGVzW2F4aXNLZXldXG4gICAgICBmb3IgKHZhciB3YXlwb2ludEtleSBpbiB0aGlzLndheXBvaW50c1theGlzS2V5XSkge1xuICAgICAgICB2YXIgd2F5cG9pbnQgPSB0aGlzLndheXBvaW50c1theGlzS2V5XVt3YXlwb2ludEtleV1cbiAgICAgICAgdmFyIGFkanVzdG1lbnQgPSB3YXlwb2ludC5vcHRpb25zLm9mZnNldFxuICAgICAgICB2YXIgb2xkVHJpZ2dlclBvaW50ID0gd2F5cG9pbnQudHJpZ2dlclBvaW50XG4gICAgICAgIHZhciBlbGVtZW50T2Zmc2V0ID0gMFxuICAgICAgICB2YXIgZnJlc2hXYXlwb2ludCA9IG9sZFRyaWdnZXJQb2ludCA9PSBudWxsXG4gICAgICAgIHZhciBjb250ZXh0TW9kaWZpZXIsIHdhc0JlZm9yZVNjcm9sbCwgbm93QWZ0ZXJTY3JvbGxcbiAgICAgICAgdmFyIHRyaWdnZXJlZEJhY2t3YXJkLCB0cmlnZ2VyZWRGb3J3YXJkXG5cbiAgICAgICAgaWYgKHdheXBvaW50LmVsZW1lbnQgIT09IHdheXBvaW50LmVsZW1lbnQud2luZG93KSB7XG4gICAgICAgICAgZWxlbWVudE9mZnNldCA9IHdheXBvaW50LmFkYXB0ZXIub2Zmc2V0KClbYXhpcy5vZmZzZXRQcm9wXVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHR5cGVvZiBhZGp1c3RtZW50ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgYWRqdXN0bWVudCA9IGFkanVzdG1lbnQuYXBwbHkod2F5cG9pbnQpXG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodHlwZW9mIGFkanVzdG1lbnQgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgYWRqdXN0bWVudCA9IHBhcnNlRmxvYXQoYWRqdXN0bWVudClcbiAgICAgICAgICBpZiAod2F5cG9pbnQub3B0aW9ucy5vZmZzZXQuaW5kZXhPZignJScpID4gLSAxKSB7XG4gICAgICAgICAgICBhZGp1c3RtZW50ID0gTWF0aC5jZWlsKGF4aXMuY29udGV4dERpbWVuc2lvbiAqIGFkanVzdG1lbnQgLyAxMDApXG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgY29udGV4dE1vZGlmaWVyID0gYXhpcy5jb250ZXh0U2Nyb2xsIC0gYXhpcy5jb250ZXh0T2Zmc2V0XG4gICAgICAgIHdheXBvaW50LnRyaWdnZXJQb2ludCA9IGVsZW1lbnRPZmZzZXQgKyBjb250ZXh0TW9kaWZpZXIgLSBhZGp1c3RtZW50XG4gICAgICAgIHdhc0JlZm9yZVNjcm9sbCA9IG9sZFRyaWdnZXJQb2ludCA8IGF4aXMub2xkU2Nyb2xsXG4gICAgICAgIG5vd0FmdGVyU2Nyb2xsID0gd2F5cG9pbnQudHJpZ2dlclBvaW50ID49IGF4aXMub2xkU2Nyb2xsXG4gICAgICAgIHRyaWdnZXJlZEJhY2t3YXJkID0gd2FzQmVmb3JlU2Nyb2xsICYmIG5vd0FmdGVyU2Nyb2xsXG4gICAgICAgIHRyaWdnZXJlZEZvcndhcmQgPSAhd2FzQmVmb3JlU2Nyb2xsICYmICFub3dBZnRlclNjcm9sbFxuXG4gICAgICAgIGlmICghZnJlc2hXYXlwb2ludCAmJiB0cmlnZ2VyZWRCYWNrd2FyZCkge1xuICAgICAgICAgIHdheXBvaW50LnF1ZXVlVHJpZ2dlcihheGlzLmJhY2t3YXJkKVxuICAgICAgICAgIHRyaWdnZXJlZEdyb3Vwc1t3YXlwb2ludC5ncm91cC5pZF0gPSB3YXlwb2ludC5ncm91cFxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKCFmcmVzaFdheXBvaW50ICYmIHRyaWdnZXJlZEZvcndhcmQpIHtcbiAgICAgICAgICB3YXlwb2ludC5xdWV1ZVRyaWdnZXIoYXhpcy5mb3J3YXJkKVxuICAgICAgICAgIHRyaWdnZXJlZEdyb3Vwc1t3YXlwb2ludC5ncm91cC5pZF0gPSB3YXlwb2ludC5ncm91cFxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGZyZXNoV2F5cG9pbnQgJiYgYXhpcy5vbGRTY3JvbGwgPj0gd2F5cG9pbnQudHJpZ2dlclBvaW50KSB7XG4gICAgICAgICAgd2F5cG9pbnQucXVldWVUcmlnZ2VyKGF4aXMuZm9yd2FyZClcbiAgICAgICAgICB0cmlnZ2VyZWRHcm91cHNbd2F5cG9pbnQuZ3JvdXAuaWRdID0gd2F5cG9pbnQuZ3JvdXBcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIFdheXBvaW50LnJlcXVlc3RBbmltYXRpb25GcmFtZShmdW5jdGlvbigpIHtcbiAgICAgIGZvciAodmFyIGdyb3VwS2V5IGluIHRyaWdnZXJlZEdyb3Vwcykge1xuICAgICAgICB0cmlnZ2VyZWRHcm91cHNbZ3JvdXBLZXldLmZsdXNoVHJpZ2dlcnMoKVxuICAgICAgfVxuICAgIH0pXG5cbiAgICByZXR1cm4gdGhpc1xuICB9XG5cbiAgLyogUHJpdmF0ZSAqL1xuICBDb250ZXh0LmZpbmRPckNyZWF0ZUJ5RWxlbWVudCA9IGZ1bmN0aW9uKGVsZW1lbnQpIHtcbiAgICByZXR1cm4gQ29udGV4dC5maW5kQnlFbGVtZW50KGVsZW1lbnQpIHx8IG5ldyBDb250ZXh0KGVsZW1lbnQpXG4gIH1cblxuICAvKiBQcml2YXRlICovXG4gIENvbnRleHQucmVmcmVzaEFsbCA9IGZ1bmN0aW9uKCkge1xuICAgIGZvciAodmFyIGNvbnRleHRJZCBpbiBjb250ZXh0cykge1xuICAgICAgY29udGV4dHNbY29udGV4dElkXS5yZWZyZXNoKClcbiAgICB9XG4gIH1cblxuICAvKiBQdWJsaWMgKi9cbiAgLyogaHR0cDovL2ltYWtld2VidGhpbmdzLmNvbS93YXlwb2ludHMvYXBpL2NvbnRleHQtZmluZC1ieS1lbGVtZW50ICovXG4gIENvbnRleHQuZmluZEJ5RWxlbWVudCA9IGZ1bmN0aW9uKGVsZW1lbnQpIHtcbiAgICByZXR1cm4gY29udGV4dHNbZWxlbWVudC53YXlwb2ludENvbnRleHRLZXldXG4gIH1cblxuICB3aW5kb3cub25sb2FkID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKG9sZFdpbmRvd0xvYWQpIHtcbiAgICAgIG9sZFdpbmRvd0xvYWQoKVxuICAgIH1cbiAgICBDb250ZXh0LnJlZnJlc2hBbGwoKVxuICB9XG5cbiAgV2F5cG9pbnQucmVxdWVzdEFuaW1hdGlvbkZyYW1lID0gZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgICB2YXIgcmVxdWVzdEZuID0gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSB8fFxuICAgICAgd2luZG93Lm1velJlcXVlc3RBbmltYXRpb25GcmFtZSB8fFxuICAgICAgd2luZG93LndlYmtpdFJlcXVlc3RBbmltYXRpb25GcmFtZSB8fFxuICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lU2hpbVxuICAgIHJlcXVlc3RGbi5jYWxsKHdpbmRvdywgY2FsbGJhY2spXG4gIH1cbiAgV2F5cG9pbnQuQ29udGV4dCA9IENvbnRleHRcbn0oKSlcbjsoZnVuY3Rpb24oKSB7XG4gICd1c2Ugc3RyaWN0J1xuXG4gIGZ1bmN0aW9uIGJ5VHJpZ2dlclBvaW50KGEsIGIpIHtcbiAgICByZXR1cm4gYS50cmlnZ2VyUG9pbnQgLSBiLnRyaWdnZXJQb2ludFxuICB9XG5cbiAgZnVuY3Rpb24gYnlSZXZlcnNlVHJpZ2dlclBvaW50KGEsIGIpIHtcbiAgICByZXR1cm4gYi50cmlnZ2VyUG9pbnQgLSBhLnRyaWdnZXJQb2ludFxuICB9XG5cbiAgdmFyIGdyb3VwcyA9IHtcbiAgICB2ZXJ0aWNhbDoge30sXG4gICAgaG9yaXpvbnRhbDoge31cbiAgfVxuICB2YXIgV2F5cG9pbnQgPSB3aW5kb3cuV2F5cG9pbnRcblxuICAvKiBodHRwOi8vaW1ha2V3ZWJ0aGluZ3MuY29tL3dheXBvaW50cy9hcGkvZ3JvdXAgKi9cbiAgZnVuY3Rpb24gR3JvdXAob3B0aW9ucykge1xuICAgIHRoaXMubmFtZSA9IG9wdGlvbnMubmFtZVxuICAgIHRoaXMuYXhpcyA9IG9wdGlvbnMuYXhpc1xuICAgIHRoaXMuaWQgPSB0aGlzLm5hbWUgKyAnLScgKyB0aGlzLmF4aXNcbiAgICB0aGlzLndheXBvaW50cyA9IFtdXG4gICAgdGhpcy5jbGVhclRyaWdnZXJRdWV1ZXMoKVxuICAgIGdyb3Vwc1t0aGlzLmF4aXNdW3RoaXMubmFtZV0gPSB0aGlzXG4gIH1cblxuICAvKiBQcml2YXRlICovXG4gIEdyb3VwLnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbih3YXlwb2ludCkge1xuICAgIHRoaXMud2F5cG9pbnRzLnB1c2god2F5cG9pbnQpXG4gIH1cblxuICAvKiBQcml2YXRlICovXG4gIEdyb3VwLnByb3RvdHlwZS5jbGVhclRyaWdnZXJRdWV1ZXMgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLnRyaWdnZXJRdWV1ZXMgPSB7XG4gICAgICB1cDogW10sXG4gICAgICBkb3duOiBbXSxcbiAgICAgIGxlZnQ6IFtdLFxuICAgICAgcmlnaHQ6IFtdXG4gICAgfVxuICB9XG5cbiAgLyogUHJpdmF0ZSAqL1xuICBHcm91cC5wcm90b3R5cGUuZmx1c2hUcmlnZ2VycyA9IGZ1bmN0aW9uKCkge1xuICAgIGZvciAodmFyIGRpcmVjdGlvbiBpbiB0aGlzLnRyaWdnZXJRdWV1ZXMpIHtcbiAgICAgIHZhciB3YXlwb2ludHMgPSB0aGlzLnRyaWdnZXJRdWV1ZXNbZGlyZWN0aW9uXVxuICAgICAgdmFyIHJldmVyc2UgPSBkaXJlY3Rpb24gPT09ICd1cCcgfHwgZGlyZWN0aW9uID09PSAnbGVmdCdcbiAgICAgIHdheXBvaW50cy5zb3J0KHJldmVyc2UgPyBieVJldmVyc2VUcmlnZ2VyUG9pbnQgOiBieVRyaWdnZXJQb2ludClcbiAgICAgIGZvciAodmFyIGkgPSAwLCBlbmQgPSB3YXlwb2ludHMubGVuZ3RoOyBpIDwgZW5kOyBpICs9IDEpIHtcbiAgICAgICAgdmFyIHdheXBvaW50ID0gd2F5cG9pbnRzW2ldXG4gICAgICAgIGlmICh3YXlwb2ludC5vcHRpb25zLmNvbnRpbnVvdXMgfHwgaSA9PT0gd2F5cG9pbnRzLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICB3YXlwb2ludC50cmlnZ2VyKFtkaXJlY3Rpb25dKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMuY2xlYXJUcmlnZ2VyUXVldWVzKClcbiAgfVxuXG4gIC8qIFByaXZhdGUgKi9cbiAgR3JvdXAucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbih3YXlwb2ludCkge1xuICAgIHRoaXMud2F5cG9pbnRzLnNvcnQoYnlUcmlnZ2VyUG9pbnQpXG4gICAgdmFyIGluZGV4ID0gV2F5cG9pbnQuQWRhcHRlci5pbkFycmF5KHdheXBvaW50LCB0aGlzLndheXBvaW50cylcbiAgICB2YXIgaXNMYXN0ID0gaW5kZXggPT09IHRoaXMud2F5cG9pbnRzLmxlbmd0aCAtIDFcbiAgICByZXR1cm4gaXNMYXN0ID8gbnVsbCA6IHRoaXMud2F5cG9pbnRzW2luZGV4ICsgMV1cbiAgfVxuXG4gIC8qIFByaXZhdGUgKi9cbiAgR3JvdXAucHJvdG90eXBlLnByZXZpb3VzID0gZnVuY3Rpb24od2F5cG9pbnQpIHtcbiAgICB0aGlzLndheXBvaW50cy5zb3J0KGJ5VHJpZ2dlclBvaW50KVxuICAgIHZhciBpbmRleCA9IFdheXBvaW50LkFkYXB0ZXIuaW5BcnJheSh3YXlwb2ludCwgdGhpcy53YXlwb2ludHMpXG4gICAgcmV0dXJuIGluZGV4ID8gdGhpcy53YXlwb2ludHNbaW5kZXggLSAxXSA6IG51bGxcbiAgfVxuXG4gIC8qIFByaXZhdGUgKi9cbiAgR3JvdXAucHJvdG90eXBlLnF1ZXVlVHJpZ2dlciA9IGZ1bmN0aW9uKHdheXBvaW50LCBkaXJlY3Rpb24pIHtcbiAgICB0aGlzLnRyaWdnZXJRdWV1ZXNbZGlyZWN0aW9uXS5wdXNoKHdheXBvaW50KVxuICB9XG5cbiAgLyogUHJpdmF0ZSAqL1xuICBHcm91cC5wcm90b3R5cGUucmVtb3ZlID0gZnVuY3Rpb24od2F5cG9pbnQpIHtcbiAgICB2YXIgaW5kZXggPSBXYXlwb2ludC5BZGFwdGVyLmluQXJyYXkod2F5cG9pbnQsIHRoaXMud2F5cG9pbnRzKVxuICAgIGlmIChpbmRleCA+IC0xKSB7XG4gICAgICB0aGlzLndheXBvaW50cy5zcGxpY2UoaW5kZXgsIDEpXG4gICAgfVxuICB9XG5cbiAgLyogUHVibGljICovXG4gIC8qIGh0dHA6Ly9pbWFrZXdlYnRoaW5ncy5jb20vd2F5cG9pbnRzL2FwaS9maXJzdCAqL1xuICBHcm91cC5wcm90b3R5cGUuZmlyc3QgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy53YXlwb2ludHNbMF1cbiAgfVxuXG4gIC8qIFB1YmxpYyAqL1xuICAvKiBodHRwOi8vaW1ha2V3ZWJ0aGluZ3MuY29tL3dheXBvaW50cy9hcGkvbGFzdCAqL1xuICBHcm91cC5wcm90b3R5cGUubGFzdCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLndheXBvaW50c1t0aGlzLndheXBvaW50cy5sZW5ndGggLSAxXVxuICB9XG5cbiAgLyogUHJpdmF0ZSAqL1xuICBHcm91cC5maW5kT3JDcmVhdGUgPSBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgcmV0dXJuIGdyb3Vwc1tvcHRpb25zLmF4aXNdW29wdGlvbnMubmFtZV0gfHwgbmV3IEdyb3VwKG9wdGlvbnMpXG4gIH1cblxuICBXYXlwb2ludC5Hcm91cCA9IEdyb3VwXG59KCkpXG47KGZ1bmN0aW9uKCkge1xuICAndXNlIHN0cmljdCdcblxuICB2YXIgV2F5cG9pbnQgPSB3aW5kb3cuV2F5cG9pbnRcblxuICBmdW5jdGlvbiBpc1dpbmRvdyhlbGVtZW50KSB7XG4gICAgcmV0dXJuIGVsZW1lbnQgPT09IGVsZW1lbnQud2luZG93XG4gIH1cblxuICBmdW5jdGlvbiBnZXRXaW5kb3coZWxlbWVudCkge1xuICAgIGlmIChpc1dpbmRvdyhlbGVtZW50KSkge1xuICAgICAgcmV0dXJuIGVsZW1lbnRcbiAgICB9XG4gICAgcmV0dXJuIGVsZW1lbnQuZGVmYXVsdFZpZXdcbiAgfVxuXG4gIGZ1bmN0aW9uIE5vRnJhbWV3b3JrQWRhcHRlcihlbGVtZW50KSB7XG4gICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudFxuICAgIHRoaXMuaGFuZGxlcnMgPSB7fVxuICB9XG5cbiAgTm9GcmFtZXdvcmtBZGFwdGVyLnByb3RvdHlwZS5pbm5lckhlaWdodCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBpc1dpbiA9IGlzV2luZG93KHRoaXMuZWxlbWVudClcbiAgICByZXR1cm4gaXNXaW4gPyB0aGlzLmVsZW1lbnQuaW5uZXJIZWlnaHQgOiB0aGlzLmVsZW1lbnQuY2xpZW50SGVpZ2h0XG4gIH1cblxuICBOb0ZyYW1ld29ya0FkYXB0ZXIucHJvdG90eXBlLmlubmVyV2lkdGggPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgaXNXaW4gPSBpc1dpbmRvdyh0aGlzLmVsZW1lbnQpXG4gICAgcmV0dXJuIGlzV2luID8gdGhpcy5lbGVtZW50LmlubmVyV2lkdGggOiB0aGlzLmVsZW1lbnQuY2xpZW50V2lkdGhcbiAgfVxuXG4gIE5vRnJhbWV3b3JrQWRhcHRlci5wcm90b3R5cGUub2ZmID0gZnVuY3Rpb24oZXZlbnQsIGhhbmRsZXIpIHtcbiAgICBmdW5jdGlvbiByZW1vdmVMaXN0ZW5lcnMoZWxlbWVudCwgbGlzdGVuZXJzLCBoYW5kbGVyKSB7XG4gICAgICBmb3IgKHZhciBpID0gMCwgZW5kID0gbGlzdGVuZXJzLmxlbmd0aCAtIDE7IGkgPCBlbmQ7IGkrKykge1xuICAgICAgICB2YXIgbGlzdGVuZXIgPSBsaXN0ZW5lcnNbaV1cbiAgICAgICAgaWYgKCFoYW5kbGVyIHx8IGhhbmRsZXIgPT09IGxpc3RlbmVyKSB7XG4gICAgICAgICAgZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKGxpc3RlbmVyKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIGV2ZW50UGFydHMgPSBldmVudC5zcGxpdCgnLicpXG4gICAgdmFyIGV2ZW50VHlwZSA9IGV2ZW50UGFydHNbMF1cbiAgICB2YXIgbmFtZXNwYWNlID0gZXZlbnRQYXJ0c1sxXVxuICAgIHZhciBlbGVtZW50ID0gdGhpcy5lbGVtZW50XG5cbiAgICBpZiAobmFtZXNwYWNlICYmIHRoaXMuaGFuZGxlcnNbbmFtZXNwYWNlXSAmJiBldmVudFR5cGUpIHtcbiAgICAgIHJlbW92ZUxpc3RlbmVycyhlbGVtZW50LCB0aGlzLmhhbmRsZXJzW25hbWVzcGFjZV1bZXZlbnRUeXBlXSwgaGFuZGxlcilcbiAgICAgIHRoaXMuaGFuZGxlcnNbbmFtZXNwYWNlXVtldmVudFR5cGVdID0gW11cbiAgICB9XG4gICAgZWxzZSBpZiAoZXZlbnRUeXBlKSB7XG4gICAgICBmb3IgKHZhciBucyBpbiB0aGlzLmhhbmRsZXJzKSB7XG4gICAgICAgIHJlbW92ZUxpc3RlbmVycyhlbGVtZW50LCB0aGlzLmhhbmRsZXJzW25zXVtldmVudFR5cGVdIHx8IFtdLCBoYW5kbGVyKVxuICAgICAgICB0aGlzLmhhbmRsZXJzW25zXVtldmVudFR5cGVdID0gW11cbiAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAobmFtZXNwYWNlICYmIHRoaXMuaGFuZGxlcnNbbmFtZXNwYWNlXSkge1xuICAgICAgZm9yICh2YXIgdHlwZSBpbiB0aGlzLmhhbmRsZXJzW25hbWVzcGFjZV0pIHtcbiAgICAgICAgcmVtb3ZlTGlzdGVuZXJzKGVsZW1lbnQsIHRoaXMuaGFuZGxlcnNbbmFtZXNwYWNlXVt0eXBlXSwgaGFuZGxlcilcbiAgICAgIH1cbiAgICAgIHRoaXMuaGFuZGxlcnNbbmFtZXNwYWNlXSA9IHt9XG4gICAgfVxuICB9XG5cbiAgLyogQWRhcHRlZCBmcm9tIGpRdWVyeSAxLnggb2Zmc2V0KCkgKi9cbiAgTm9GcmFtZXdvcmtBZGFwdGVyLnByb3RvdHlwZS5vZmZzZXQgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAoIXRoaXMuZWxlbWVudC5vd25lckRvY3VtZW50KSB7XG4gICAgICByZXR1cm4gbnVsbFxuICAgIH1cblxuICAgIHZhciBkb2N1bWVudEVsZW1lbnQgPSB0aGlzLmVsZW1lbnQub3duZXJEb2N1bWVudC5kb2N1bWVudEVsZW1lbnRcbiAgICB2YXIgd2luID0gZ2V0V2luZG93KHRoaXMuZWxlbWVudC5vd25lckRvY3VtZW50KVxuICAgIHZhciByZWN0ID0ge1xuICAgICAgdG9wOiAwLFxuICAgICAgbGVmdDogMFxuICAgIH1cblxuICAgIGlmICh0aGlzLmVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KSB7XG4gICAgICByZWN0ID0gdGhpcy5lbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpXG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHRvcDogcmVjdC50b3AgKyB3aW4ucGFnZVlPZmZzZXQgLSBkb2N1bWVudEVsZW1lbnQuY2xpZW50VG9wLFxuICAgICAgbGVmdDogcmVjdC5sZWZ0ICsgd2luLnBhZ2VYT2Zmc2V0IC0gZG9jdW1lbnRFbGVtZW50LmNsaWVudExlZnRcbiAgICB9XG4gIH1cblxuICBOb0ZyYW1ld29ya0FkYXB0ZXIucHJvdG90eXBlLm9uID0gZnVuY3Rpb24oZXZlbnQsIGhhbmRsZXIpIHtcbiAgICB2YXIgZXZlbnRQYXJ0cyA9IGV2ZW50LnNwbGl0KCcuJylcbiAgICB2YXIgZXZlbnRUeXBlID0gZXZlbnRQYXJ0c1swXVxuICAgIHZhciBuYW1lc3BhY2UgPSBldmVudFBhcnRzWzFdIHx8ICdfX2RlZmF1bHQnXG4gICAgdmFyIG5zSGFuZGxlcnMgPSB0aGlzLmhhbmRsZXJzW25hbWVzcGFjZV0gPSB0aGlzLmhhbmRsZXJzW25hbWVzcGFjZV0gfHwge31cbiAgICB2YXIgbnNUeXBlTGlzdCA9IG5zSGFuZGxlcnNbZXZlbnRUeXBlXSA9IG5zSGFuZGxlcnNbZXZlbnRUeXBlXSB8fCBbXVxuXG4gICAgbnNUeXBlTGlzdC5wdXNoKGhhbmRsZXIpXG4gICAgdGhpcy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnRUeXBlLCBoYW5kbGVyKVxuICB9XG5cbiAgTm9GcmFtZXdvcmtBZGFwdGVyLnByb3RvdHlwZS5vdXRlckhlaWdodCA9IGZ1bmN0aW9uKGluY2x1ZGVNYXJnaW4pIHtcbiAgICB2YXIgaGVpZ2h0ID0gdGhpcy5pbm5lckhlaWdodCgpXG4gICAgdmFyIGNvbXB1dGVkU3R5bGVcblxuICAgIGlmIChpbmNsdWRlTWFyZ2luICYmICFpc1dpbmRvdyh0aGlzLmVsZW1lbnQpKSB7XG4gICAgICBjb21wdXRlZFN0eWxlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUodGhpcy5lbGVtZW50KVxuICAgICAgaGVpZ2h0ICs9IHBhcnNlSW50KGNvbXB1dGVkU3R5bGUubWFyZ2luVG9wLCAxMClcbiAgICAgIGhlaWdodCArPSBwYXJzZUludChjb21wdXRlZFN0eWxlLm1hcmdpbkJvdHRvbSwgMTApXG4gICAgfVxuXG4gICAgcmV0dXJuIGhlaWdodFxuICB9XG5cbiAgTm9GcmFtZXdvcmtBZGFwdGVyLnByb3RvdHlwZS5vdXRlcldpZHRoID0gZnVuY3Rpb24oaW5jbHVkZU1hcmdpbikge1xuICAgIHZhciB3aWR0aCA9IHRoaXMuaW5uZXJXaWR0aCgpXG4gICAgdmFyIGNvbXB1dGVkU3R5bGVcblxuICAgIGlmIChpbmNsdWRlTWFyZ2luICYmICFpc1dpbmRvdyh0aGlzLmVsZW1lbnQpKSB7XG4gICAgICBjb21wdXRlZFN0eWxlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUodGhpcy5lbGVtZW50KVxuICAgICAgd2lkdGggKz0gcGFyc2VJbnQoY29tcHV0ZWRTdHlsZS5tYXJnaW5MZWZ0LCAxMClcbiAgICAgIHdpZHRoICs9IHBhcnNlSW50KGNvbXB1dGVkU3R5bGUubWFyZ2luUmlnaHQsIDEwKVxuICAgIH1cblxuICAgIHJldHVybiB3aWR0aFxuICB9XG5cbiAgTm9GcmFtZXdvcmtBZGFwdGVyLnByb3RvdHlwZS5zY3JvbGxMZWZ0ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHdpbiA9IGdldFdpbmRvdyh0aGlzLmVsZW1lbnQpXG4gICAgcmV0dXJuIHdpbiA/IHdpbi5wYWdlWE9mZnNldCA6IHRoaXMuZWxlbWVudC5zY3JvbGxMZWZ0XG4gIH1cblxuICBOb0ZyYW1ld29ya0FkYXB0ZXIucHJvdG90eXBlLnNjcm9sbFRvcCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciB3aW4gPSBnZXRXaW5kb3codGhpcy5lbGVtZW50KVxuICAgIHJldHVybiB3aW4gPyB3aW4ucGFnZVlPZmZzZXQgOiB0aGlzLmVsZW1lbnQuc2Nyb2xsVG9wXG4gIH1cblxuICBOb0ZyYW1ld29ya0FkYXB0ZXIuZXh0ZW5kID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpXG5cbiAgICBmdW5jdGlvbiBtZXJnZSh0YXJnZXQsIG9iaikge1xuICAgICAgaWYgKHR5cGVvZiB0YXJnZXQgPT09ICdvYmplY3QnICYmIHR5cGVvZiBvYmogPT09ICdvYmplY3QnKSB7XG4gICAgICAgIGZvciAodmFyIGtleSBpbiBvYmopIHtcbiAgICAgICAgICBpZiAob2JqLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICAgIHRhcmdldFtrZXldID0gb2JqW2tleV1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRhcmdldFxuICAgIH1cblxuICAgIGZvciAodmFyIGkgPSAxLCBlbmQgPSBhcmdzLmxlbmd0aDsgaSA8IGVuZDsgaSsrKSB7XG4gICAgICBtZXJnZShhcmdzWzBdLCBhcmdzW2ldKVxuICAgIH1cbiAgICByZXR1cm4gYXJnc1swXVxuICB9XG5cbiAgTm9GcmFtZXdvcmtBZGFwdGVyLmluQXJyYXkgPSBmdW5jdGlvbihlbGVtZW50LCBhcnJheSwgaSkge1xuICAgIHJldHVybiBhcnJheSA9PSBudWxsID8gLTEgOiBhcnJheS5pbmRleE9mKGVsZW1lbnQsIGkpXG4gIH1cblxuICBOb0ZyYW1ld29ya0FkYXB0ZXIuaXNFbXB0eU9iamVjdCA9IGZ1bmN0aW9uKG9iaikge1xuICAgIC8qIGVzbGludCBuby11bnVzZWQtdmFyczogMCAqL1xuICAgIGZvciAodmFyIG5hbWUgaW4gb2JqKSB7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIFdheXBvaW50LmFkYXB0ZXJzLnB1c2goe1xuICAgIG5hbWU6ICdub2ZyYW1ld29yaycsXG4gICAgQWRhcHRlcjogTm9GcmFtZXdvcmtBZGFwdGVyXG4gIH0pXG4gIFdheXBvaW50LkFkYXB0ZXIgPSBOb0ZyYW1ld29ya0FkYXB0ZXJcbn0oKSlcbjtcbn0se31dfSx7fSxbMV0pIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
